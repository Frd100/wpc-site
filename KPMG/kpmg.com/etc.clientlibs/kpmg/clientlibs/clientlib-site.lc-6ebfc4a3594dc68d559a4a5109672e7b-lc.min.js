


/*! For license information please see site.js.LICENSE.txt */
!function(){var t={912:function(e){var t;window,t=function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=37)}([function(e,t,i){var s=i(1),n=i(6),o=i(7),r=i(16),a=i(18),l="prototype",c=function(e,t,i){var d,u,h,m,p=e&c.F,f=e&c.G,g=e&c.S,y=e&c.P,E=e&c.B,v=f?s:g?s[t]||(s[t]={}):(s[t]||{})[l],b=f?n:n[t]||(n[t]={}),S=b[l]||(b[l]={});for(d in f&&(i=t),i)h=((u=!p&&v&&void 0!==v[d])?v:i)[d],m=E&&u?a(h,s):y&&"function"==typeof h?a(Function.call,h):h,v&&r(v,d,h,e&c.U),b[d]!=h&&o(b,d,m),y&&S[d]!=h&&(S[d]=h)};s.core=n,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){"use strict";i.r(t),i.d(t,"h",(function(){return a})),i.d(t,"createElement",(function(){return a})),i.d(t,"cloneElement",(function(){return d})),i.d(t,"Component",(function(){return k})),i.d(t,"render",(function(){return D})),i.d(t,"rerender",(function(){return p})),i.d(t,"options",(function(){return n}));var s=function(){},n={},o=[],r=[];function a(e,t){var i,a,l,c,d=r;for(c=arguments.length;2<c--;)o.push(arguments[c]);for(t&&null!=t.children&&(o.length||o.push(t.children),delete t.children);o.length;)if((a=o.pop())&&void 0!==a.pop)for(c=a.length;c--;)o.push(a[c]);else"boolean"==typeof a&&(a=null),(l="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(l=!1)),l&&i?d[d.length-1]+=a:d===r?d=[a]:d.push(a),i=l;var u=new s;return u.nodeName=e,u.children=d,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==n.vnode&&n.vnode(u),u}function l(e,t){for(var i in t)e[i]=t[i];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function d(e,t){return a(e.nodeName,l(l({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}var u=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,h=[];function m(e){!e._dirty&&(e._dirty=!0)&&1==h.push(e)&&(n.debounceRendering||c)(p)}function p(){var e,t=h;for(h=[];e=t.pop();)e._dirty&&R(e)}function f(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=l({},e.attributes);t.children=e.children;var i=e.nodeName.defaultProps;if(void 0!==i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);return t}function y(e){var t=e.parentNode;t&&t.removeChild(e)}function E(e,t,i,s,n){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)i&&i(null),s&&s(e);else if("class"!==t||n)if("style"===t){if(s&&"string"!=typeof s&&"string"!=typeof i||(e.style.cssText=s||""),s&&"object"==typeof s){if("string"!=typeof i)for(var o in i)o in s||(e.style[o]="");for(var o in s)e.style[o]="number"==typeof s[o]&&!1===u.test(o)?s[o]+"px":s[o]}}else if("dangerouslySetInnerHTML"===t)s&&(e.innerHTML=s.__html||"");else if("o"==t[0]&&"n"==t[1]){var r=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),s?i||e.addEventListener(t,v,r):e.removeEventListener(t,v,r),(e._listeners||(e._listeners={}))[t]=s}else if("list"!==t&&"type"!==t&&!n&&t in e){try{e[t]=null==s?"":s}catch(e){}null!=s&&!1!==s||"spellcheck"==t||e.removeAttribute(t)}else{var a=n&&t!==(t=t.replace(/^xlink:?/,""));null==s||!1===s?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof s&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),s):e.setAttribute(t,s))}else e.className=s||""}function v(e){return this._listeners[e.type](n.event&&n.event(e)||e)}var b=[],S=0,C=!1,I=!1;function _(){for(var e;e=b.pop();)n.afterMount&&n.afterMount(e),e.componentDidMount&&e.componentDidMount()}function L(e,t,i,s,n){var o=e,r=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||n)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),T(e,!0))),o.__preactattr_=!0,o;var a=t.nodeName;if("function"==typeof a)return function(e,t,i,s){for(var n=e&&e._component,o=n,r=e,a=n&&e._componentConstructor===t.nodeName,l=a,c=g(t);n&&!l&&(n=n._parentComponent);)l=n.constructor===t.nodeName;return n&&l&&(!s||n._component)?(N(n,c,3,i,s),e=n.base):(o&&!a&&(U(o),e=r=null),n=w(t.nodeName,c,i),e&&!n.nextBase&&(n.nextBase=e,r=null),N(n,c,1,i,s),e=n.base,r&&e!==r&&(r._component=null,T(r,!1))),e}(e,t,i,s);if(C="svg"===a||"foreignObject"!==a&&C,a=String(a),(!e||!f(e,a))&&(o=function(e,t){var i=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return i.normalizedNodeName=e,i}(a,C),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),T(e,!0)}var l=o.firstChild,c=o.__preactattr_,d=t.children;if(null==c){c=o.__preactattr_={};for(var u=o.attributes,h=u.length;h--;)c[u[h].name]=u[h].value}return!I&&d&&1===d.length&&"string"==typeof d[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=d[0]&&(l.nodeValue=d[0]):(d&&d.length||null!=l)&&function(e,t,i,s,n){var o,r,a,l,c,d,u,h,m=e.childNodes,p=[],g={},E=0,v=0,b=m.length,S=0,C=t?t.length:0;if(0!==b)for(var I=0;I<b;I++){var _=m[I],A=_.__preactattr_;null!=(O=C&&A?_._component?_._component.__key:A.key:null)?(E++,g[O]=_):(A||(void 0!==_.splitText?!n||_.nodeValue.trim():n))&&(p[S++]=_)}if(0!==C)for(I=0;I<C;I++){var O;if(c=null,null!=(O=(l=t[I]).key))E&&void 0!==g[O]&&(c=g[O],g[O]=void 0,E--);else if(v<S)for(o=v;o<S;o++)if(void 0!==p[o]&&(d=r=p[o],h=n,"string"==typeof(u=l)||"number"==typeof u?void 0!==d.splitText:"string"==typeof u.nodeName?!d._componentConstructor&&f(d,u.nodeName):h||d._componentConstructor===u.nodeName)){c=r,p[o]=void 0,o===S-1&&S--,o===v&&v++;break}c=L(c,l,i,s),a=m[I],c&&c!==e&&c!==a&&(null==a?e.appendChild(c):c===a.nextSibling?y(a):e.insertBefore(c,a))}if(E)for(var I in g)void 0!==g[I]&&T(g[I],!1);for(;v<=S;)void 0!==(c=p[S--])&&T(c,!1)}(o,d,i,s,I||null!=c.dangerouslySetInnerHTML),function(e,t,i){var s;for(s in i)t&&null!=t[s]||null==i[s]||E(e,s,i[s],i[s]=void 0,C);for(s in t)"children"===s||"innerHTML"===s||s in i&&t[s]===("value"===s||"checked"===s?e[s]:i[s])||E(e,s,i[s],i[s]=t[s],C)}(o,t.attributes,c),C=r,o}function T(e,t){var i=e._component;i?U(i):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||y(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;T(e,!0),e=t}}var O=[];function w(e,t,i){var s,n=O.length;for(e.prototype&&e.prototype.render?(s=new e(t,i),k.call(s,t,i)):((s=new k(t,i)).constructor=e,s.render=P);n--;)if(O[n].constructor===e)return s.nextBase=O[n].nextBase,O.splice(n,1),s;return s}function P(e,t,i){return this.constructor(e,i)}function N(e,t,i,s,o){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,s)),s&&s!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=s),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==i&&(1!==i&&!1===n.syncComponentUpdates&&e.base?m(e):R(e,1,o)),e.__ref&&e.__ref(e))}function R(e,t,i,s){if(!e._disable){var o,r,a,c=e.props,d=e.state,u=e.context,h=e.prevProps||c,m=e.prevState||d,p=e.prevContext||u,f=e.base,y=e.nextBase,E=f||y,v=e._component,A=!1,O=p;if(e.constructor.getDerivedStateFromProps&&(d=l(l({},d),e.constructor.getDerivedStateFromProps(c,d)),e.state=d),f&&(e.props=h,e.state=m,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,d,u)?A=!0:e.componentWillUpdate&&e.componentWillUpdate(c,d,u),e.props=c,e.state=d,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!A){o=e.render(c,d,u),e.getChildContext&&(u=l(l({},u),e.getChildContext())),f&&e.getSnapshotBeforeUpdate&&(O=e.getSnapshotBeforeUpdate(h,m));var P,k,D=o&&o.nodeName;if("function"==typeof D){var M=g(o);(r=v)&&r.constructor===D&&M.key==r.__key?N(r,M,1,u,!1):(P=r,e._component=r=w(D,M,u),r.nextBase=r.nextBase||y,r._parentComponent=e,N(r,M,0,u,!1),R(r,1,i,!0)),k=r.base}else a=E,(P=v)&&(a=e._component=null),(E||1===t)&&(a&&(a._component=null),k=function(e,t,i,s,n,o){S++||(C=null!=n&&void 0!==n.ownerSVGElement,I=null!=e&&!("__preactattr_"in e));var r=L(e,t,i,s,o);return n&&r.parentNode!==n&&n.appendChild(r),--S||(I=!1,o||_()),r}(a,o,u,i||!f,E&&E.parentNode,!0));if(E&&k!==E&&r!==v){var F=E.parentNode;F&&k!==F&&(F.replaceChild(k,E),P||(E._component=null,T(E,!1)))}if(P&&U(P),(e.base=k)&&!s){for(var q=e,x=e;x=x._parentComponent;)(q=x).base=k;k._component=q,k._componentConstructor=q.constructor}}for(!f||i?b.unshift(e):A||(e.componentDidUpdate&&e.componentDidUpdate(h,m,O),n.afterUpdate&&n.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);S||s||_()}}function U(e){n.beforeUnmount&&n.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var i=e._component;i?U(i):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),y(e.nextBase=t),O.push(e),A(t)),e.__ref&&e.__ref(null)}function k(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function D(e,t,i){return function(e,t,i,s,n,o){S++||(C=null!=n&&void 0!==n.ownerSVGElement,I=null!=e&&!("__preactattr_"in e));var r=L(e,t,i,s,o);return n&&r.parentNode!==n&&n.appendChild(r),--S||(I=!1,o||_()),r}(i,e,{},!1,t,!1)}l(k.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),m(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),R(this,2)},render:function(){}});var M={h:a,createElement:a,cloneElement:d,Component:k,render:D,rerender:p,options:n};t.default=M},function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(e,t,i){var s=i(8),n=i(40);e.exports=i(3)?function(e,t,i){return s.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var s=i(9),n=i(38),o=i(39),r=Object.defineProperty;t.f=i(3)?Object.defineProperty:function(e,t,i){if(s(e),t=o(t,!0),s(i),n)try{return r(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var s=i(2);e.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var i=0,s=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+s).toString(36))}},function(e,t,i){var s=i(22);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){"use strict";var s=i(4);e.exports=function(e,t){return!!e&&s((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,i){var s=i(0);s(s.S+s.F,"Object",{assign:i(41)})},function(e,t,i){var s=i(2),n=i(1).document,o=s(n)&&s(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,i){var s=i(1),n=i(7),o=i(17),r=i(10)("src"),a="toString",l=Function[a],c=(""+l).split(a);i(6).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,i,a){var l="function"==typeof i;l&&(o(i,"name")||n(i,"name",t)),e[t]!==i&&(l&&(o(i,r)||n(i,r,e[t]?""+e[t]:c.join(String(t)))),e===s?e[t]=i:a?e[t]?e[t]=i:n(e,t,i):(delete e[t],n(e,t,i)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[r]||l.call(this)}))},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var s=i(19);e.exports=function(e,t,i){if(s(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,s){return e.call(t,i,s)};case 3:return function(i,s,n){return e.call(t,i,s,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var s=i(42),n=i(28);e.exports=Object.keys||function(e){return s(e,n)}},function(e,t,i){var s=i(11),n=i(12);e.exports=function(e){return s(n(e))}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var s=i(21),n=i(24),o=i(43);e.exports=function(e){return function(t,i,r){var a,l=s(t),c=n(l.length),d=o(r,c);if(e&&i!=i){for(;d<c;)if((a=l[d++])!=a)return!0}else for(;d<c;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}}},function(e,t,i){var s=i(25),n=Math.min;e.exports=function(e){return 0<e?n(s(e),9007199254740991):0}},function(e,t){var i=Math.ceil,s=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?s:i)(e)}},function(e,t,i){var s=i(27)("keys"),n=i(10);e.exports=function(e){return s[e]||(s[e]=n(e))}},function(e,t,i){var s=i(6),n=i(1),o="__core-js_shared__",r=n[o]||(n[o]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:s.version,mode:i(44)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var s=i(12);e.exports=function(e){return Object(s(e))}},function(e,t,i){var s=i(8).f,n=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in n||i(3)&&s(n,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,i){"use strict";var s=i(0),n=i(32)(1);s(s.P+s.F*!i(13)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var s=i(18),n=i(11),o=i(29),r=i(24),a=i(47);e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,d=4==e,u=6==e,h=5==e||u,m=t||a;return function(t,a,p){for(var f,g,y=o(t),E=n(y),v=s(a,p,3),b=r(E.length),S=0,C=i?m(t,b):l?m(t,0):void 0;S<b;S++)if((h||S in E)&&(g=v(f=E[S],S,y),e))if(i)C[S]=g;else if(g)switch(e){case 3:return!0;case 5:return f;case 6:return S;case 2:C.push(f)}else if(d)return!1;return u?-1:c||d?d:C}}},function(e,t,i){var s=i(22);e.exports=Array.isArray||function(e){return"Array"==s(e)}},function(e,t,i){var s=i(27)("wks"),n=i(10),o=i(1).Symbol,r="function"==typeof o;(e.exports=function(e){return s[e]||(s[e]=r&&o[e]||(r?o:n)("Symbol."+e))}).store=s},function(e,t,i){"use strict";var s=i(0),n=i(23)(!1),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0;s(s.P+s.F*(r||!i(13)(o)),"Array",{indexOf:function(e){return r?o.apply(this,arguments)||0:n(this,e,arguments[1])}})},function(e,t,i){var s=i(0);s(s.S,"Object",{create:i(52)})},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0,i(14),i(30),i(31),i(35),i(49),i(50);var s=i(5),n=function(e){return e&&e.__esModule?e:{default:e}}(i(51));function o(e){if(!e.element)throw new Error("element is not defined");if(!e.id)throw new Error("id is not defined");if(!e.source)throw new Error("source is not defined");Array.isArray(e.source)&&(e.source=r(e.source)),(0,s.render)((0,s.createElement)(n.default,e),e.element)}var r=function(e){return function(t,i){i(e.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())})))}};o.enhanceSelectElement=function(e){if(!e.selectElement)throw new Error("selectElement is not defined");if(!e.source){var t=[].filter.call(e.selectElement.options,(function(t){return t.value||e.preserveNullOptions}));e.source=t.map((function(e){return e.textContent||e.innerText}))}if(e.onConfirm=e.onConfirm||function(t){var i=[].filter.call(e.selectElement.options,(function(e){return(e.textContent||e.innerText)===t}))[0];i&&(i.selected=!0)},e.selectElement.value||void 0===e.defaultValue){var i=e.selectElement.options[e.selectElement.options.selectedIndex];e.defaultValue=i.textContent||i.innerText}void 0===e.name&&(e.name=""),void 0===e.id&&(void 0===e.selectElement.id?e.id="":e.id=e.selectElement.id),void 0===e.autoselect&&(e.autoselect=!0);var s=document.createElement("div");e.selectElement.parentNode.insertBefore(s,e.selectElement),o(Object.assign({},e,{element:s})),e.selectElement.style.display="none",e.selectElement.id=e.selectElement.id+"-select"};var a=o;t.default=a},function(e,t,i){e.exports=!i(3)&&!i(4)((function(){return 7!=Object.defineProperty(i(15)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var s=i(2);e.exports=function(e,t){if(!s(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!s(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!s(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!s(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){"use strict";var s=i(20),n=i(45),o=i(46),r=i(29),a=i(11),l=Object.assign;e.exports=!l||i(4)((function(){var e={},t={},i=Symbol(),s="abcdefghijklmnopqrst";return e[i]=7,s.split("").forEach((function(e){t[e]=e})),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=s}))?function(e,t){for(var i=r(e),l=arguments.length,c=1,d=n.f,u=o.f;c<l;)for(var h,m=a(arguments[c++]),p=d?s(m).concat(d(m)):s(m),f=p.length,g=0;g<f;)u.call(m,h=p[g++])&&(i[h]=m[h]);return i}:l},function(e,t,i){var s=i(17),n=i(21),o=i(23)(!1),r=i(26)("IE_PROTO");e.exports=function(e,t){var i,a=n(e),l=0,c=[];for(i in a)i!=r&&s(a,i)&&c.push(i);for(;t.length>l;)s(a,i=t[l++])&&(~o(c,i)||c.push(i));return c}},function(e,t,i){var s=i(25),n=Math.max,o=Math.min;e.exports=function(e,t){return(e=s(e))<0?n(e+t,0):o(e,t)}},function(e,t){e.exports=!1},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var s=i(48);e.exports=function(e,t){return new(s(e))(t)}},function(e,t,i){var s=i(2),n=i(33),o=i(34)("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),s(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,i){"use strict";var s=i(0),n=i(32)(2);s(s.P+s.F*!i(13)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var s=i(0);s(s.S,"Array",{isArray:i(33)})},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0,i(14),i(36),i(30),i(31),i(35),i(55),i(58);var s=i(5),n=r(i(60)),o=r(i(61));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c={13:"enter",27:"escape",32:"space",38:"up",40:"down"};function d(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var u=function(e){function t(t){var i;return(i=e.call(this,t)||this).elementReferences={},i.state={focused:null,hovered:null,menuOpen:!1,options:t.defaultValue?[t.defaultValue]:[],query:t.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},i.handleComponentBlur=i.handleComponentBlur.bind(l(l(i))),i.handleKeyDown=i.handleKeyDown.bind(l(l(i))),i.handleUpArrow=i.handleUpArrow.bind(l(l(i))),i.handleDownArrow=i.handleDownArrow.bind(l(l(i))),i.handleEnter=i.handleEnter.bind(l(l(i))),i.handlePrintableKey=i.handlePrintableKey.bind(l(l(i))),i.handleListMouseLeave=i.handleListMouseLeave.bind(l(l(i))),i.handleOptionBlur=i.handleOptionBlur.bind(l(l(i))),i.handleOptionClick=i.handleOptionClick.bind(l(l(i))),i.handleOptionFocus=i.handleOptionFocus.bind(l(l(i))),i.handleOptionMouseDown=i.handleOptionMouseDown.bind(l(l(i))),i.handleOptionMouseEnter=i.handleOptionMouseEnter.bind(l(l(i))),i.handleInputBlur=i.handleInputBlur.bind(l(l(i))),i.handleInputChange=i.handleInputChange.bind(l(l(i))),i.handleInputFocus=i.handleInputFocus.bind(l(l(i))),i.pollInputElement=i.pollInputElement.bind(l(l(i))),i.getDirectInputChanges=i.getDirectInputChanges.bind(l(l(i))),i}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var i=t.prototype;return i.isQueryAnOption=function(e,t){var i=this;return-1!==t.map((function(e){return i.templateInputValue(e).toLowerCase()})).indexOf(e.toLowerCase())},i.componentDidMount=function(){this.pollInputElement()},i.componentWillUnmount=function(){clearTimeout(this.$pollInput)},i.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout((function(){e.pollInputElement()}),100)},i.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},i.componentDidUpdate=function(e,t){var i=this.state.focused,s=null===i,n=t.focused!==i;n&&!s&&this.elementReferences[i].focus();var o=-1===i,r=n&&null===t.focused;if(o&&r){var a=this.elementReferences[i];a.setSelectionRange(0,a.value.length)}},i.hasAutoselect=function(){return!d()&&this.props.autoselect},i.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},i.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},i.handleComponentBlur=function(e){var t,i=this.state,s=i.options,n=i.query,o=i.selected;this.props.confirmOnBlur?(t=e.query||n,this.props.onConfirm(s[o])):t=n,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:t,selected:null,validChoiceMade:this.isQueryAnOption(t,s)})},i.handleListMouseLeave=function(e){this.setState({hovered:null})},i.handleOptionBlur=function(e,t){var i=this.state,s=i.focused,n=i.menuOpen,o=i.options,r=i.selected,a=null===e.relatedTarget,l=e.relatedTarget===this.elementReferences[-1],c=s!==t&&-1!==s;if(!c&&a||!c&&!l){var u=n&&d();this.handleComponentBlur({menuOpen:u,query:this.templateInputValue(o[r])})}},i.handleInputBlur=function(e){var t=this.state,i=t.focused,s=t.menuOpen,n=t.options,o=t.query,r=t.selected;if(-1===i){var a=s&&d(),l=d()?o:this.templateInputValue(n[r]);this.handleComponentBlur({menuOpen:a,query:l})}},i.handleInputChange=function(e){var t=this,i=this.props,s=i.minLength,n=i.source,o=i.showAllValues,r=this.hasAutoselect(),a=e.target.value,l=0===a.length,c=this.state.query.length!==a.length,d=a.length>=s;this.setState({query:a,ariaHint:l}),o||!l&&c&&d?n(a,(function(e){var i=0<e.length;t.setState({menuOpen:i,options:e,selected:r&&i?0:-1,validChoiceMade:!1})})):!l&&d||this.setState({menuOpen:!1,options:[]})},i.handleInputClick=function(e){this.handleInputChange(e)},i.handleInputFocus=function(e){var t=this.state,i=t.query,s=t.validChoiceMade,n=t.options,o=this.props.minLength,r=!s&&i.length>=o&&0<n.length;r?this.setState((function(e){var t=e.menuOpen;return{focused:-1,menuOpen:r||t,selected:-1}})):this.setState({focused:-1})},i.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},i.handleOptionMouseEnter=function(e,t){d()||this.setState({hovered:t})},i.handleOptionClick=function(e,t){var i=this.state.options[t],s=this.templateInputValue(i);this.props.onConfirm(i),this.setState({focused:-1,hovered:null,menuOpen:!1,query:s,selected:-1,validChoiceMade:!0}),this.forceUpdate()},i.handleOptionMouseDown=function(e){e.preventDefault()},i.handleUpArrow=function(e){e.preventDefault();var t=this.state,i=t.menuOpen,s=t.selected;-1!==s&&i&&this.handleOptionFocus(s-1)},i.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})}));else if(!0===this.state.menuOpen){var i=this.state,s=i.menuOpen,n=i.options,o=i.selected;o!==n.length-1&&s&&this.handleOptionFocus(o+1)}},i.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e})}))),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},i.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},i.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},i.handleKeyDown=function(e){switch(c[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(function(e){return 47<e&&e<58||32===e||8===e||64<e&&e<91||95<e&&e<112||185<e&&e<193||218<e&&e<223})(e.keyCode)&&this.handlePrintableKey(e)}},i.render=function(){var e,t=this,i=this.props,o=i.cssNamespace,r=i.displayMenu,l=i.id,c=i.minLength,u=i.name,h=i.placeholder,m=i.required,p=i.showAllValues,f=i.tNoResults,g=i.tStatusQueryTooShort,y=i.tStatusNoResults,E=i.tStatusSelectedOption,v=i.tStatusResults,b=i.tAssistiveHint,S=i.dropdownArrow,C=this.state,I=C.focused,_=C.hovered,L=C.menuOpen,T=C.options,A=C.query,O=C.selected,w=C.ariaHint,P=C.validChoiceMade,N=this.hasAutoselect(),R=-1===I,U=0===T.length,k=0!==A.length,D=A.length>=c,M=this.props.showNoOptionsFound&&R&&U&&k&&D,F=o+"__wrapper",q=o+"__input",x=null!==I?" "+q+"--focused":"",V=this.props.showAllValues?" "+q+"--show-all-values":" "+q+"--default",$=o+"__dropdown-arrow-down",B=-1!==I&&null!==I,G=o+"__menu",H=G+"--"+r,j=G+"--"+(L||M?"visible":"hidden"),K=o+"__option",z=o+"__hint",W=this.templateInputValue(T[O]),Y=W&&0===W.toLowerCase().indexOf(A.toLowerCase())&&N?A+W.substr(A.length):"",J=l+"__assistiveHint",X=w?{"aria-describedby":J}:null;return p&&"string"==typeof(e=S({className:$}))&&(e=(0,s.createElement)("div",{className:o+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),(0,s.createElement)("div",{className:F,onKeyDown:this.handleKeyDown},(0,s.createElement)(n.default,{id:l,length:T.length,queryLength:A.length,minQueryLength:c,selectedOption:this.templateInputValue(T[O]),selectedOptionIndex:O,validChoiceMade:P,isInFocus:null!==this.state.focused,tQueryTooShort:g,tNoResults:y,tSelectedOption:E,tResults:v}),Y&&(0,s.createElement)("span",null,(0,s.createElement)("input",{className:z,readonly:!0,tabIndex:"-1",value:Y})),(0,s.createElement)("input",a({"aria-expanded":L?"true":"false","aria-activedescendant":!!B&&l+"__option--"+I,"aria-owns":l+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"},X,{autoComplete:"off",className:""+q+x+V,id:l,onClick:function(e){return t.handleInputClick(e)},onBlur:this.handleInputBlur},function(e){return{onInput:e}}(this.handleInputChange),{onFocus:this.handleInputFocus,name:u,placeholder:h,ref:function(e){t.elementReferences[-1]=e},type:"text",role:"combobox",required:m,value:A})),e,(0,s.createElement)("ul",{className:G+" "+H+" "+j,onMouseLeave:function(e){return t.handleListMouseLeave(e)},id:l+"__listbox",role:"listbox"},T.map((function(e,i){var n=(-1===I?O===i:I===i)&&null===_?" "+K+"--focused":"",o=i%2?" "+K+"--odd":"",r=d()?"<span id="+l+"__option-suffix--"+i+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(i+1)+" of "+T.length+"</span>":"";return(0,s.createElement)("li",{"aria-selected":I===i?"true":"false",className:""+K+n+o,dangerouslySetInnerHTML:{__html:t.templateSuggestion(e)+r},id:l+"__option--"+i,key:i,onBlur:function(e){return t.handleOptionBlur(e,i)},onClick:function(e){return t.handleOptionClick(e,i)},onMouseDown:t.handleOptionMouseDown,onMouseEnter:function(e){return t.handleOptionMouseEnter(e,i)},ref:function(e){t.elementReferences[i]=e},role:"option",tabIndex:"-1","aria-posinset":i+1,"aria-setsize":T.length})})),M&&(0,s.createElement)("li",{className:K+" "+K+"--no-results"},f())),(0,s.createElement)("span",{id:J,style:{display:"none"}},b()))},t}(s.Component);(t.default=u).defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:o.default}},function(e,t,i){var s=i(9),n=i(53),o=i(28),r=i(26)("IE_PROTO"),a=function(){},l="prototype",c=function(){var e,t=i(15)("iframe"),s=o.length;for(t.style.display="none",i(54).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;s--;)delete c[l][o[s]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(a[l]=s(e),i=new a,a[l]=null,i[r]=e):i=c(),void 0===t?i:n(i,t)}},function(e,t,i){var s=i(8),n=i(9),o=i(20);e.exports=i(3)?Object.defineProperties:function(e,t){n(e);for(var i,r=o(t),a=r.length,l=0;l<a;)s.f(e,i=r[l++],t[i]);return e}},function(e,t,i){var s=i(1).document;e.exports=s&&s.documentElement},function(e,t,i){var s=i(0);s(s.P,"Function",{bind:i(56)})},function(e,t,i){"use strict";var s=i(19),n=i(2),o=i(57),r=[].slice,a={};e.exports=Function.bind||function(e){var t=s(this),i=r.call(arguments,1),l=function(){var s=i.concat(r.call(arguments));return this instanceof l?function(e,t,i){if(!(t in a)){for(var s=[],n=0;n<t;n++)s[n]="a["+n+"]";a[t]=Function("F,a","return new F("+s.join(",")+")")}return a[t](e,i)}(t,s.length,s):o(t,s,e)};return n(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,i){var s=void 0===i;switch(t.length){case 0:return s?e():e.call(i);case 1:return s?e(t[0]):e.call(i,t[0]);case 2:return s?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return s?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return s?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){i(59)("match",1,(function(e,t,i){return[function(i){"use strict";var s=e(this),n=null==i?void 0:i[t];return void 0!==n?n.call(i,s):new RegExp(i)[t](String(s))},i]}))},function(e,t,i){"use strict";var s=i(7),n=i(16),o=i(4),r=i(12),a=i(34);e.exports=function(e,t,i){var l=a(e),c=i(r,l,""[e]),d=c[0],u=c[1];o((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(n(String.prototype,e,d),s(RegExp.prototype,l,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}))}},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0,i(36);var s=i(5),n=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).state={bump:!1,debounced:!1},t}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var i=t.prototype;return i.componentWillMount=function(){var e=this;this.debounceStatusUpdate=function(e,t,i){var s;return function(){var n=this,o=arguments,r=i&&!s;clearTimeout(s),s=setTimeout((function(){s=null,i||e.apply(n,o)}),t),r&&e.apply(n,o)}}((function(){if(!e.state.debounced){var t=!e.props.isInFocus||e.props.validChoiceMade;e.setState((function(e){return{bump:!e.bump,debounced:!0,silenced:t}}))}}),1400)},i.componentWillReceiveProps=function(e){e.queryLength,this.setState({debounced:!1})},i.render=function(){var e,t=this.props,i=t.id,n=t.length,o=t.queryLength,r=t.minQueryLength,a=t.selectedOption,l=t.selectedOptionIndex,c=t.tQueryTooShort,d=t.tNoResults,u=t.tSelectedOption,h=t.tResults,m=this.state,p=m.bump,f=m.debounced,g=m.silenced,y=o<r,E=0===n,v=a?u(a,n,l):"";return e=y?c(r):E?d():h(n,v),this.debounceStatusUpdate(),(0,s.createElement)("div",{style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},(0,s.createElement)("div",{id:i+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!g&&f&&p?e:""),(0,s.createElement)("div",{id:i+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},g||!f||p?"":e))},t}(s.Component);(t.default=n).defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(e,t,i){return e+" "+(i+1)+" of "+t+" is highlighted"},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}}},function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var s=i(5);t.default=function(e){var t=e.className;return(0,s.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},(0,s.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},(0,s.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))}}]).default},e.exports=t()}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,s),o.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},t.apply(this,arguments)}function i(e,t){const i=t.width,s=t.height,n=t.inlineSize,o=t.blockSize;switch(e){case 1:return null!=i?{type:3,value:i,unit:"px"}:{type:1};case 3:return null!=n?{type:3,value:n,unit:"px"}:{type:1};case 2:return null!=s?{type:3,value:s,unit:"px"}:{type:1};case 4:return null!=o?{type:3,value:o,unit:"px"}:{type:1};case 5:return null!=i&&null!=s&&s>0?{type:2,value:i/s}:{type:1};case 6:return null!=i&&null!=s?{type:4,value:s>=i?"portrait":"landscape"}:{type:1}}}function n(e,t){switch(e.type){case 1:case 2:case 3:case 4:return u(e,t);case 5:{const i=t.sizeFeatures.get(e.feature);return null==i?{type:1}:i}case 6:return e.value}}function o(e){return{type:5,value:e}}function r(e,t,i){return o(function(e,t,i){switch(i){case 1:return e===t;case 2:return e>t;case 3:return e>=t;case 4:return e<t;case 5:return e<=t}}(e,t,i))}function a(e,t,i){return null==e?t:null==t?e:i(e,t)}function l(e,t){switch(e){case"cqw":return t.cqw;case"cqh":return t.cqh;case"cqi":return 0===t.writingAxis?t.cqw:t.cqh;case"cqb":return 1===t.writingAxis?t.cqw:t.cqh;case"cqmin":return a(l("cqi",t),l("cqb",t),Math.min);case"cqmax":return a(l("cqi",t),l("cqb",t),Math.max)}}function c(e,{treeContext:t}){switch(e.unit){case"px":return e.value;case"rem":return e.value*t.rootFontSize;case"em":return e.value*t.fontSize;case"cqw":case"cqh":case"cqi":case"cqb":case"cqmin":case"cqmax":return a(e.value,l(e.unit,t),((e,t)=>e*t))}return null}function d(e,t){switch(e.type){case 2:return 0===e.value?0:null;case 3:return c(e,t)}return null}function u(e,t){switch(e.type){case 4:return function(e,t){const i=n(e.left,t),s=n(e.right,t),a=e.operator;if(4===i.type&&4===s.type||5===i.type&&5===s.type)return function(e,t,i){return 1===i?o(e.value===t.value):{type:1}}(i,s,a);if(3===i.type||3===s.type){const e=d(i,t),n=d(s,t);if(null!=e&&null!=n)return r(e,n,a)}else if(2===i.type&&2===s.type)return r(i.value,s.value,a);return{type:1}}(e,t);case 2:return function(e,t){const i=u(e.left,t);return 5!==i.type||!0!==i.value?i:u(e.right,t)}(e,t);case 3:return function(e,t){const i=u(e.left,t);return 5===i.type&&!0===i.value?i:u(e.right,t)}(e,t);case 1:{const i=u(e.value,t);return 5===i.type?{type:5,value:!i.value}:{type:1}}case 5:return h(n(e,t));case 6:return h(e.value)}}function h(e){switch(e.type){case 5:return e;case 2:case 3:return{type:5,value:e.value>0}}return{type:1}}const m=Array.from({length:4},(()=>Math.floor(256*Math.random()).toString(16))).join(""),p=I("container"),f=I("container-type"),g=I("container-name"),y=`data-cqs-${m}`,E=`data-cqc-${m}`,v=I("cqw"),b=I("cqh"),S=I("cqi"),C=I("cqb");function I(e){return`--cq-${e}-${m}`}const _=Symbol();function L(e,t){const i={value:t,errorIndices:[],index:-1,at(s){const n=i.index+s;return n>=e.length?t:e[n]},consume:e=>(i.index+=e,i.value=i.at(0),i.value),reconsume(){i.index-=1},error(){i.errorIndices.push(i.index)}};return i}function T(e){return L(e,{type:0})}function*A(e){const t=[];let i=!1;for(const s of e){const e=s.codePointAt(0);i&&10!==e&&(i=!1,t.push(10)),0===e||e>=55296&&e<=57343?t.push(65533):13===e?i=!0:t.push(e)}const s=L(t,-1),{at:n,consume:o,error:r,reconsume:a}=s;function l(){return String.fromCodePoint(s.value)}function c(){return{type:13,value:l()}}function d(){for(;N(n(1));)o(1)}function u(){for(;-1!==s.value;)if(o(1),42===n(0)&&47===n(1))return void o(1);r()}function h(){const[e,t]=function(){let e=0,t="",i=n(1);for(43!==i&&45!==i||(o(1),t+=l());O(n(1));)o(1),t+=l();if(46===n(1)&&O(n(2)))for(e=1,o(1),t+=l();O(n(1));)o(1),t+=l();if(i=n(1),69===i||101===i){const i=n(2);if(O(i))for(e=1,o(1),t+=l();O(n(1));)o(1),t+=l();else if((45===i||43===i)&&O(n(3)))for(e=1,o(1),t+=l(),o(1),t+=l();O(n(1));)o(1),t+=l()}return[t,e]}(),i=n(1);return g(i,n(1),n(2))?{type:15,value:e,flag:t,unit:E()}:37===i?(o(1),{type:16,value:e}):{type:17,value:e,flag:t}}function m(){const e=E();let t=n(1);if("url"===e.toLowerCase()&&40===t){for(o(1);N(n(1))&&N(n(2));)o(1);t=n(1);const i=n(2);return 34===t||39===t?{type:23,value:e}:!N(t)||34!==i&&39!==i?function(){let e="";for(d();;){const i=o(1);if(41===i)return{type:20,value:e};if(-1===i)return r(),{type:20,value:e};if(N(i)){d();const t=n(1);return 41===t||-1===t?(o(1),-1===i&&r(),{type:20,value:e}):(v(),{type:21})}if(34===i||39===i||40===i||(t=i)>=0&&t<=8||11===t||t>=14&&t<=31||127===t)return r(),v(),{type:21};if(92===i){if(!U(i,n(1)))return r(),{type:21};e+=f()}else e+=l()}var t}():{type:23,value:e}}return 40===t?(o(1),{type:23,value:e}):{type:24,value:e}}function p(e){let t="";for(;;){const i=o(1);if(-1===i||i===e)return-1===i&&r(),{type:2,value:t};if(P(i))return r(),a(),{type:3};if(92===i){const e=n(1);if(-1===e)continue;P(e)?o(1):t+=f()}else t+=l()}}function f(){const e=o(1);if(w(e)){const t=[e];for(let e=0;e<5;e++){const e=n(1);if(!w(e))break;t.push(e),o(1)}N(n(1))&&o(1);let i=parseInt(String.fromCodePoint(...t),16);return(0===i||i>=55296&&i<=57343||i>1114111)&&(i=65533),String.fromCodePoint(i)}return-1===e?(r(),String.fromCodePoint(65533)):l()}function g(e,t,i){return 45===e?R(t)||45===t||U(t,i):!!R(e)}function y(e,t,i){return 43===e||45===e?O(t)||46===t&&O(i):!(46!==e||!O(t))||!!O(e)}function E(){let e="";for(;;){const t=o(1);if(k(t))e+=l();else{if(!U(t,n(1)))return a(),e;e+=f()}}}function v(){for(;;){const e=o(1);if(-1===e)return;U(e,n(1))&&f()}}for(;;){const e=o(1);if(47===e&&42===n(1))o(2),u();else if(N(e))d(),yield{type:1};else if(34===e)yield p(e);else if(35===e){const e=n(1);k(e)||U(e,n(2))?yield{type:14,flag:g(n(1),n(2),n(3))?1:0,value:E()}:yield c()}else if(39===e)yield p(e);else if(40===e)yield{type:4};else if(41===e)yield{type:5};else if(43===e)y(e,n(1),n(2))?(a(),yield h()):yield c();else if(44===e)yield{type:6};else if(45===e){const t=n(1),i=n(2);y(e,t,i)?(a(),yield h()):45===t&&62===i?(o(2),yield{type:19}):g(e,t,i)?(a(),yield m()):yield c()}else if(46===e)y(e,n(1),n(2))?(a(),yield h()):yield c();else if(58===e)yield{type:7};else if(59===e)yield{type:8};else if(60===e)33===n(1)&&45===n(2)&&45===n(3)?yield{type:18}:yield c();else if(64===e)if(g(n(1),n(2),n(3))){const e=E();yield{type:22,value:e}}else yield c();else if(91===e)yield{type:9};else if(92===e)U(e,n(1))?(a(),yield m()):(r(),yield c());else if(93===e)yield{type:10};else if(123===e)yield{type:11};else if(125===e)yield{type:12};else if(O(e))a(),yield h();else if(R(e))a(),yield m();else{if(-1===e)return yield{type:0},s.errorIndices;yield{type:13,value:l()}}}}function O(e){return e>=48&&e<=57}function w(e){return O(e)||e>=65&&e<=70||e>=97&&e<=102}function P(e){return 10===e||13===e||12===e}function N(e){return P(e)||9===e||32===e}function R(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128||95===e}function U(e,t){return 92===e&&!P(t)}function k(e){return R(e)||O(e)||45===e}const D={11:12,9:10,4:5};function M(e,i){const s=function(e,t){const i=[];for(;;)switch(e.consume(1).type){case 1:break;case 0:return{type:3,value:i};case 18:case 19:if(!1!==t){e.reconsume();const t=$(e);t!==_&&i.push(t)}break;case 22:e.reconsume(),i.push(V(e));break;default:{e.reconsume();const t=$(e);t!==_&&i.push(t);break}}}(T(e),!0===i);return t({},s,{value:s.value.map((e=>26===e.type?function(e){return 0===e.value.value.type?t({},e,{value:t({},e.value,{value:q(e.value.value.value)})}):e}(e):e))})}function F(e){const t=T(e),i=[];for(;;){if(0===t.consume(1).type)return i;t.reconsume(),i.push(G(t))}}function q(e){return function(e){const t=[],i=[];for(;;){const s=e.consume(1);switch(s.type){case 1:case 8:break;case 0:return{type:1,value:[...i,...t]};case 22:e.reconsume(),t.push(V(e));break;case 24:{const t=[s];let n=e.at(1);for(;8!==n.type&&0!==n.type;)t.push(G(e)),n=e.at(1);const o=B(T(t));o!==_&&i.push(o);break}case 13:if("&"===s.value){e.reconsume();const i=$(e);i!==_&&t.push(i);break}default:{e.error(),e.reconsume();let t=e.at(1);for(;8!==t.type&&0!==t.type;)G(e),t=e.at(1);break}}}}(T(e))}function x(e){for(;1===e.at(1).type;)e.consume(1)}function V(e){let t=e.consume(1);if(22!==t.type)throw new Error(`Unexpected type ${t.type}`);const i=t.value,s=[];for(;;)switch(t=e.consume(1),t.type){case 8:return{type:25,name:i,prelude:s,value:null};case 0:return e.error(),{type:25,name:i,prelude:s,value:null};case 11:return{type:25,name:i,prelude:s,value:H(e)};case 28:if(11===t.source.type)return{type:25,name:i,prelude:s,value:t};default:e.reconsume(),s.push(G(e))}}function $(e){let t=e.value;const i=[];for(;;)switch(t=e.consume(1),t.type){case 0:return e.error(),_;case 11:return{type:26,prelude:i,value:H(e)};case 28:if(11===t.source.type)return{type:26,prelude:i,value:t};default:e.reconsume(),i.push(G(e))}}function B(e){const t=e.consume(1);if(24!==t.type)throw new Error(`Unexpected type ${t.type}`);const i=t.value,s=[];let n=!1;if(x(e),7!==e.at(1).type)return e.error(),_;for(e.consume(1),x(e);0!==e.at(1).type;)s.push(G(e));const o=s[s.length-2],r=s[s.length-1];return o&&13===o.type&&"!"===o.value&&24===r.type&&"important"===r.value.toLowerCase()&&(n=!0,s.splice(s.length-2)),{type:29,name:i,value:s,important:n}}function G(e){const t=e.consume(1);switch(t.type){case 11:case 9:case 4:return H(e);case 23:return function(e){let t=e.value;if(23!==t.type)throw new Error(`Unexpected type ${t.type}`);const i=t.value,s=[];for(;;)switch(t=e.consume(1),t.type){case 5:return{type:27,name:i,value:s};case 0:return e.error(),{type:27,name:i,value:s};default:e.reconsume(),s.push(G(e))}}(e);default:return t}}function H(e){let t=e.value;const i=t,s=D[i.type];if(!s)throw new Error(`Unexpected type ${t.type}`);const n=[];for(;;)switch(t=e.consume(1),t.type){case s:return{type:28,source:i,value:{type:0,value:n}};case 0:return e.error(),{type:28,source:i,value:{type:0,value:n}};default:e.reconsume(),n.push(G(e))}}function j(e){return x(e),0===e.at(1).type}const K={11:["{","}"],9:["[","]"],4:["(",")"]};function z(e,t){switch(e.type){case 25:return`@${CSS.escape(e.name)} ${e.prelude.map((e=>z(e))).join("")}${e.value?z(e.value):";"}`;case 26:return`${e.prelude.map((e=>z(e))).join("")}${z(e.value)}`;case 28:{const[t,i]=K[e.source.type];return`${t}${W(e.value)}${i}`}case 27:return`${CSS.escape(e.name)}(${e.value.map((e=>z(e))).join("")})`;case 29:return`${CSS.escape(e.name)}:${e.value.map((e=>z(e))).join("")}${e.important?" !important":""}`;case 1:return" ";case 8:return";";case 7:return":";case 14:return"#"+CSS.escape(e.value);case 24:return CSS.escape(e.value);case 15:return e.value+CSS.escape(e.unit);case 13:case 17:return e.value;case 2:return`"${CSS.escape(e.value)}"`;case 6:return",";case 20:return"url("+CSS.escape(e.value)+")";case 22:return"@"+CSS.escape(e.value);case 16:return e.value+"%";default:throw new Error(`Unsupported token ${e.type}`)}}function W(e,t){return e.value.map((t=>{let i=z(t);return 29===t.type&&0!==e.type&&(i+=";"),i})).join("")}function Y(e){return z(e)}function J(e){const t=e.at(1);return 13===t.type&&"="===t.value&&(e.consume(1),!0)}function X(e,t){const i=[];for(;;){const s=e.at(1);if(0===s.type||t&&7===s.type||13===s.type&&(">"===s.value||"<"===s.value||"="===s.value))break;i.push(e.consume(1))}return i}function Q(e){x(e);const t=e.consume(1);return 13!==t.type?_:">"===t.value?J(e)?3:2:"<"===t.value?J(e)?5:4:"="===t.value?1:_}function Z(e){return 4===e||5===e}function ee(e){return 2===e||3===e}function te(e,t,i){const s=function(e){x(e);const t=e.consume(1);return x(e),24!==t.type||0!==e.at(1).type?_:t.value}(T(e));if(s===_)return _;let n=s.toLowerCase();return n=i?i(n):n,t.has(n)?n:_}function ie(e){return{type:13,value:e}}function se(e,t){return{type:29,name:e,value:t,important:!1}}function ne(e){return{type:24,value:e}}function oe(e,t){return{type:27,name:e,value:t}}function re(e){return oe("var",[ne(e)])}function ae(e,t){x(e);let i=!1,s=e.at(1);if(24===s.type){if("not"!==s.value.toLowerCase())return _;e.consume(1),x(e),i=!0}let n=function(e){const t=e.consume(1);switch(t.type){case 28:{if(4!==t.source.type)return _;const e=ae(T(t.value.value),null);return e!==_?e:{type:4,value:t}}case 27:return{type:4,value:t};default:return _}}(e);if(n===_)return _;n=i?{type:1,value:n}:n,x(e),s=e.at(1);const o=24===s.type?s.value.toLowerCase():null;if(null!==o){if(e.consume(1),x(e),"and"!==o&&"or"!==o||null!==t&&o!==t)return _;const i=ae(e,o);return i===_?_:{type:"and"===o?2:3,left:n,right:i}}return j(e)?n:_}function le(e){return ae(e,null)}function ce(e){switch(e.type){case 1:return[ne("not"),{type:1},...ce(e.value)];case 2:case 3:return[...ce(e.left),{type:1},ne(2===e.type?"and":"or"),{type:1},...ce(e.right)];case 4:return[e.value]}}const de={width:1,height:2,"inline-size":3,"block-size":4,"aspect-ratio":5,orientation:6},ue=new Set(Object.keys(de)),he=new Set(["none","and","not","or","normal","auto"]),me=new Set(["initial","inherit","revert","revert-layer","unset"]),pe=new Set(["size","inline-size"]);function fe(e,t,i,s){const n=i();if(n===_)return _;let o=[n,null];x(e);const r=e.at(1);if(13===r.type){if(r.value!==t)return _;e.consume(1),x(e);const i=s();x(e),i!==_&&(o=[n,i])}return j(e)?o:_}function ge(e){const t=e.consume(1);return 17===t.type?parseInt(t.value):_}function ye(e){const t=T(e);x(t);const i=t.consume(1);let s=_;switch(i.type){case 17:t.reconsume(),s=function(e){const t=fe(e,"/",(()=>ge(e)),(()=>ge(e)));return t===_?_:{type:2,value:t[0]/(null!==t[1]?t[1]:1)}}(t);break;case 15:s={type:3,value:parseInt(i.value),unit:i.unit.toLowerCase()};break;case 24:{const e=i.value.toLowerCase();switch(e){case"landscape":case"portrait":s={type:4,value:e}}}}return s===_?_:j(t)?{type:6,value:s}:_}function Ee(e){return!Se(e=e.toLowerCase())&&!he.has(e)}function ve(e,t){const i=[];for(;;){x(e);const s=e.at(1);if(24!==s.type||!t(s.value))return i;e.consume(1),i.push(s.value)}}function be(e){const t=[];for(;;){x(e);const i=e.at(1);if(24!==i.type)break;const s=i.value;if(!Ee(s))break;e.consume(1),t.push(s)}return t}function Se(e){return me.has(e)}function Ce(e){return e.map((e=>"cq-"+e))}function Ie(e){const t=ve(e,(e=>Se(e)));return 1===t.length?Ce(t):_}function _e(e,t){const i=ve(e,(e=>"none"===e));if(1===i.length)return Ce(i);if(0!==i.length)return _;if(t){const t=Ie(e);if(t!==_)return t}const s=be(e);return s.length>0&&(!t||j(e))?s:_}function Le(e,t){if(t){const t=Ie(e);if(t!==_)return t}return function(e){const t=ve(e,(e=>"normal"===e));if(1===t.length)return Ce(t);if(0!==t.length)return _;const i=ve(e,(e=>pe.has(e)));return i.length>0&&j(e)?i:_}(e)}function Te(e){const t=T(e),i=Ie(t);if(i!==_)return[i,i];const s=fe(t,"/",(()=>_e(t,!1)),(()=>Le(t,!1)));return s!==_&&j(t)?[s[0],s[1]||[]]:_}function Ae(e){const t=T(e),i=be(t);if(!i||i.length>1)return _;const s=le(t);if(s===_)return _;const n={features:new Set},o=Oe(s,n);return j(t)?{name:i.length>0?i[0]:null,condition:o,features:n.features}:_}function Oe(e,t){switch(e.type){case 1:return{type:1,value:Oe(e.value,t)};case 2:case 3:return{type:2===e.type?2:3,left:Oe(e.left,t),right:Oe(e.right,t)};case 4:if(28===e.value.type){const i=function(e,t){const i=function(e,t){const i=X(e,!0),s=e.at(1);if(0===s.type){const e=te(i,t);return e!==_&&t.has(e)?{type:1,feature:e}:_}if(7===s.type){e.consume(1);const s=X(e,!1);let n=1;const o=te(i,t,(e=>e.startsWith("min-")?(n=3,e.substring(4)):e.startsWith("max-")?(n=5,e.substring(4)):e));return o!==_?{type:2,feature:o,bounds:[null,[n,s]]}:_}const n=Q(e);if(n===_)return _;const o=X(e,!1);if(0===e.at(1).type){const e=te(i,t);if(e!==_)return{type:2,feature:e,bounds:[null,[n,o]]};const s=te(o,t);return s!==_?{type:2,feature:s,bounds:[[n,i],null]}:_}const r=Q(e);if(r===_||!(ee(n)&&ee(r)||Z(n)&&Z(r)))return _;const a=X(e,!1),l=te(o,t);return l!==_?{type:2,feature:l,bounds:[[n,i],[r,a]]}:_}(e,ue);if(i===_)return _;const s=de[i.feature];if(null==s)return _;if(t.features.add(s),1===i.type)return{type:5,feature:s};{const e={type:5,feature:s};let t=_;if(null!==i.bounds[0]){const s=ye(i.bounds[0][1]);if(s===_)return _;t={type:4,operator:i.bounds[0][0],left:s,right:e}}if(null!==i.bounds[1]){const s=ye(i.bounds[1][1]);if(s===_)return _;const n={type:4,operator:i.bounds[1][0],left:e,right:s};t=t!==_?{type:2,left:t,right:n}:n}return t}}(T(e.value.value.value),t);if(i!==_)return i}return{type:6,value:{type:1}}}}let we=0;const Pe={cqw:v,cqh:b,cqi:S,cqb:C},Ne=CSS.supports("selector(:where(div))"),Re=":not(.container-query-polyfill)";F(Array.from(A(Re)));const Ue=document.createElement("div"),ke=new Set(["before","after","first-line","first-letter"]);function De(e,t){return oe("calc",[{type:17,flag:e.flag,value:e.value},ie("*"),t])}function Me(e){return e.map((e=>{switch(e.type){case 15:return function(e){const t=e.unit,i=Pe[t];return null!=i?De(e,re(i)):"cqmin"===t||"cqmax"===t?De(e,oe(e.unit.slice(2),[re(S),{type:6},re(C)])):e}(e);case 27:return t({},e,{value:Me(e.value)})}return e}))}function Fe(e){switch(e.name){case"container":return Te(e.value)?t({},e,{name:p}):e;case"container-name":return _e(T(e.value),!0)?t({},e,{name:g}):e;case"container-type":return null!=Le(T(e.value),!0)?t({},e,{name:f}):e}return t({},e,{value:Me(e.value)})}function qe(e,i){return t({},e,{value:e.value.map((e=>{switch(e.type){case 25:return He(e,i);case 26:return function(e,i){return i.transformStyleRule(t({},e,{value:$e(e.value,i)}))}(e,i);default:return e}}))})}function xe(e){return 0===e.type||6===e.type}function Ve(e){for(let t=e.length-1;t>=0;t--)if(1!==e[t].type)return e.slice(0,t+1);return e}function $e(e,i){return function(e,i){const s=[];let n=null,o=null;for(const t of e.value.value)switch(t.type){case 25:{const e=i?i(t):t;e&&s.push(e)}break;case 29:{const e=Fe(t);switch(e.name){case p:{const e=Te(t.value);e!==_&&(n=e[0],o=e[1]);break}case g:{const e=_e(T(t.value),!0);e!==_&&(n=e);break}case f:{const e=Le(T(t.value),!0);e!==_&&(o=e);break}default:s.push(e)}}}return n&&n.length>0&&s.push(se(g,[ne(n.join(" "))])),o&&o.length>0&&s.push(se(f,[ne(o.join(" "))])),t({},e,{value:{type:2,value:s}})}(e,(e=>He(e,i)))}function Be(e){if(1===e.type)return t({},e,{value:Be(e.value)});if(2===e.type||3===e.type)return t({},e,{left:Be(e.left),right:Be(e.right)});if(4===e.type&&28===e.value.type){const i=function(e){const t=T(e);return x(t),24!==t.at(1).type?_:B(t)||_}(e.value.value.value);if(i!==_)return t({},e,{value:t({},e.value,{value:{type:0,value:[Fe(i)]}})})}return e}function Ge(e,i){let s=le(T(e.prelude));return s=s!==_?Be(s):_,t({},e,{prelude:s!==_?ce(s):e.prelude,value:e.value?t({},e.value,{value:qe(M(e.value.value.value),i)}):null})}function He(e,i){switch(e.name.toLocaleLowerCase()){case"media":case"layer":return function(e,i){return t({},e,{value:e.value?t({},e.value,{value:qe(M(e.value.value.value),i)}):null})}(e,i);case"keyframes":return function(e,i){let s=null;return e.value&&(s=t({},e.value,{value:{type:3,value:M(e.value.value.value).value.map((e=>{switch(e.type){case 26:return function(e,i){return t({},e,{value:$e(e.value,i)})}(e,i);case 25:return He(e,i)}}))}})),t({},e,{value:s})}(e,i);case"supports":return Ge(e,i);case"container":return function(e,i){if(e.value){const s=Ae(e.prelude);if(s!==_){const n={rule:s,selector:null,parent:i.parent,uid:"c"+we++},o=new Set,r=[],a=qe(M(e.value.value.value),{descriptors:i.descriptors,parent:n,transformStyleRule:e=>{const[i,s]=function(e,t){const i=T(e),s=[],n=[];for(;;){if(0===i.at(1).type)return[s,n];const l=Math.max(0,i.index);for(;o=i.at(1),a=i.at(2),!(xe(o)||7===o.type&&(7===a.type||24===a.type&&ke.has(a.value.toLowerCase())));)i.consume(1);const c=i.index+1,d=e.slice(l,c),u=d.length>0?Ve(d):[ie("*")];for(;!xe(i.at(1));)i.consume(1);const h=e.slice(c,Math.max(0,i.index+1));let m=u,p=[{type:28,source:{type:9},value:{type:0,value:[ne(h.length>0?y:E),ie("~"),ie("="),{type:2,value:t}]}}];if(Ne)p=[ie(":"),oe("where",p)];else{const e=u.map(Y).join("");e.endsWith(Re)?m=F(Array.from(A(e.substring(0,e.length-31)))):r.push({actual:e,expected:e+Re})}s.push(...u),n.push(...m),n.push(...p),n.push(...h),i.consume(1)}var o,a}(e.prelude,n.uid);if(r.length>0)return e;const a=i.map(Y).join("");try{Ue.matches(a),o.add(a)}catch(e){}return t({},e,{prelude:s})}}).value;if(r.length>0){const e=new Set,t=[];let i=0;for(const{actual:e}of r)i=Math.max(i,e.length);const s=Array.from({length:i},(()=>" ")).join("");for(const{actual:n,expected:o}of r)e.has(n)||(t.push(`${n}${s.substring(0,i-n.length)} => ${o}`),e.add(n));console.warn(`The :where() pseudo-class is not supported by this browser. To use the Container Query Polyfill, you must modify the selectors under your @container rules:\n\n${t.join("\n")}`)}return o.size>0&&(n.selector=Array.from(o).join(", ")),i.descriptors.push(n),{type:25,name:"media",prelude:[ne("all")],value:t({},e.value,{value:{type:3,value:a}})}}}return e}(e,i)}return e}class je{constructor(e){this.value=void 0,this.value=e}}function Ke(e,t){if(e===t)return!0;if(typeof e==typeof t&&null!==e&&null!==t&&"object"==typeof e){if(Array.isArray(e)){if(!Array.isArray(t)||t.length!==e.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!Ke(e[i],t[i]))return!1;return!0}if(e instanceof je)return t instanceof je&&e.value===t.value;{const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let s=0,n=i.length;s<n;s++){const n=i[s];if(!Ke(e[n],t[n]))return!1}return!0}}return!1}const ze=Symbol("CQ_INSTANCE"),We=Symbol("CQ_STYLESHEET"),Ye=CSS.supports("width: 1svh"),Je=new Set(["vertical-lr","vertical-rl","sideways-rl","sideways-lr","tb","tb-lr","tb-rl"]),Xe=["padding-left","padding-right","border-left-width","border-right-width"],Qe=["padding-top","padding-bottom","border-top-width","border-bottom-width"],Ze=/(\w*(\s|-))?(table|ruby)(-\w*)?/;class et{constructor(e){this.node=void 0,this.node=e}connected(){}disconnected(){}updated(){}}class tt extends et{constructor(e,t){super(e),this.context=void 0,this.controller=null,this.styleSheet=null,this.context=t}connected(){var e=this;const t=this.node;if("stylesheet"===t.rel){const i=new URL(t.href,document.baseURI);i.origin===location.origin&&(this.controller=ot((async function(s){const n=await fetch(i.toString(),{signal:s}),o=await n.text(),r=e.styleSheet=await e.context.registerStyleSheet({source:o,url:i,signal:s}),a=new Blob([r.source],{type:"text/css"}),l=new Image;l.onload=l.onerror=r.refresh,l.src=t.href=URL.createObjectURL(a)})))}}disconnected(){var e,t;null==(e=this.controller)||e.abort(),this.controller=null,null==(t=this.styleSheet)||t.dispose(),this.styleSheet=null}}class it extends et{constructor(e,t){super(e),this.context=void 0,this.controller=null,this.styleSheet=null,this.context=t}connected(){var e=this;this.controller=ot((async function(t){const i=e.node,s=e.styleSheet=await e.context.registerStyleSheet({source:i.innerHTML,signal:t});i.innerHTML=s.source,s.refresh()}))}disconnected(){var e,t;null==(e=this.controller)||e.abort(),this.controller=null,null==(t=this.styleSheet)||t.dispose(),this.styleSheet=null}}class st extends et{connected(){const e=`* { ${f}: cq-normal; ${g}: cq-none; }`;this.node.innerHTML=void 0===window.CSSLayerBlockRule?e:`@layer cq-polyfill-${m} { ${e} }`}}class nt extends et{constructor(e,t){super(e),this.context=void 0,this.styles=void 0,this.context=t,this.styles=window.getComputedStyle(e)}connected(){this.node.style.cssText="position: fixed; top: 0; left: 0; visibility: hidden; "+(Ye?"width: 1svw; height: 1svh;":"width: 1%; height: 1%;")}updated(){const e=dt((e=>this.styles.getPropertyValue(e)));this.context.viewportChanged({width:e.width,height:e.height})}}function ot(e){const t=new AbortController;return e(t.signal).catch((e=>{if(!(e instanceof DOMException&&"AbortError"===e.message))throw e})),t}function rt(e){let t=0;if(0===e.length)return t;if(e.startsWith("cq-")&&("normal"===(e=e.substring(3))||Se(e)))return t;const i=e.split(" ");for(const e of i)switch(e){case"size":t|=3;break;case"inline-size":t|=1;break;default:return 0}return t}function at(e){let t=0;return"none"!==e&&(t|=1,"contents"===e||"inline"===e||Ze.test(e)||(t|=2)),t}function lt(e,t){return parseFloat(e(t))}function ct(e,t){return t.reduce(((t,i)=>t+lt(e,i)),0)}function dt(e){let t=0,i=0;return"border-box"===e("box-sizing")&&(t=ct(e,Xe),i=ct(e,Qe)),{fontSize:lt(e,"font-size"),width:lt(e,"width")-t,height:lt(e,"height")-i}}function ut(e){return{containerType:rt(e(f).trim()),containerNames:(i=e(g).trim(),i.startsWith("cq-")&&("none"===(i=i.substring(3))||Se(i))?new Set([]):new Set(0===i.length?[]:i.split(" "))),writingAxis:(t=e("writing-mode").trim(),Je.has(t)?1:0),displayFlags:at(e("display").trim())};var t,i}function ht(e,t,i){null!=i?i!=e.getPropertyValue(t)&&e.setProperty(t,i):e.removeProperty(t)}function mt(e){const t=e[We];return null!=t?t:[]}function pt(e,t){e[We]=t}function ft(e,t,i){if(!i.dataset.componentInitialized&&!i.dataset.componentError)try{new e(Object.assign(t,{element:i})),i.dataset.componentInitialized=!0}catch{i.dataset.componentError=!0}}new Promise((e=>{})),window.CQPolyfill={version:"1.0.2"},"container"in document.documentElement.style||function(){function e(e){return e[ze]||null}const s=document.documentElement;if(e(s))return;const n=document.createElement(`cq-polyfill-${m}`),o=document.createElement("style");new MutationObserver((t=>{for(const i of t){for(const t of i.removedNodes){const i=e(t);null==i||i.disconnect()}i.target.nodeType!==Node.DOCUMENT_NODE&&i.target.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&null===i.target.parentNode||"attributes"===i.type&&i.attributeName&&(i.attributeName===y||i.attributeName===E||i.target instanceof Element&&i.target.getAttribute(i.attributeName)===i.oldValue)||(L(i.target).mutate(),p())}})).observe(s,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0});const r=new ResizeObserver((e=>{for(const t of e)L(t.target).resize();L(s).update(I())})),a=new et(s);async function l(e,{source:t,url:i,signal:n}){const o=function(e,t){try{const i=Array.from(A(e));if(t)for(let e=0;e<i.length;e++){const s=i[e];if(20===s.type)s.value=new URL(s.value,t).toString();else if(23===s.type&&"url"===s.value.toLowerCase()){const s=e+1<i.length?i[e+1]:null;s&&2===s.type&&(s.value=new URL(s.value,t).toString())}}const s={descriptors:[],parent:null,transformStyleRule:e=>e};return{source:W(qe(M(i,!0),s)),descriptors:s.descriptors}}catch(t){return console.warn("An error occurred while transpiling stylesheet: "+t),{source:e,descriptors:[]}}}(t,i?i.toString():void 0);let r=()=>{},a=()=>{};const l=L(s);let c=!1;return null!=n&&n.aborted||(a=()=>{if(!c){const{sheet:t}=e;null!=t&&(pt(t,o.descriptors),c=!0,r=()=>{pt(t),l.mutate(),p()},l.mutate(),p())}}),{source:o.source,dispose:r,refresh:a}}const c={cqw:null,cqh:null};function d({width:e,height:t}){c.cqw=e,c.cqh=t}function h(e,t,i){if(e instanceof Element&&t){let s="";for(const[i,n]of t.conditions){const t=i.value;null!=t.selector&&null!=n&&!(2&~n)&&e.matches(t.selector)&&(s.length>0&&(s+=" "),s+=t.uid)}s.length>0?e.setAttribute(i,s):e.removeAttribute(i)}}function p(){r.unobserve(s),r.observe(s)}const f=()=>{const e=[];for(const t of document.styleSheets)for(const i of mt(t))e.push([new je(i),0]);return e},g=window.getComputedStyle(s),I=()=>{const e=e=>g.getPropertyValue(e),i=ut(e),s=dt(e);return{parentState:null,conditions:f(),context:t({},c,{fontSize:s.fontSize,rootFontSize:s.fontSize,writingAxis:i.writingAxis}),displayFlags:i.displayFlags,isQueryContainer:!1}},_=e=>e;function L(c){let m=e(c);if(!m){let p,f=null,g=!1;c===s?(p=a,f=_):c===n?(g=!0,p=new nt(n,{viewportChanged:d})):p=c===o?new st(o):c instanceof HTMLLinkElement?new tt(c,{registerStyleSheet:e=>l(c,t({},e))}):c instanceof HTMLStyleElement?new it(c,{registerStyleSheet:e=>l(c,t({},e))}):new et(c);let I=Symbol();if(null==f&&c instanceof Element){const e=function(e){const s=window.getComputedStyle(e);return function(){let e=null;return(...n)=>{if(null==e||!Ke(e[0],n)){const o=(e=>{const{context:n,conditions:o}=e,r=e=>s.getPropertyValue(e),a=ut(r),l=t({},n,{writingAxis:a.writingAxis});let c=o,d=!1,h=a.displayFlags;!(1&e.displayFlags)&&(h=0);const{containerType:m,containerNames:p}=a;if(m>0){const e=m>0&&!(2&~h),t=new Map(o.map((e=>[e[0].value,e[1]])));if(c=[],d=!0,e){const e=dt(r);l.fontSize=e.fontSize;const s=function(e,t){const i={value:t.width},s={value:t.height};let n=i,o=s;if(1===e.writingAxis){const e=n;n=o,o=e}return!!(2&~e.containerType)&&(o.value=void 0),{width:i.value,height:s.value,inlineSize:n.value,blockSize:o.value}}(a,e),d={sizeFeatures:s,treeContext:l},h=e=>{const{rule:s}=e,n=s.name,o=null==n||p.has(n)?function(e,t){const s=new Map,n=t.sizeFeatures;for(const t of e.features){const e=i(t,n);if(1===e.type)return null;s.set(t,e)}const o=u(e.condition,{sizeFeatures:s,treeContext:t.treeContext});return 5===o.type?o.value:null}(s,d):null;var r;return null==o?1===((null!=(r=t.get(e))?r:0)&&1):!0===o},m=(e,t)=>{let i=e.get(t);if(null==i){const s=h(t);i=(s?1:0)|(!0!==s||null!=t.parent&&1&~m(e,t.parent)?0:2),e.set(t,i)}return i},f=new Map;for(const e of o)c.push([e[0],m(f,e[0].value)]);l.cqw=null!=s.width?s.width/100:n.cqw,l.cqh=null!=s.height?s.height/100:n.cqh}}return{parentState:new je(e),conditions:c,context:l,displayFlags:h,isQueryContainer:d}})(...n);null!=e&&Ke(e[1],o)||(e=[n,o])}return e[1]}}()}(c);f=t=>e(t,I)}const T=f||_;let A=null;const O=e=>{const t=A,i=T(e);return A=i,[A,A!==t]},w=c instanceof HTMLElement||c instanceof SVGElement?c.style:null;let P=!1;m={connect(){for(let e=c.firstChild;null!=e;e=e.nextSibling)L(e);p.connected()},disconnect(){c instanceof Element&&(r.unobserve(c),c.removeAttribute(y),c.removeAttribute(E)),w&&(w.removeProperty(S),w.removeProperty(C),w.removeProperty(v),w.removeProperty(b));for(let t=c.firstChild;null!=t;t=t.nextSibling){const i=e(t);null==i||i.disconnect()}p.disconnected(),delete c[ze]},update(e){const[t,i]=O(e);if(i){if(h(c,e,E),h(c,t,y),c instanceof Element){const e=g||t.isQueryContainer;e&&!P?(r.observe(c),P=!0):!e&&P&&(r.unobserve(c),P=!1)}if(w){const i=t.context,s=i.writingAxis;let n=null,o=null,r=null,a=null;(s!==e.context.writingAxis||t.isQueryContainer)&&(n=`var(${0===s?v:b})`,o=`var(${1===s?v:b})`),e&&!t.isQueryContainer||(i.cqw&&(r=i.cqw+"px"),i.cqh&&(a=i.cqh+"px")),ht(w,S,n),ht(w,C,o),ht(w,v,r),ht(w,b,a)}p.updated()}for(let e=c.firstChild;null!=e;e=e.nextSibling)L(e).update(t)},resize(){I=Symbol()},mutate(){I=Symbol();for(let e=c.firstChild;null!=e;e=e.nextSibling)L(e).mutate()}},c[ze]=m,m.connect()}return m}s.prepend(o,n),L(s),p()}();const gt={};function yt(e,t){!function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((()=>{const i=t?.selectors?.self;i||console.error("config.selectors.self not provided, Component will not initialize");let s=document.querySelectorAll(i);for(let i=0;i<s.length;i++)ft(e,t,s[i]);gt[i]||(gt[i]={ComponentFunction:e,config:t})}))}function Et(e,t,i){t.ROOT=e;for(const e in i)Object.hasOwnProperty.call(i,e)&&"ROOT"!=e&&(t[e]=t.ROOT.querySelector(i[e]))}new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)((function(e){e.forEach((function(e){let t=[].slice.call(e.addedNodes);t.length>0&&t.filter((e=>!!e.querySelectorAll)).forEach((function(e){Object.keys(gt).forEach((t=>{const{ComponentFunction:i,config:s}=gt[t];let n=function(e,t){if(e.querySelectorAll&&t)return[e,...e.querySelectorAll(t)].filter((e=>e.matches(t)))}(e,t);n.forEach((function(e){ft(i,s,e)}))}))}))}))})).observe(document.body,{subtree:!0,childList:!0,characterData:!0}),yt((function(e){const t=e.element,i=t.querySelector(e.selectors.observerHook),s=t.querySelector(e.selectors.tabsContainer),n=t.querySelector(e.selectors.tabsList),o=t.querySelectorAll(e.selectors.link),r=t.querySelector(e.selectors.leftBtn),a=t.querySelector(e.selectors.rightBtn);let l="",c=!1,d=!1;const u=[...Array.from(o).map((e=>document.querySelector(e.getAttribute("href"))))],h=new IntersectionObserver((e=>{e.forEach((e=>{"observer-hook"===e.target.getAttribute("id")&&(!e.isIntersecting&&e.target.getBoundingClientRect().top<0&&s.classList.add("sticky"),e.isIntersecting&&e.target.getBoundingClientRect().top>0&&s.classList.remove("sticky"))}))})),m=function(){u.forEach((e=>{e.getBoundingClientRect().top>0&&e.getBoundingClientRect().top<300&&(l=e.getAttribute("id"),d&&(c=!0)),0===scrollY&&(n.scrollLeft=0)})),o.forEach((e=>{e.classList.remove("active"),e.getAttribute("data-target-elem")===l&&(e.classList.add("active"),c&&(n.scrollLeft=e.offsetLeft-84),c=!1)}))},p=function(){n.scrollLeft>=20?r.classList.add("active"):r.classList.remove("active"),n.scrollWidth>s.offsetWidth&&(a.classList.add("active"),d=!0);let e=n.scrollWidth-n.clientWidth-20;n.scrollLeft>=e?a.classList.remove("active"):(a.classList.add("active"),d=!0)};window.onload=function(){h.observe(i,{threshold:1}),n.addEventListener("scroll",p),window.addEventListener("scroll",m),p()},o.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),window.removeEventListener("scroll",m),h.disconnect();const t=this.getAttribute("href").substring(1),s=document.getElementById(t);if(s){let e=s.getBoundingClientRect().top;window.scrollTo({top:e+window.scrollY-48,left:0,behavior:"smooth"})}setTimeout((()=>{d&&(c=!0),m(),window.addEventListener("scroll",m),h.observe(i,{threshold:1})}),1e3)}))})),r.addEventListener("click",(()=>{n.scrollBy({left:-n.offsetWidth,behavior:"smooth"}),p()})),a.addEventListener("click",(()=>{n.scrollBy({left:n.offsetWidth,behavior:"smooth"}),p()}))}),{selectors:{self:".anchorlinks",observerHook:"#observer-hook",tabsContainer:".cmp-anchorlinks__tabs-container",tabsList:".cmp-anchorlinks__tabs-list",link:".cmp-anchorlinks__link",leftBtn:".cmp-anchorlinks__left-btn",rightBtn:".cmp-anchorlinks__right-btn"}}),yt((function(e){const t=e.element,i=t.querySelector(".cmp-button__text").getBoundingClientRect().width;let s=window.innerWidth,n=!1;!function(e){let t=0,i=!1;window.addEventListener("scroll",(function(){let s=t;t=window.scrollY,i||(window.requestAnimationFrame((function(){e(t,s),i=!1})),i=!0)}))}(((e,t)=>{n=t>e})),window.onscroll=function(){!function(e){e&&window.scrollY>2430?t.style.opacity=1:t.style.opacity=0}(n)},t.addEventListener("click",(e=>{e.preventDefault(),document.body.scrollTop=0,document.documentElement.scrollTop=0})),function(e){e>1024&&(t.addEventListener("mouseenter",(e=>{!function(e,t){t.target.children[0].style.width=e+48+16+"px"}(i,e)})),t.addEventListener("mouseleave",(e=>{!function(e){e.target.children[0].style.width="48px"}(e)})))}(s)}),{selectors:{self:".button-btt"}});const vt=(e,t,i={},s,n)=>{const o=()=>{const o=document.body.hasAttribute("data-cmp-data-layer-enabled"),r=o?window.adobeDataLayer=window.adobeDataLayer||[]:void 0;if(o){const o={event:e,eventInfo:{path:t,...i}};s&&(o.component=s),n&&(o.page=n),r.push(o)}};"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)},bt=e=>e?e.dataset.cmpDataLayer?Object.keys(JSON.parse(e.dataset.cmpDataLayer))[0]:e.id:null;yt((function(e){const t=e.element,i={25:"cmp:videotwentyfive",50:"cmp:videofifty",75:"cmp:videoseventyfive",95:"cmp:videocomplete"};window.addEventListener("load",(async function(){try{const e=t.querySelector("[data-experience]").getAttribute("data-experience"),s=await function(e=1e4){return new Promise(((t,i)=>{const s=Date.now();!function n(){window.top.bcov&&window.top.bcov.gal&&"function"==typeof window.top.bcov.gal.getEmbeds?t(window.top.bcov.gal):Date.now()-s>=e?i(new Error("Brightcove Gallery API not loaded within timeout.")):setTimeout(n,100)}()}))}(),n=s.getEmbeds(),o=Object.keys(n).length;let r;for(let l=1;l<=o;l++){const c=s.getEmbed("bc-embed-"+l);c.api.config.id===e&&(r=c)}function a(){const e={},t=r.api.config.id,s=r.clientApi.videos;for(let t in s)s[t].id,n=e,o=s[t].id,n[o]={milestones:{25:!1,50:!1,75:!1,95:!1},hasStarted:!1};var n,o;const a=r.clientApi.player;a.on("play",(()=>{const i=a.el_.getAttribute("data-video-id");if(!e[i].hasStarted){e[i].hasStarted=!0;let s={};const n={"@type":"kpmg/components/brightcove-experience",assetType:"Brightcove Experience","dc:title":i,formType:"Non-Gated Content"};s["brightcove-experience-"+t]=n,vt("cmp:videostart","component.brightcove-experience-"+t,{},s)}})),a.on("timeupdate",(()=>{const s=a.el_.getAttribute("data-video-id");let n=a.currentTime()/a.duration()*100;for(let o in e[s].milestones)if(!e[s].milestones[o]&&n>=o){e[s].milestones[o]=!0;let n={};const r={"@type":"kpmg/components/brightcove-experience",assetType:"Brightcove Experience","dc:title":s,formType:"Non-Gated Content"};n["brightcove-experience-"+t]=r,vt(i[o],"component.brightcove-experience-"+t,{},n)}}))}a()}catch(d){console.error(d.message)}}))}),{selectors:{self:".brightcoveexperiences"}}),yt((function(e){const t=e.element,i={25:"cmp:videotwentyfive",50:"cmp:videofifty",75:"cmp:videoseventyfive",95:"cmp:videocomplete"};let s=0;async function n(){try{let e=(await function(e=1e4){return new Promise(((t,i)=>{const s=Date.now();!function n(){window.videojs&&"function"==typeof window.videojs.getAllPlayers?t(window.videojs):Date.now()-s>=e?i(new Error("videojs not loaded within timeout.")):setTimeout(n,100)}()}))}())(t.querySelector("video")),s=e.el_.id,n=e.el_.getAttribute("data-video-id"),o={25:!1,50:!1,75:!1,95:!1},r=!1;e.on("play",(()=>{if(!r){r=!0;let e={};const t={"@type":"kpmg/components/brightcove",assetType:"Brightcove","dc:title":n,formType:"Non-Gated Content"};e["brightcove-"+s]=t,vt("cmp:videostart","component.brightcove-"+s,{},e)}})),e.on("timeupdate",(()=>{let t=e.currentTime()/e.duration()*100;for(let e in o)if(!o[e]&&t>=e){o[e]=!0;let t={};const r={"@type":"kpmg/components/brightcove",assetType:"Brightcove","dc:title":n,formType:"Non-Gated Content"};t["brightcove-"+s]=r,vt(i[e],"component.brightcove-"+s,{},t)}}))}catch(e){console.error(e.message)}}window.addEventListener("load",(function(){const e=t;new MutationObserver(((e,t)=>{for(const i of e)"childList"===i.type&&i.addedNodes.length&&i.addedNodes.forEach((e=>{"VIDEO"===e.tagName&&(s++,2==s&&n(),t.disconnect())}))})).observe(e,{childList:!0,subtree:!0})}))}),{selectors:{self:".brightcoveplayer"}}),yt((function(e){const t=e.element,i=t.closest("[data-cmp-data-layer]"),s=t.querySelector(e.selectors.learnMore),n=t.querySelector(e.selectors.close);if(!s)return;const o='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',r=document.querySelectorAll(o),a=Array.from(r);function l(e){e.preventDefault(),e.stopPropagation();let i=null;t.classList.toggle("cmp-teaser__content--flipped");t.querySelector(".cmp-teaser__description").classList.toggle("backcard-flip"),i&&(clearTimeout(i),i=null)}const c=(e,t)=>{e.preventDefault(),e.stopPropagation();const i=a.indexOf(e.target.closest(o));t?r[i+1].focus():r[i-1].focus()};s.addEventListener("click",(e=>{l(e),c(e,!0),vt("cmp:show",`component.${bt(i)}`)})),n.addEventListener("click",(e=>{l(e),c(e,!1),vt("cmp:hide",`component.${bt(i)}`)}))}),{selectors:{self:".cardteaser .cmp-teaser__content",learnMore:".cmp-teaser__action-flip",close:".cmp-teaser__button-close"}});const St={ppcRegistration:{path:"registration-",title:"registration"},ppcForgotPassword:{path:"forgotPassword-",title:"forgot password"},ppcLogin:{path:"ppc-login-form-",title:"login"},rfp:{path:"rfp-form-",title:"rfp"},contact:{path:"generic-contact-form-",title:"generic contact"},peopleContact:{path:"people-contact-form-",title:"people contact"},searchInput:{path:"site-search_search-input-",title:"site search_search"},searchResult:{path:"site-search_search-result-",title:"site search_search result"},searchResultList:{path:"site-search_search-result-list-"}};function Ct({event:e,eventInfo:t,component:i}){return vt(e,t.path,{...t},i),!0}const It=(e={})=>{if("object"!=typeof e||null===e)return null;if("object"!=typeof e.eventInfo||null===e.eventInfo)return null;if("object"!=typeof e.component||null===e.component)return null;if(!e.eventInfo.path)return null;const t=e.eventInfo.path.split?.(".")[1];return t&&e.component.hasOwnProperty(t)?e.component[t]:null};function _t(e,t,i){let s=e.dataset.resourceType||"",n=e.parentElement.closest('[id][class^="cmp-"]:not([id=""])'),o=n?n.id:"",r=St[t];if(!r)return;let a={formStep:1};"peopleContact"==t?a.Contact=i&&i.contact?i.contact:"":"rfp"==t&&(a.referral=encodeURI(document.referrer)||""),i&&i.step2&&(a.formStep=2),Ct({event:"cmp:formStart",eventInfo:{path:`component.${r.path}`},component:{[r.path]:{"dc:title":`${r.title} form`,"@type":s,parentId:o,formInfo:a}}})}function Lt(e,t,i){let s=e.dataset.resourceType||"",n=e.parentElement.closest('[id][class^="cmp-"]:not([id=""])'),o=n?n.id:"",r=St[t];r&&("rfp"!=t?e.addEventListener("form-submit-success",(()=>{r=St[e.dataset.formType],Ct({event:"cmp:formComplete",eventInfo:{path:`component.${r.path}`},component:{[r.path]:{"dc:title":`${r.title} form`,formInfo:{formStep:2}}}})})):Ct({event:"cmp:formComplete",eventInfo:{path:`component.${r.path}`},component:{[r.path]:{"dc:title":`${r.title} form`,"@type":s,parentId:o,formInfo:{formStep:3,referral:encodeURI(document.referrer)||"",rfpId:i&&i.rfpid?i.rfpid:""}}}}))}function Tt(){let e=St.rfp;Ct({event:"cmp:click",eventInfo:{path:`component.${e.path}`},component:{[e.path]:{"dc:title":`${e.title} form form_print rfp`}}})}function At(e){let t=St.rfp;Ct({event:"cmp:formError",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form`,formInfo:{formStep:2,formError:e}}}})}function Ot(e,t){let i=St[e.dataset.formType];if(!i)return;let s=wt(e);Array.isArray(t)&&(s.error=s.error.filter((e=>-1==t.indexOf(e))),s.empty=s.empty.filter((e=>t.indexOf(e)>-1))),s.error.length+s.empty.length&&Ct({event:"cmp:formError",eventInfo:{path:`component.${i.path}`},component:{[i.path]:{"dc:title":`${i.title} form`,formInfo:{formError:`${s.empty.join(",")}|${s.error.join(",")}`},..."fastsubscription-"===i.path&&{formType:"Fast Subscription"}}}})}function wt(e){let t=e.querySelectorAll(":invalid:not(fieldset):not(select)"),i={},s={};return t.forEach((e=>{e.validity.valueMissing?i[e.name]=e.name:s[e.name]=e.name})),e.querySelectorAll("select.invalid").forEach((e=>i[e.name]=e.name)),{empty:Object.keys(i),error:Object.keys(s)}}function Pt(e){let t=St[e];t&&Ct({event:"cmp:show",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form_warning overlay_popup`}}})}function Nt(e,t){let i=St[e];i&&Ct({event:"cmp:click",eventInfo:{path:`component.${i.path}`},component:{[i.path]:{"dc:title":`${i.title} form_warning overlay_${t}`}}})}function Rt(e,t){let i=St.searchInput,s=e.dataset.resourceType||"",n=e?e.id:"",o="";"clear"==t?(t="input "+t,o="cmp:click"):"cancel"==t?o="cmp:hide":"start"==t&&(o="cmp:show"),Ct({event:o,eventInfo:{path:`component.${i.path}`},component:{[i.path]:{"dc:title":`${i.title} ${t}`,"@type":s,parentId:n}}})}let Ut={};const kt="search_datalayer_info";function Dt(e,t){try{let i=JSON.parse(sessionStorage.getItem(kt));i||(i={}),Ut=i,Ut[e]=t,sessionStorage.setItem(kt,JSON.stringify(Ut))}catch(e){console.warn(e)}return t}function Mt(e){try{let t=JSON.parse(sessionStorage.getItem(kt));return t?t[e]:void 0}catch(e){console.warn(e)}}function Ft(){let e=document.querySelector(".cmp-search"),t=document.querySelector(".cmp-search__cta");t&&t.addEventListener("click",(()=>Rt(e,"start")));let i=document.querySelector(".cmp-search__cancel-cta");i&&i.addEventListener("click",(()=>Rt(e,"cancel")))}function qt(e,t,i,s,n="contact",o="title"){let r={basicFilter:Mt("basicFilter"),inputTerm:Mt("inputTerm"),pageCount:Mt("pageCount")??1,resultPosition:i,searchPage:"site search",tileType:n,searchTerm:Mt("searchTerm"),numResults:Mt("numResults"),searchCount:Mt("searchCount")??1,searchMethod:Mt("searchMethod")??""};"contact"==n&&(e=`${o}-${e}`),function(e,t,i,s){let n=St.searchResultList;Ct({event:"cmp:searchResultclick",eventInfo:{path:`component.${n.path}`},component:{[n.path]:{"dc:title":t,"xdm:linkURL":i,"@type":"",parentId:e,searchInfo:s}}})}(s.parentElement.closest('[id][class^="cmp-"]:not([id=""])').id||"",e,t,r)}"loading"!==document.readyState?Ft():document.addEventListener("DOMContentLoaded",Ft);const xt={findInArray:(e=[],t="")=>{if(!Array.isArray(e)||!t)return{found:!1,index:null};const i=e.indexOf(t);return{found:-1!==i,index:-1!==i?i:null}},remove:(e=[],t="")=>e.filter((e=>e!==t)),removeFirst:e=>(e.shift(),e),removeLast:e=>(e.pop(),e),sortAlphabetically:e=>e.sort(((e,t)=>e.localeCompare(t)))},Vt={setCookie:(e,t,i)=>{let s;if(i){let e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),s=`expires=${e.toGMTString()};`}else s="";"object"==typeof t&&(t=JSON.stringify(t));const n=`${e}=${t};${s}; path=/`;document.cookie=n},getCookie:e=>{let t={};document.cookie.split(";").forEach((function(e){let[i,s]=e.split("=");t[i.trim()]=s}));const i=!!t[e];return i&&!t[e].startsWith("{")?t[e]:!(!i||!t[e].startsWith("{"))&&JSON.parse(t[e])}},$t="DEFAULT",Bt=0,Gt="TABLET",Ht=768,jt="DESKTOP_SMALL",Kt=1024,zt="DESKTOP_MEDIUM",Wt=1366,Yt={};function Jt(e){return e/16}Yt[$t]={name:$t,px:Bt,rem:Jt(Bt)},Yt[Gt]={name:Gt,px:Ht,rem:Jt(Ht)},Yt[jt]={name:jt,px:Kt,rem:Jt(Kt)},Yt[zt]={name:zt,px:Wt,rem:Jt(Wt)};const Xt={devices:["android","blackberry","iemobile","ipad","iphone","ipod","linux","macintosh","mobile","opera-mini","windows","darwin"],rootSize:16,breakPoints:Yt,orientations:{PORTRAIT:{name:"PORTRAIT",value:"portrait"},LANDSCAPE:{name:"LANDSCAPE",value:"landscape"}},regExLibrary:{mobileDevices:/mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i,iosDevices:/(ipod|iphone|ipad)/g,appleWebKit:/applewebkit/g,desktopDevices:/windows|macintosh|linux/i,squareBrackets:/\[([^\]]+)\]/gm,roundBrackets:/\(([^)]+)\)/gm,curlyBrackets:/\{([^}]+)\}/gm,html:/(<([^>]+)>)/gi,specialChars:/[@#<>=`%'";:&~^!*+?^${}()|\/[\]\\_]/g,number:/\d+/,alpha:/[a-zA-Z]/,uppercase:/[A-Z]/,lowercase:/[a-z]/,spaces:/\s/g},logHTMLObject:e=>{const t={};for(const i in e)switch(i){case"tagName":t.tagName=e.tagName;break;case"id":t.id=e.id;break;case"className":t.className=e.className;break;case"dataset":t.dataset=e.dataset}return JSON.stringify(t)},keyboard:{KEY_CODES:{8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS_LOCK",27:"ESCAPE",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN",45:"INSERT",46:"DELETE",91:"META",93:"META"}},checkArg:(e,t={})=>{let i="CommonUtils";if("object"!=typeof t||!t)throw new Error(`${i}: checkArg: invalid options: ${t}, options must be an object.`);if(t.nameSpace&&"string"==typeof t.nameSpace&&(i=t.nameSpace),t.nameSpace&&"string"!=typeof t.nameSpace)throw new Error(`${i}: checkArg: invalid nameSpace: ${t.nameSpace}, nameSpace must be a string.`);if("string"!=typeof t.type||!t.type)throw new Error(`${i}: checkArg: invalid type: ${t.type}`);if(void 0===e||!e)throw new Error(`${i}: arg is undefined: ${e}`);if(typeof e!==t.type)throw new Error(`${i}: arg: ${e}, is not of type: ${t.type}`)}};var Qt=Xt;const Zt=e=>typeof e,ei={getType:Zt,isDefined:e=>!!e&&("undefined"!==Zt(e)&&e)},ti="DOMUtils",ii=document.documentElement;function si({element:e,className:t}){if(!(e instanceof HTMLElement))throw new Error(`${ti} param of "element" needs be a type of HTMLElement!`);if("string"!=typeof t)throw new Error(`${ti} param of "className" needs be a type of string!`);e.classList.add(t)}function ni({element:e,className:t}){if(!(e instanceof HTMLElement))throw new Error(`${ti} param of "element" needs be a type of HTMLElement!`);if("string"!=typeof t)throw new Error(`${ti} param of "className" needs be a type of string!`);e.classList.remove(t)}const oi={onDocumentReady:e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},docRoot:ii,query:async(e="",t={})=>{if(!("string"===ei.getType(e)))throw new Error(`${ti} param of "selector" needs be a type of string!`);if(0===e.length)throw new Error(`${ti} param of "selector" was an empty string. Please provide a valid selector! Possible types: id, class, data attribute.`);if("object"!==ei.getType(t))throw new Error(`${ti} param of "options" needs be a type of object!`);let i=t.parent??document,s=t.wait??!0,n=t.debug??!1,o=t.timeout??!1;const r=new Promise((t=>{let r=i.querySelectorAll(e);const a=r.length;if(0!==a)t(1===a?r[0]:r);else if(s){n&&console.log(`${ti} wait has been set to true for ${e}. Setting up observer.`);const s=new MutationObserver((o=>{if(r=i.querySelectorAll(e),r){if(n){const{logHTMLObject:t}=Qt;console.log(`${ti} mutations detected for : ${e}, mutations are:`);for(const e of o)console.log(`${ti} mutation type: ${e.type}, mutation target: ${t(e.target)}`)}s.disconnect(),t(r)}}));s.observe(i,{childList:!0,subtree:!0}),!1!==o&&(n&&console.log(`${ti} timeout set to ${o} milliseconds, `,"if element is not found ",`disconnecting observer and resolving promise to false in ${o} milliseconds.`),setTimeout((()=>{s.disconnect(),t(!1),n&&console.log(`${ti} timeout of ${o} exceeded, `,"disconnecting observer and resolving promise to false.")}),o))}else t(!1)}));return r},createElement:(e="div",t={})=>{if("string"!=typeof e)throw new Error(`${ti} param of "elementType" needs be a type of string! ex. "div", "span", "p", "a", etc.`);if("object"!=typeof t)throw new Error(`${ti} param of "props" needs be a type of object!`);const i=document.createElement(e);try{Object.keys(t).forEach((e=>{const s=e,n=t[e];if("classList"===s)if("string"==typeof n)i.classList.add(n);else{n.forEach((e=>i.classList.add(e)))}else"textContent"===s?i.textContent=n:"dataset"===s?Object.keys(n).forEach((e=>{i.dataset[e]=n[e]})):i.setAttribute(s,n)}))}catch(e){throw new Error(`${ti}: createElement: `,e)}return i},addClass:e=>si(e),removeClass:e=>ni(e),hasClass:({element:e,className:t})=>{if(!(e instanceof HTMLElement))throw new Error(`${ti} param of "element" needs be a type of HTMLElement!`);if("string"!=typeof t)throw new Error(`${ti} param of "className" needs be a type of string!`);return e.classList.contains(t)},stopScroll:(e=ii)=>{if(!(e instanceof HTMLElement))throw new Error(`${ti}: stopScroll: param of "element" needs be a type of HTMLElement!`);si({element:e,className:"utils-no-scroll"})},resumeScroll:(e=ii)=>{if(!(e instanceof HTMLElement))throw new Error(`${ti}: resumeScroll: param of "element" needs be a type of HTMLElement!`);ni({element:e,className:"utils-no-scroll"})},createIntersectionObserver:({element:e,options:t,callback:i})=>{if(!(e instanceof HTMLElement))throw new Error(`${ti} param of "element" needs be a type of HTMLElement!`);if("object"!=typeof t)throw new Error(`${ti} param of "options" needs be a type of object!`);if("function"!=typeof i)throw new Error(`${ti} param of "callback" needs be a type of function!`);const s=new window.IntersectionObserver(i,t);return s.observe(e),s},getMaxZIndex:()=>Math.max(...Array.from(document.querySelectorAll("body *"),(e=>parseFloat(window.getComputedStyle(e).zIndex))).filter((e=>!Number.isNaN(e))),0),addEventForChild:(e,t,i,s)=>{e.addEventListener(t,(e=>{const t=e.target.closest(i);t&&s(e,t)}))}};var ri=class{#e;#t;constructor(){this.#e=`${this.constructor.name}`,this.#t={}}on(e,t){if("string"!=typeof e||!e)throw new Error(`${this.#e}: on: invalid name: ${e}`);if("function"!=typeof t||!t)throw new Error(`${this.#e}: on: invalid callback: ${t}`);return this.#t[e]||(this.#t[e]=[]),this.#t[e].push({name:e,callback:t}),this}onAsync(e,t){if("string"!=typeof e||!e)throw new Error(`${this.#e}: onAsync: invalid name: ${e}`);if("function"!=typeof t||!t)throw new Error(`${this.#e}: onAsync: invalid callback: ${t}`);return this.#t[e]||(this.#t[e]=[]),this.#t[e].push({name:e,callback:t,async:!0}),this}off(e,t){if("string"!=typeof e||!e)throw new Error(`${this.#e}: off: invalid name: ${e}`);if(void 0!==t&&"function"!=typeof t)throw new Error(`${this.#e}: off: invalid callback: ${t}`);if(this.#t[e]&&this.#t[e].length)return this.#t[e]=t?this.#t[e].filter((i=>i.name!==e&&i.callback!==t)):this.#t[e].filter((t=>t.name!==e)),this}dispatch(e,...t){if("string"!=typeof e||!e)throw new Error(`${this.#e}: dispatch: invalid name: ${e}`);const i=this.#t[e];if(!i||!i.length)return!1;for(let s=0;s<i.length;s++){const n=i[s];if(n.async)requestAnimationFrame((()=>n.callback(...t)));else try{n.callback(...t)}catch(t){console.warn(e,"failed",t)}}return!0}};const ai="EventUtils",li={EventEmitter:ri,removeLocalStorageValue:e=>{Qt.checkArg(e,{type:"string",nameSpace:`${ai}: removeLocalStorageValue`});try{return localStorage.removeItem(e),!0}catch(e){return console.error(`${ai}: RemoveLocalStorageValue`,e),!1}},getLocalStorageValue:e=>{Qt.checkArg(e,{type:"string",nameSpace:`${ai}: getLocalStorageValue`});try{return localStorage.getItem(e)}catch(e){return console.error(`${ai}: getLocalStorageValue`,e),!1}},saveLocalStorageValue:(e,t)=>{Qt.checkArg(e,{type:"string",nameSpace:`${ai}: saveLocalStorageValue`}),Qt.checkArg(t,{type:"string",nameSpace:`${ai}: saveLocalStorageValue`});try{return localStorage.setItem(e,t),!0}catch(e){console.error(`${ai}: saveLocalStorageValue`,e)}return!1},removeSessionStorageValue:e=>{try{return sessionStorage.removeItem(e),!0}catch(e){return console.error(`${ai}: RemoveSessionStorageValue`,e),!1}},getSessionStorageValue:e=>{try{return sessionStorage.getItem(e)}catch(e){return console.error(`${ai}: getSessionStorageValue`,e),!1}},saveSessionStorageValue:(e,t)=>{try{return sessionStorage.setItem(e,t),!0}catch(e){console.error(`${ai}: saveSessionStorageValue`,e)}return!1}},ci="FetchUtils",di={fetchJSON:async(e,t={})=>{const{method:i="GET",headers:s={},body:n=null}=t;try{const t=await fetch(e,{method:i,headers:s,body:n}),o=await t.json(),{status:r}=t;if(200===r)return o;throw new Error(`${ci} fetchJSON`,o.message)}catch(e){throw new Error(`${ci} fetchJSON`,e.message)}}};var ui=Array.isArray,hi="object"==typeof global&&global&&global.Object===Object&&global,mi="object"==typeof self&&self&&self.Object===Object&&self,pi=hi||mi||Function("return this")(),fi=pi.Symbol,gi=Object.prototype,yi=gi.hasOwnProperty,Ei=gi.toString,vi=fi?fi.toStringTag:void 0;var bi=function(e){var t=yi.call(e,vi),i=e[vi];try{e[vi]=void 0;var s=!0}catch(e){}var n=Ei.call(e);return s&&(t?e[vi]=i:delete e[vi]),n},Si=Object.prototype.toString;var Ci=function(e){return Si.call(e)},Ii=fi?fi.toStringTag:void 0;var _i=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ii&&Ii in Object(e)?bi(e):Ci(e)};var Li=function(e){return null!=e&&"object"==typeof e};var Ti=function(e){return"symbol"==typeof e||Li(e)&&"[object Symbol]"==_i(e)},Ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oi=/^\w*$/;var wi=function(e,t){if(ui(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ti(e))||(Oi.test(e)||!Ai.test(e)||null!=t&&e in Object(t))};var Pi=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Ni,Ri=function(e){if(!Pi(e))return!1;var t=_i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ui=pi["__core-js_shared__"],ki=(Ni=/[^.]+$/.exec(Ui&&Ui.keys&&Ui.keys.IE_PROTO||""))?"Symbol(src)_1."+Ni:"";var Di=function(e){return!!ki&&ki in e},Mi=Function.prototype.toString;var Fi=function(e){if(null!=e){try{return Mi.call(e)}catch(e){}try{return e+""}catch(e){}}return""},qi=/^\[object .+?Constructor\]$/,xi=Function.prototype,Vi=Object.prototype,$i=xi.toString,Bi=Vi.hasOwnProperty,Gi=RegExp("^"+$i.call(Bi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Hi=function(e){return!(!Pi(e)||Di(e))&&(Ri(e)?Gi:qi).test(Fi(e))};var ji=function(e,t){return null==e?void 0:e[t]};var Ki=function(e,t){var i=ji(e,t);return Hi(i)?i:void 0},zi=Ki(Object,"create");var Wi=function(){this.__data__=zi?zi(null):{},this.size=0};var Yi=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ji=Object.prototype.hasOwnProperty;var Xi=function(e){var t=this.__data__;if(zi){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return Ji.call(t,e)?t[e]:void 0},Qi=Object.prototype.hasOwnProperty;var Zi=function(e){var t=this.__data__;return zi?void 0!==t[e]:Qi.call(t,e)};var es=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=zi&&void 0===t?"__lodash_hash_undefined__":t,this};function ts(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}ts.prototype.clear=Wi,ts.prototype.delete=Yi,ts.prototype.get=Xi,ts.prototype.has=Zi,ts.prototype.set=es;var is=ts;var ss=function(){this.__data__=[],this.size=0};var ns=function(e,t){return e===t||e!=e&&t!=t};var os=function(e,t){for(var i=e.length;i--;)if(ns(e[i][0],t))return i;return-1},rs=Array.prototype.splice;var as=function(e){var t=this.__data__,i=os(t,e);return!(i<0)&&(i==t.length-1?t.pop():rs.call(t,i,1),--this.size,!0)};var ls=function(e){var t=this.__data__,i=os(t,e);return i<0?void 0:t[i][1]};var cs=function(e){return os(this.__data__,e)>-1};var ds=function(e,t){var i=this.__data__,s=os(i,e);return s<0?(++this.size,i.push([e,t])):i[s][1]=t,this};function us(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}us.prototype.clear=ss,us.prototype.delete=as,us.prototype.get=ls,us.prototype.has=cs,us.prototype.set=ds;var hs=us,ms=Ki(pi,"Map");var ps=function(){this.size=0,this.__data__={hash:new is,map:new(ms||hs),string:new is}};var fs=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var gs=function(e,t){var i=e.__data__;return fs(t)?i["string"==typeof t?"string":"hash"]:i.map};var ys=function(e){var t=gs(this,e).delete(e);return this.size-=t?1:0,t};var Es=function(e){return gs(this,e).get(e)};var vs=function(e){return gs(this,e).has(e)};var bs=function(e,t){var i=gs(this,e),s=i.size;return i.set(e,t),this.size+=i.size==s?0:1,this};function Ss(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}Ss.prototype.clear=ps,Ss.prototype.delete=ys,Ss.prototype.get=Es,Ss.prototype.has=vs,Ss.prototype.set=bs;var Cs=Ss;function Is(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var s=arguments,n=t?t.apply(this,s):s[0],o=i.cache;if(o.has(n))return o.get(n);var r=e.apply(this,s);return i.cache=o.set(n,r)||o,r};return i.cache=new(Is.Cache||Cs),i}Is.Cache=Cs;var _s=Is;var Ls=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ts=/\\(\\)?/g,As=function(e){var t=_s(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ls,(function(e,i,s,n){t.push(s?n.replace(Ts,"$1"):i||e)})),t}));var Os=function(e,t){for(var i=-1,s=null==e?0:e.length,n=Array(s);++i<s;)n[i]=t(e[i],i,e);return n},ws=fi?fi.prototype:void 0,Ps=ws?ws.toString:void 0;var Ns=function e(t){if("string"==typeof t)return t;if(ui(t))return Os(t,e)+"";if(Ti(t))return Ps?Ps.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i};var Rs=function(e){return null==e?"":Ns(e)};var Us=function(e,t){return ui(e)?e:wi(e,t)?[e]:As(Rs(e))};var ks=function(e){if("string"==typeof e||Ti(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Ds=function(e,t){for(var i=0,s=(t=Us(t,e)).length;null!=e&&i<s;)e=e[ks(t[i++])];return i&&i==s?e:void 0};var Ms=function(e,t,i){var s=null==e?void 0:Ds(e,t);return void 0===s?i:s},Fs=function(){try{var e=Ki(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var qs=function(e,t,i){"__proto__"==t&&Fs?Fs(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i},xs=Object.prototype.hasOwnProperty;var Vs=function(e,t,i){var s=e[t];xs.call(e,t)&&ns(s,i)&&(void 0!==i||t in e)||qs(e,t,i)},$s=/^(?:0|[1-9]\d*)$/;var Bs=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&$s.test(e))&&e>-1&&e%1==0&&e<t};var Gs=function(e,t,i,s){if(!Pi(e))return e;for(var n=-1,o=(t=Us(t,e)).length,r=o-1,a=e;null!=a&&++n<o;){var l=ks(t[n]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=r){var d=a[l];void 0===(c=s?s(d,l,a):void 0)&&(c=Pi(d)?d:Bs(t[n+1])?[]:{})}Vs(a,l,c),a=a[l]}return e};var Hs=function(e,t,i){return null==e?e:Gs(e,t,i)};const js="StringUtils",{regExLibrary:Ks}=Qt,zs=e=>e.toLowerCase().trim().replace(Ks.specialChars," ").replace(/\s+/g,"-"),Ws={convertToCamel:e=>{if("string"!=typeof e)throw new Error(`${js}: convertToCamel: str is not a string`);const t=zs(e),i=new RegExp("-.","g");return t.replace(i,(e=>e[1].toUpperCase()))},convertToKebab:e=>{if("string"!=typeof e)throw new Error(`${js}: convertToKebab: str is not a string`);return zs(e)},convertToSnake:e=>{if("string"!=typeof e)throw new Error(`${js}: convertToSnake: str is not a string`);return zs(e).replace(/-/g,"_")},slice:(e="",t={})=>{"$#fooBar$"===e&&console.log("StringUtils: slice: str: ",e,"options: ",t);const i=t.start??1,s=t.end??void 0;if("string"!=typeof e)throw new Error(`${js}: slice: str is not a string`);if("number"!=typeof i)throw new Error(`${js}: slice: start is not a number`);if("number"!=typeof s&&void 0!==s)throw new Error(`${js}: slice: end is not a number`);const n=e.trim();return s?n.slice(i,s):n.slice(i)},capitalize:e=>{if("string"!=typeof e)throw new Error(`${js}: capitalize: str is not a string`);const t=e.trim();return t.charAt(0).toUpperCase()+t.slice(1)},alphaOnly:e=>{if("string"!=typeof e)throw new Error(`${js}: alphaOnly: str is not a string`);return e.replace(/[^a-zA-Z\s]/g,"")}};var Ys=class{#e;#i={};#s;#n;constructor(e={}){this.#e=`${this.constructor.name}`;const t=e.config??!1;if(!t)throw new Error(`${this.#e}: a validation config object is required`);if(!(t&&"object"==typeof t&&Object.keys(t).length>0))throw new Error(`${this.#e}: the object is not a valid config object or empty: ${e}`);this.#i=e.config}validate=e=>this.validatePassword(e);validatePassword(e=""){if("string"!=typeof e)throw new Error(`${this.#e}: validate: password is not defined or is not a string`);const t=this.#i,i={password:e,passwordIsValid:!0,failedCount:0,totalCount:0,config:t},s=e=>i.passwordIsValid=e,{minLength:n,maxLength:o,hasAlpha:r,hasUpperCase:a,hasLowerCase:l,hasNumber:c,hasSpecialChars:d,hasNoSpaces:u}=t,{regExLibrary:h}=Qt;if(n){i.totalCount++;const o={valid:!0,type:"minLength",message:t.minLength.message};e.length>=n.value||(s(!1),i.failedCount++,o.valid=!1),i.minLength=o}if(o){i.totalCount++;const n={valid:!0,type:"maxLength",message:t.maxLength.message};e.length<=o.value||(s(!1),i.failedCount++,n.valid=!1),i.maxLength=n}if(c){i.totalCount++;const n={valid:!0,type:"hasNumber",message:t.hasNumber.message};h.number.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasNumber=n}if(r){i.totalCount++;const n={valid:!0,type:"hasAlpha",message:t.hasAlpha.message};h.alpha.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasAlpha=n}if(a){i.totalCount++;const n={valid:!0,type:"hasUpperCase",message:t.hasUpperCase.message};h.uppercase.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasUpperCase=n}if(l){i.totalCount++;const n={valid:!0,type:"hasLowerCase",message:t.hasLowerCase.message};h.lowercase.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasLowerCase=n}if(d){i.totalCount++;const n={valid:!0,type:"hasSpecialChars",message:t.hasSpecialChars.message};h.specialChars.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasSpecialChars=n}if(u){i.totalCount++;const n={valid:!0,type:"hasNoSpaces",message:t.hasNoSpaces.message};!h.spaces.test(e)||(s(!1),i.failedCount++,n.valid=!1),i.hasNoSpaces=n}return i}};const Js="FormUtils",Xs=e=>{const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)};const Qs={sanitizeInputValue:(e="")=>{if("string"!=typeof e)throw new Error(`${Js} sanitizeInputValue: The value passed to the function must be a string`);const t=0!==e.length?e:"",{html:i,specialChars:s}=Qt.regExLibrary;return t.toString().replace(i,"").replace(s,"")},focusInput:(e,t="utils-input__ios--focus")=>{if(!(e instanceof HTMLInputElement))throw new Error(`${Js} focusInput: The input passed to the function must be an HTML element with a type of input`);if("string"!=typeof t)throw new Error(`${Js} focusInput: The inputClass passed to the function must be a string`);const i=e,{iosDevices:s}=Qt.regExLibrary,n=(()=>{let e=!1;const t=()=>{e=!0,document.removeEventListener("touchstart",t)};return document.addEventListener("touchstart",t),()=>e})(),o="real",r="fake",a=()=>{const e=n(),t=(()=>{const{userAgent:e}=navigator;return s.test(e)&&!window.MSStream})();return e?o:t?r:o};(e=>{switch(a()){case o:return e.focus();case r:Xs(e),e.classList.add(t);const i=e=>{e.classList.remove(t),document.removeEventListener(i)};e.addEventListener("blur",i),e.scrollIntoView()}})(i)},classes:{PasswordValidator:Ys},fillFormFields:function(e,t){const i=t.elements,s=[];for(let t=0;t<i.length;t++){const n=i[t],o=Ms(e,n.name),{tagName:r,type:a}=n;void 0!==o&&"FIELDSET"!=r&&"BUTTON"!=r&&(s.push(n),"SELECT"==r||"TEXTAREA"==r?n.value=o:"INPUT"==r&&("checkbox"==a?n.checked=!!o:"radio"==a?n.checked=n.value==o:n.value=o))}return s},getFirstEmptyField:function(e){const t=e.querySelectorAll('input:not([type="hidden"]),select,textarea');for(let e=0;e<t.length;e++){const i=t[e];if(!i.disabled&&""===i.value.trim()&&"button"!==i.type&&"submit"!==i.type&&"reset"!==i.type)return i}return null},buildFormDataForGIGYA:function(e,t=[]){const i={},s=e.elements;for(let e=0;e<s.length;e++){const{name:n,value:o,type:r,tagName:a,checked:l}=s[e];"FIELDSET"==a||!n||t.indexOf(n)>-1||("checkbox"==r?Hs(i,n,l):"radio"==r?l&&Hs(i,n,o):Hs(i,n,o))}return i}};var Zs=Qs;const en="KeyboardUtils",{KEY_CODES:tn}=Qt.keyboard,sn={getKeyID:(e,t={})=>{if(!(e instanceof KeyboardEvent))throw new Error(`${en}: getKeyID: evt is not a KeyboardEvent`);if(!(t instanceof Object))throw new Error(`${en}: getKeyID: options is not an Object`);if(t.hasOwnProperty("lowercase")&&"boolean"!=typeof t.lowercase)throw new Error(`${en}: getKeyID: options.lowercase is not a boolean`);const i=t.lowercase,s=e=>i?e.toLowerCase():e.toUpperCase();if(e.key)return s(e.key);if(e.code)return s(e.code);if(e.keyCode)return s(tn[e.keyCode]);throw new Error(`${en}: getKeyID: event passed is missing key, code, and keyCode: ${e}`)}},nn="ObjectUtils",on={hasKey:(e,t)=>{if("object"!=typeof e)throw new Error(`${nn}: hasKey: obj is not an object`);if("string"!=typeof t)throw new Error(`${nn}: hasKey: keyName is not a string`);return Object.keys(e).some((e=>e===t))},onChange:(e,t)=>{const i={get(e,t,s){try{return new Proxy(e[t],i)}catch(i){return Reflect.get(e,t,s)}},defineProperty(e,i,s){return t(),Reflect.defineProperty(e,i,s)},deleteProperty(e,i){return t(),Reflect.deleteProperty(e,i)}};return new Proxy(e,i)},isEmpty:e=>0===Object.keys(e).length},{squareBrackets:rn,roundBrackets:an,curlyBrackets:ln,html:cn,specialChars:dn}=Qt.regExLibrary,un="RegExUtils",hn={stripHTML:e=>{if("string"!=typeof e)throw new Error(`${un}: stripHTML: txt is not a string`);return e.replace(cn,"")},stripSpecialChars:e=>{if("string"!=typeof e)throw new Error(`${un}: stripSpecialChars: txt is not a string`);return e.replace(dn,"")},findInBrackets:(e,t="round")=>{if("string"!=typeof e)throw new Error(`${un}: findInBrackets: txt is not a string`);if("string"!=typeof t)throw new Error(`${un}: findInBrackets: bracketType is not a string`);if(!["round","parens","square","curly","braces"].includes(t))throw new Error(`${un}: findInBrackets: bracketType unrecognized ${t}`);const i=(e=>{switch(e){case"round":case"parens":default:return an;case"square":return rn;case"curly":case"braces":return ln}})(t),s=[];let n;for(;null!==(n=i.exec(e));)s.push(n[1].trim());return s}};function mn(e){const t={};for(const[i,s]of e)t[i]=s;return t}const pn={navigateToURL:(e,t={})=>{if("object"!=typeof t)throw new Error("URLUtils: navigateToURL: options param must be an object. Received "+typeof t);const i=t.target??"_self";window.open(e,i)},getURL:()=>{const{hash:e,host:t,hostname:i,href:s,origin:n,pathname:o,port:r,protocol:a,search:l}=window.location;return{hash:e,hashParams:e.substring(1).split("#"),host:t,hostname:i,href:s,origin:n,pathname:o,port:r,protocol:a,search:l,searchParams:mn(new URLSearchParams(l).entries())}},getInstance:()=>{const{hostname:e}=window.location,{runMode:t}=document.querySelector("[data-cmp-search]")?.dataset??!1,i={};switch(t&&t.length>2&&(i.runMode=t),!0){case e.includes("localhost"):return i.instance="local",i;case e.includes("dev."):return i.instance="dev",i;case e.includes("qa."):return i.instance="qa",i;case e.includes("stg."):return i.instance="stg",i;case e.includes("prod."):return i.instance="prod",i;default:return i.instance="unknown",i}},isURLValid:e=>/^(((http|https):\/\/|)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?)$/.test(e)};class fn{#e;#o;#r;#a;#l;#c;#d;#u;constructor(e={}){e.debug?this.#o=!0:this.#o=!1,this.#e=this.constructor.name;const{DEFAULT:t,TABLET:i,DESKTOP_SMALL:s,DESKTOP_MEDIUM:n}=Qt.breakPoints;this.#l=t,this.#c=i,this.#d=s,this.#u=n;const{PORTRAIT:o,LANDSCAPE:r}=Qt.orientations;this.#r=o,this.#a=r,this.#o&&console.log(`${this.#e}: Init: `,this)}getData=()=>this.getDeviceData();getSystemInfo(e=""){"string"!=typeof e&&(e="");const t=""===e;t&&this.#o&&console.warn(`${this.#e}: getSystemInfo: User agent string is empty`);const i=t?null:hn.findInBrackets(e,"round")[0].split(";"),{convertToKebab:s}=Ws,n=t?null:i.map((e=>s(e.toLowerCase().trim()))),o=Qt.devices.find((t=>e.toLowerCase().includes(t)));return{system:o,systemDetails:n}}getUserAgent(){const{mobileDevices:e,desktopDevices:t,iosDevices:i}=Qt.regExLibrary,s="undefined"!=typeof navigator;!s&&this.#o&&console.warn(`${this.#e}: getUserAgent: Navigator is not available`);const{userAgent:n}=navigator;let o;if(n){if("string"!=typeof n)throw new Error(`${this.#e}: getUserAgent: userAgent type was unrecognized: ${n}`);o=n.toLowerCase()}else o=null;return{navigatorAvailable:s,userAgent:n,isMobileDevice:s?e.test(o):null,isDesktopOS:s?t.test(o):null,isIosDevice:s?i.test(o):null,systemInfo:this.getSystemInfo(n)}}getViewport(){return{width:window.innerWidth,height:window.innerHeight}}getPixelRatio(){return window.devicePixelRatio}getScreenDimensions(){const e=this.getPixelRatio(),t=window.screen.width,i=window.screen.height;return{width:t,height:i,computedWidth:t*e,computedHeight:i*e}}getCurrentBreakPoint(){const e=this.getViewport().width,t=this.#c.px,i=this.#d.px,s=this.#u.px,n=e>0&&e<t,o=e>=i&&e<s,r=e>=s;let a;return e>=t&&e<i?a=this.#c.name:o?a=this.#d.name:r?a=this.#u.name:n&&(a=this.#l.name),a||(console.error(`${this.#e}: getCurrentBreakpoint: Breakpoint not recognized: Returning ${this.#l}`),a=this.#l.name),a}getCurrentOrientation(){return window.matchMedia("(orientation: portrait)").matches?this.#r.name:this.#a.name}getRootSize(){return Qt.rootSize}onDeviceDataChange(e){if("function"!=typeof e)throw new Error(`${this.#e}: onChange: Callback must be a function`);const t=this.getDeviceData();new Proxy(t,{set:(e,t,i)=>(e[t]=i,!0)}).onChange=e}getDeviceData(){const e=this.getUserAgent(),t=this.getViewport(),i=this.getScreenDimensions();return{breakPoints:Qt.breakPoints,viewportWidth:t.width,viewportHeight:t.height,userAgent:e.userAgent,isMobileDevice:e.isMobileDevice,isDesktopOS:e.isDesktopOS,isIosDevice:e.isIosDevice,systemInfo:e.systemInfo,devicePixelRatio:this.getPixelRatio(),screenWidth:i.width,screenHeight:i.height,computedScreenWidth:i.computedWidth,computedScreenHeight:i.computedHeight,currentBreakPoint:this.getCurrentBreakPoint(),currentOrientation:this.getCurrentOrientation(),rootSize:this.getRootSize()}}}class gn{#e;#h="Constructor name is unset";#m="Component name is unset";#o=!1;#p="debug=";#f="Identifier is unset";constructor(e={}){if(!on.isEmpty(e)){const t=e.flag??!1,i=e.origin??!1;(e.constructorName??!1)&&(this.#h=e.constructorName),i?(this.#m=e.origin,this.#p=`${this.#p}${this.#m}`):t&&(this.#p=`${this.#p}${t}`)}this.#e=`${this.constructor.name}`,this.#f=`### ${this.#m}: ${this.#h}`,this.checkForDebugMode()}getDebugMode=()=>this.#o;log=()=>{this.#o};warn=(e,t="")=>{this.#o&&console.warn(`${this.#f}: ${e}: `,t)};error=(e,t="")=>{this.#o&&console.error(`${this.#f}: ${e}: `,t)};checkForDebugMode(){const e=pn.getURL();this.#o=xt.findInArray(e.hashParams,this.#p).found,this.#o&&this.#p.includes(this.#m)&&console.log(`!!! ${this.#e} Debug flag detected in URL: `,this.#p,` Enabling debugging for ${this.#m}`)}}var yn={ArrayUtils:xt,CookieUtils:Vt,DebugUtils:gn,DeviceUtils:fn,DOMUtils:oi,EventUtils:li,FetchUtils:di,FormUtils:Zs,KeyboardUtils:sn,ObjectUtils:on,RegExUtils:hn,StringUtils:Ws,URLUtils:pn,VarUtils:ei};const{DeviceUtils:En}=yn,vn=new En;let bn,Sn,Cn,In,_n=10,Ln=Un().get("q");const Tn=navigator.userAgent.toLowerCase(),An=(/mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Tn),()=>"DEFAULT"===vn.getData().currentBreakPoint),On=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&An()&&document.querySelector(".cmp-search-results__pagination--next-button")&&!document.querySelector(".cmp-search-results__pagination--next-button").disabled&&(On.unobserve(e.target),document.querySelector(".cmp-search-results__pagination--next-button").click())}))}),{threshold:1});function wn(){return"publish"===Cn}function Pn(){if(bn)return bn}function Nn(){if(Sn)return Sn}function Rn(){return In+Pn()+"_"+Nn()}function Un(){return new URLSearchParams(window.location.search)}document.querySelector(".cmp-search")&&(bn=document.querySelector(".cmp-search").dataset.countryCode,Sn=document.querySelector(".cmp-search").dataset.languageCode,Cn=document.querySelector(".cmp-search").dataset.runMode,In=document.querySelector(".cmp-search").dataset.searchEndpoint,_n=document.querySelector(".cmp-search").dataset.paginationLimit);const kn=document.querySelector(".cmp-search-results__count--desktop-label"),Dn=kn?kn.dataset.text:"",Mn=document.querySelector(".cmp-search-results__count--mobile-label span");function Fn(e,t,i,s){const n=Ln!==t;const{URLUtils:o}=yn,{instance:r}=o.getInstance(),a=document.querySelector(".cmp-search-results__list"),l=a.dataset.upcomingLabel,c=a.dataset.pastLabel;s||(s="ALL"),s&&document.querySelectorAll(".cmp-search-results__filters--cta").forEach((e=>{e.dataset.filterType===s.toLowerCase()?(e.classList.add("selected"),e.setAttribute("aria-checked",!0),e.setAttribute("tabindex","0")):(e.classList.remove("selected"),e.setAttribute("aria-checked",!1),e.setAttribute("tabindex","-1"))}));let d,u=0;i&&i>1&&(u=parseInt(i-1+"1")),s&&"ALL"!==s&&(d=s);const h=Rn().includes("undefined")||Rn().includes("null")?"":Rn(),m=e?JSON.stringify({id:`search_${s.toLowerCase()}_template`,params:{from:u>_n?u-1:u,search_input:t}}):JSON.stringify({items_from:u>_n?u-1:u,demand:t,document_type:d}),p=o=>{let r=e?o.hits.total.value:o.results.total_count;if(function(e,t){if(kn.innerText="",Dn&&e>0){let i=_n;0!==t&&t||(t=1),i=t+(_n-1),i>e&&(i=e);let s=Dn.replace("{current_page}",t+" - "+i);s=s.replace("{total_results}",e),kn.innerText=s}Mn.innerText=e,Dn&&0==e&&(kn.innerText=document.querySelector(".cmp-search-results__count--mobile-label").innerText),Dn&&e<t&&(Mn.innerText=0,kn.innerText=document.querySelector(".cmp-search-results__count--mobile-label").innerText)}(r,u),document.getElementById("cmp-search-results__pagination").innerHTML="",function(e,t){let i=St.searchResult,s=e.dataset.resourceType||"",n=e.parentElement.closest('[id][class^="cmp-"]:not([id=""])').id||"";Ct({event:"cmp:searchResultshow",eventInfo:{path:`component.${i.path}`},component:{[i.path]:{"dc:title":`${i.title} load`,"@type":s,parentId:n,searchInfo:t}}})}(document.querySelector(".cmp-search-results"),{basicFilter:Dt("basicFilter",s??"all"),inputTerm:Mt("inputTerm"),pageCount:Dt("pageCount",i??1),searchPage:"site search",searchTerm:Dt("searchTerm",t),numResults:Dt("numResults",r),searchCount:Mt("searchCount")??1,searchMethod:Mt("searchMethod")??""}),0==r)return a.innerHTML="",document.getElementById("cmp-search-results__no-results").classList.add("active"),void document.getElementById("cmp-search-results__pagination").classList.remove("active");document.getElementById("cmp-search-results__no-results").classList.remove("active"),document.getElementById("cmp-search-results__pagination").classList.add("active"),An()&&!n||(a.innerHTML=""),function(e){Ln=e}(t);!function(e={}){const{infoArray:t,upcomingEventLabel:i,pastEventLabel:s,$resultListContainer:n,filter:o,totalItemsCount:r,pageNumber:a,MS_DISABLED:l}=e,c=l?"_source":"resource",d=l?"highlight":"feature";for(let e of t)"GENERIC"!==e[c].document_type&&"INSIGHT"!==e[c].document_type||qn(e,n,c,d),"EVENT"===e[c].document_type&&xn(e,n,i,s,c,d),"CONTACT"===e[c].document_type&&Vn(e,n,c),o&&document.querySelectorAll(".cmp-search-results__filters--cta").forEach((e=>{e.dataset.filterType===o.toLowerCase()?e.classList.add("selected"):e.classList.remove("selected")}));if(r>_n&&(function(e,t){(!t||t<=0)&&(t=1);let i=5,s=7;const n=Math.ceil(e/_n);n<i&&(i=n);let o,r;n<=i?(o=1,r=i):n==s?(o=1,r=s):t<=i?(o=1,r=i):t+2>=n?(o=n-i+1,r=n):(o=t-2,r=t);const a=document.getElementById("cmp-search-results__pagination"),l=a.dataset.labelPagePrefix,c=a.dataset.labelTotalPagePrefix,d=a.dataset.labelNextPagePrefix,u=a.dataset.labelPrevPagePrefix;let h="";h+=1==t?`<button class='cmp-search-results__pagination--previous-button'\n      aria-label="${u}"\n      disabled></button>`:`<button class='cmp-search-results__pagination--previous-button'\n      aria-label="${u}"></button>`;o>1&&(h+='<button class="cmp-search-results__pagination--number-button">1</button>',o>2&&(h+="<span>...</span>"));for(let e=o;e<=r;e++)h+=e==t?`<button class="active cmp-search-results__pagination--number-button"\n      aria-label="${l} ${e}"\n      aria-current="true">${e}</button>`:`<button class="cmp-search-results__pagination--number-button"\n      aria-label="${l} ${e}">${e}</button>`;r<n&&(r<n-1&&(h+="<span>...</span>"),h+=`<button class="cmp-search-results__pagination--number-button"\n    aria-label="${c} ${n}"\n    >${n}</button>`);h+=t==n?`<button class='cmp-search-results__pagination--next-button'\n      aria-label="${d}" disabled></button>`:`<button class='cmp-search-results__pagination--next-button'\n      aria-label="${d}" ></button>`;t<=n&&(a.classList.add("active"),a.innerHTML=h)}(r,a),An())){const e=document.querySelector(".cmp-search-results__list").lastChild;On.observe(e)}}({infoArray:e?o.hits.hits:o.results.results,upcomingEventLabel:l,pastEventLabel:c,$resultListContainer:a,filter:s,totalItemsCount:r,pageNumber:i,MS_DISABLED:e})};""!==h&&fetch(h,{body:m,method:"POST",headers:{"content-type":"application/json"}}).then((e=>{e.json().then((e=>{p(e)})).catch((e=>{console.log("CommonUtils: fetchResults: Error Occured During Parsing Data - "+e),Ao()}))})).catch((e=>{console.log("CommonUtils: fetchResults: Error Occured During ES Call - "+e),"local"===r?console.log("Using Mock Data"):Ao()}))}function qn(e,t,i,s){const n=e[s]&&e[s].title?e[s].title:e[i].title,o=e[s]&&e[s].description?e[s].description:e[i].description,r=document.createElement("li");r.classList.add("cmp-search-results__list-item");const a=document.createElement("div");a.classList.add("cmp-search-results__list-item--title");const l=document.createElement("a");l.classList.add("cmp-search-results__list-item--link"),l.href=e[i].qualified_url?e[i].qualified_url:"",l.innerHTML=n||"";const c=document.createElement("span");c.className="sr-only";const d=t.dataset.articlePostedMsg||"";c.appendChild(document.createTextNode(d));const u=document.createElement("div");u.appendChild(c),u.classList.add("cmp-search-results__list-item--datetime"),u.appendChild(document.createTextNode(e[i].formatted_article_date?e[i].formatted_article_date:e[i].formatted_filter_date?e[i].formatted_filter_date:""));const h=document.createElement("div");h.classList.add("cmp-search-results__list-item--description"),h.innerHTML=o||"",$n(h),a.appendChild(l),r.appendChild(a),r.appendChild(u),r.appendChild(h),t.appendChild(r);let m=t.querySelectorAll("li.cmp-search-results__list-item").length;l.addEventListener("click",(()=>qt(l.innerText,l.href,m,r,"article")))}function xn(e,t,i,s,n,o){const r=e[o]?.title||e[n].title,a=e[o]?.description||e[n].description,l=e[n].formatted_event_end_time||"",c=e[n].formatted_event_start_time||"",d=e[n].event_end_time||"",u=l||c||d,h=d?new Date(d):null,m=new Date,p=h?h-m:null,f=document.createElement("li");f.classList.add("cmp-search-results__list-item","cmp-search-results__event-list-item");const g=document.createElement("div"),y=document.createElement("div");y.classList.add("cmp-search-results__list-item--title");const E=document.createElement("a");if(E.classList.add("cmp-search-results__list-item--link"),E.href=e[n].qualified_url||"",E.innerHTML=r||"",y.appendChild(E),g.appendChild(y),u){const o=document.createElement("div");o.classList.add("cmp-search-results__list-item-event-status"),o.textContent=p>0?i:s,g.insertBefore(o,y);const r=document.createElement("div");r.classList.add("cmp-search-results__list-item--datetime");const a=document.createElement("span");a.textContent=e[n].event_type||"";const d=document.createElement("i");d.className="material-icons-filled",d.innerHTML="noise_control_off",d.ariaHidden=!0;const u=document.createElement("span");u.className="sr-only",u.innerHTML=".";const h=document.createElement("span");h.textContent=c&&l?`${c} - ${l}`:c||l,r.appendChild(a),r.appendChild(u),r.appendChild(d),r.appendChild(h),g.appendChild(r);const m=t.querySelectorAll("li.cmp-search-results__list-item").length+1;E.addEventListener("click",(()=>qt(E.innerText,E.href,m,f,"events")))}const v=document.createElement("div");if(v.classList.add("cmp-search-results__list-item--description"),v.innerHTML=a||"",$n(v),g.appendChild(v),f.appendChild(g),e[n].image_url){const t=document.createElement("div");t.classList.add("cmp-search-results__event-list-item--image-container");const i=document.createElement("img");i.classList.add("cmp-search-results__event-list-item--image"),i.src=e[n].image_url+":cq5dam-web-1120-684?wid=164&hei=123",i.alt=e[n].image_alt_text||"",i.loading="lazy",t.appendChild(i),f.appendChild(t)}t.appendChild(f)}function Vn(e,t,i){const s=document.createElement("li"),n="true"===t.dataset.hideContactActions;s.classList.add("cmp-search-results__list-item","cmp-search-results__contact-list-item");let o=t.querySelectorAll("li.cmp-search-results__list-item").length+1;const r=document.createElement("div"),a=document.createElement("a");a.classList.add("cmp-search-results__list-item--image-link"),a.href=e[i].qualified_url;const l=document.createElement("img");l.src=e[i].image_url+":cq5dam-web-320-320?wid=80&hei=80",l.classList.add("cmp-search-results__contact-list-item--image"),l.alt=e[i].image_alt_text,l.loading="lazy",a.appendChild(l),r.appendChild(a);const c=document.createElement("div"),d=document.createElement("div");d.classList.add("cmp-search-results__list-item--title");const u=document.createElement("a");u.classList.add("cmp-search-results__list-item--link"),u.href=e[i].qualified_url?e[i].qualified_url:"",u.innerHTML=(e[i].contact_salutation?e[i].contact_salutation+".":"")+" "+(e[i].contact_first_name?e[i].contact_first_name:"")+" "+(e[i].contact_last_name?e[i].contact_last_name:""),d.appendChild(u),c.appendChild(d);const h=document.createElement("div");h.classList.add("cmp-search-results__list-item--jobtitle");let m=0;if(e[i].contact_job_title){m++;const t=document.createElement("span");t.textContent=e[i].contact_job_title,h.appendChild(t)}if(e[i].contact_country){if(m){const e=document.createElement("i");e.className="material-icons-filled",e.innerHTML="noise_control_off",e.ariaHidden=!0;const t=document.createElement("span");t.className="sr-only",t.innerHTML=".",h.appendChild(e),h.appendChild(t)}const t=document.createElement("span");t.textContent=e[i].contact_country?e[i].contact_country:"",h.appendChild(t)}if(c.appendChild(h),!n){const t=document.createElement("ul");if(t.classList.add("cmp-search-results__list-item--icons-container"),e[i].has_email_address){const n=document.createElement("li");n.classList.add("cmp-search-results__list-item--icon");const r=document.createElement("a");r.classList.add("material-icon","material-icon-email"),r.href="#",r.setAttribute("role","button"),r.setAttribute("onclick","event.preventDefault()"),r.setAttribute("aria-label","Mail"),r.textContent="email";let a=e[i];r.setAttribute("data-first-name",a.contact_first_name),r.setAttribute("data-last-name",a.contact_last_name),r.setAttribute("data-contact-path",a.qualified_url),r.setAttribute("triggers-dialog-modal",!0),n.appendChild(r),t.appendChild(n),r.addEventListener("click",(()=>qt(u.innerText,r.href,o,s,"contact","email")))}if(e[i].contact_telephone_number){const n=document.createElement("li");n.classList.add("cmp-search-results__list-item--icon");const r=document.createElement("a");r.classList.add("material-icon","material-icon-phone"),r.href="tel:"+e[i].contact_telephone_number,r.setAttribute("aria-label","Call"),r.textContent="call",n.appendChild(r),t.appendChild(n),r.addEventListener("click",(()=>qt(u.innerText,r.href,o,s,"contact","phone")))}const{DOMUtils:n}=yn,{social_links:r}=e[i];if(r){Array.from(r).forEach((e=>{try{const i=new URL(e),{hostname:r}=i,a=r.includes("linkedin"),l=r.includes("facebook"),c=r.includes("twitter")||r.includes("www.x.com")||r.includes("x.com"),d=r.includes("instagram"),h=a?"linkedin":l?"facebook":c?"twitter":d?"instagram":"",m=n.createElement("li",{class:"cmp-search-results__list-item--icon"}),p=n.createElement("a",{class:"linkedin"===h?`icon-${h}-square`:`icon-${h}`,href:e,"aria-label":h});m.appendChild(p),p.addEventListener("click",(()=>qt(u.innerText,e,o,s,"contact",h))),t.appendChild(m)}catch(e){console.log("error in url link",e)}}))}c.appendChild(t)}const p=document.createElement("div");p.classList.add("cmp-search-results__list-item--description"),p.innerHTML=e[i].contact_bio?e[i].contact_bio.replace(/h\d\>/gim,"p>"):"",$n(p),c.appendChild(p),s.appendChild(r),s.appendChild(c),a.addEventListener("click",(()=>qt(u.innerText,a.href,o,s,"contact","image"))),u.addEventListener("click",(()=>qt(u.innerText,u.href,o,s,"contact","title"))),t.appendChild(s)}function $n(e){setTimeout((()=>{const t=getComputedStyle(e),i=t.getPropertyValue("line-height"),s=t.getPropertyValue("-webkit-line-clamp");e.style.maxHeight=`calc(${i} * ${s})`}),100)}const Bn=function(){function t(t){const i=[],s={};for(let e=0;e<t.elements.length;e++){const i=t.elements[e];"submit"!==i.type&&"button"!==i.type&&"reset"!==i.type&&(s[i.name]=i.value)}function n(t,s){i.forEach((i=>{const n=i.elementNames;if(0===n.length)i.callback(t);else{n.filter(e=Object.prototype.hasOwnProperty.call(s,e)).length>0?i.callback(t):i.callback(!1)}}))}function o(){const e={},i=t.elements;for(let t=0;t<i.length;t++){const s=i[t];"submit"!==s.type&&"button"!==s.type&&"reset"!==s.type&&(e[s.name]=s.value)}var o,r;n((o=s,r=e,!(JSON.stringify(o)===JSON.stringify(r))),e)}const r=t.elements;for(let e=0;e<r.length;e++){const t=r[e];"submit"!==t.type&&"button"!==t.type&&"reset"!==t.type&&"INPUT"!=t.tagName?t.addEventListener("change",o):"INPUT"==t.tagName&&t.addEventListener("input",a())}function a(){let e;return()=>{e&&clearTimeout(e),e=setTimeout(o,200)}}return t.addEventListener("reset",(()=>{setTimeout((()=>n(!1,{})))})),{addChangeListener:function(e,t=[]){i.push({callback:e,elementNames:t})}}}let i=function(){let e=[],t=[];return{put:function(i,s){let n=e.indexOf(i);-1==n?(e.push(i),t.push(s)):t[n]=s},get:function(i){return t[e.indexOf(i)]}}}();function s(e){let s=i.get(e);return s||(s=t(e),i.put(e,s)),s}return{Watch:s,getInstance:s}}();function Gn(e){let t=document.createElement("div");return t.innerText=e,t.innerHTML}const Hn=/\$FIRST_NAME/gim,jn=/\$LAST_NAME/gim;class Kn{static updateWithName(e,t,i,s){for(s||(s=e.innerHTML),s=(s=s.replace(Hn,t||"")).replace(jn,i||"");e.firstChild;)e.removeChild(e.lastChild);return e.appendChild(document.createTextNode(s)),s}}function zn(e,t=0){t?setTimeout((()=>{window.location=e}),t):window.location=e}function Wn(e){let t=e.querySelectorAll('.cmp-form-ppc-privacy input[type="checkbox"][required],.cmp-form-privacy input[type="checkbox"][required]'),i=e=>{const t=e.target;e.preventDefault(),t.checked?(t.classList.remove("invalid"),s(t)):t.required&&(t.classList.add("invalid"),function(e){const t=e.parentElement.querySelector(".err-msg");if(!t)return;const i=e.dataset.cmpRequiredMessage,s=t.querySelector("span.msg");for(;s.firstChild;)s.removeChild(s.lastChild);s.appendChild(document.createTextNode(i)),t.classList.add("show"),t.setAttribute("aria-hidden",!1),e.setAttribute("aria-invalid",!0),e.setAttribute("aria-label",i),e.setCustomValidity(i)}(t))};function s(e){const t=e.parentElement.querySelector(".err-msg.show");t&&(t.setAttribute("aria-hidden",!0),t.classList.remove("show"),e.removeAttribute("aria-label"),e.removeAttribute("aria-invalid"),e.setCustomValidity(""))}t.forEach((e=>{e.required&&(e.addEventListener("invalid",i),e.addEventListener("change",(e=>{i(e)})))})),e.addEventListener("reset",(()=>t.forEach((e=>{e.classList.remove("invalid"),s(e)}))))}function Yn(e){let t=e.querySelectorAll('.options input[required][type="radio"][name]:not([disabled])');t.forEach((t=>{let i=e.querySelectorAll('.options input[required][type="radio"][name="'+t.name+'"]:not([custom-validity-handled]):not([disabled])');i.forEach((e=>{e.addEventListener("invalid",(e=>{e.preventDefault();let t=!1;e.target.closest("fieldset").querySelectorAll(`[name='${e.target.name}']`).forEach((i=>{i.checked&&(t=!0,e.target.setCustomValidity(""))})),t||(e.target.setCustomValidity(" "),e.target.closest("fieldset").querySelectorAll(`[name='${e.target.name}']`).forEach((e=>{e.classList.add("invalid")})))})),e.addEventListener("change",(e=>{i.forEach((e=>{e.classList.remove("invalid"),e.setCustomValidity("")}))})),e.setAttribute("custom-validity-handled",!0)}))})),e.addEventListener("reset",(()=>t.forEach((e=>{e.classList.remove("invalid"),e.setCustomValidity("")}))))}function Jn(e){const t=e.dataset.mapping??!1;if(!t)return{};const i=t.slice(1,-1).split(", "),s={};return i.forEach((e=>{const[t,i]=e.split("=");s[t]=i})),s}function Xn(e){e&&"SELECT"===e.tagName&&fetch("/akamai/geo-tracker.html",{method:"post"}).then((t=>{let i=t.headers.get("countrycode");if("string"!=typeof i)return;i=i.replace(/\s/gim,""),i.lastIndexOf(",")>-1&&(i=i.split(",").pop());let s=!1,n=-1;i=i.toLowerCase();for(let t=0;t<e.options.length;t++){const o=e.options[t];if(o.selected&&(s=!0),o.value.toLowerCase()==i){n=t;break}}if(n>-1){e.selectedIndex=n;let t=e.options[e.selectedIndex];t&&(t.dataset.autoSelected=!0)}}))}function Qn(e){e.addEventListener("form-submit-success",(()=>so(e,!0))),e.addEventListener("form-submit-error",(()=>so(e,!0))),e.addEventListener("form-continue-error",(()=>no(e,!0))),"peopleContact"==e.dataset.formType&&e.addEventListener("form-submit-success",(()=>e.reset()))}function Zn(e){e.addEventListener("focus-invalid-elements",(t=>{let i=e.querySelectorAll(":invalid:not(fieldset),select.invalid:not(fieldset),textarea.invalid");if(t.detail&&t.detail.fields&&t.detail.fields.length){let e=t.detail.fields;i=Array.prototype.filter.call(i,(t=>e.indexOf(t.name)>-1))}i.length&&i[0].focus()}))}class eo{static Show(e,t,i){if(e&&(e.classList.add("invalid"),e.setAttribute("aria-invalid",!0),e.setAttribute("aria-label",t),e.setCustomValidity(t)),!i)return;let s=i.querySelector(".err-msg");if(!s)return;const n=s.querySelector("span.msg");for(;n.firstChild;)n.removeChild(n.lastChild);n.appendChild(document.createTextNode(t)),s.classList.add("show"),s.setAttribute("aria-hidden",!1)}static Hide(e,t){if(e&&(e.classList.remove("invalid"),e.removeAttribute("aria-invalid"),e.removeAttribute("aria-label"),e.setCustomValidity("")),!t)return;let i=t.querySelector(".err-msg");i&&(i.setAttribute("aria-hidden",!0),i.classList.remove("show"))}}function to(e){const t=Jn(e);let i,s,n=e.parentElement.querySelector(".form-result-container");try{i=Gn(e[t.first_name].value),s=Gn(e[t.last_name].value)}catch{}n.querySelectorAll(".cmp-title__text").forEach((e=>{Kn.updateWithName(e,i,s)})),e.classList.add("hide"),n.classList.add("show"),window.scroll({top:0,left:0,behavior:"smooth"})}function io(e,t){let i;document.querySelector("body").classList.remove("loading"),i="string"==typeof t&&t.includes("File Upload error")?e.querySelector(".fileupload #file-upload-container"):e.querySelector('.cmp-form-button[type="button"]')??e.querySelector('.cmp-form-button[type="submit"]'),function(e){Co&&(!function(e){let t=St[e];t&&Ct({event:"cmp:show",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form_system error_popup`,formInfo:{formError:"|system"}}}})}(Co._form_type),Co.showModal(e),Co.ui.closeBtn.focus())}(i)}function so(e,t){let i=e.querySelector('[type="SUBMIT"]');i&&(i.disabled=!t)}function no(e,t){let i=e.querySelector('.cmp-form-button[type="BUTTON"]');i&&(i.disabled=!t)}function oo(e,t="polite"){const i=document.createElement("output");return i.className="sr-only",i.ariaLive=t,e.appendChild(i),{Update:e=>i.innerHTML=e,Element:i}}const ro=[".cmp-form-text input[type=text]",".cmp-form-text textarea",".cmp-form-options select",".cmp-form-options input[type=radio]",".privacy input[type=checkbox]"].join(",");let ao,lo;const co=(e,t)=>e.querySelector(t),uo=e=>document.createElement(e);class ho{static InstanceId=0;constructor(e){this.rootSelectorId=e,this.lockScroll=!0,this.ui={closeBtn:null,root:null},this.ui.root=this._initModal(this.rootSelector),this.currentActivator=null,this._attachEvents(),this._noScrollClassName="no-scroll-"+ ++ho.InstanceId}on(e,t){this.ui.root.addEventListener("custom-event-"+e,t)}off(e,t){t?this.ui.root.removeEventListener("custom-event-"+e,t):this.ui.root.removeEventListener("custom-event-"+e)}_initModal(){let e=co(document.body,"#"+this.rootSelectorId);return e||(e=this._newModalUI(this.rootSelectorId),document.body.appendChild(e)),e}_newModalUI(e){let t=uo("div"),i=uo("div");return t.className="people-contact-modal",t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","true"),t.setAttribute("role","dialog"),t.setAttribute("id",e),i.className="people-contact-modal__content",this.ui.closeBtn=this._newCloseButtonUI(i),t.appendChild(i),t}showModal(e){this.prepareContent(...arguments),this.currentActivator=e,this.lockScroll&&document.body.classList.add(this._noScrollClassName),this.ui.root.classList.add("show"),this.ui.root.setAttribute("aria-hidden","false"),this.addCloseHandlers(),this.ui.root.dispatchEvent(new CustomEvent("custom-event-modal-opened"))}hideModal(e){this.ui.root.classList.remove("show"),this.ui.root.setAttribute("aria-hidden","true"),document.body.classList.remove(this._noScrollClassName),this.currentActivator&&this.currentActivator.focus&&this.currentActivator.focus(),this.removeCloseHandlers(),this.ui.root.dispatchEvent(new CustomEvent("custom-event-modal-closed",{detail:e}))}prepareContent(){return!0}setLabelledby(e){this.ui.root.setAttribute("aria-labelledby",e)}_newCloseButtonUI(e){let t=uo("div"),i=uo("button");return i.className="close-btn close-btn-top",t.className="top-section",t.appendChild(i),i.setAttribute("aria-label","Close"),i.setAttribute("title","Close"),e.appendChild(t),i}_attachEvents(){this._escKeyDown=this._escKeyDown.bind(this),this._closeBtnClick=this._closeBtnClick.bind(this)}removeCloseHandlers(){document.removeEventListener("keydown",this._escKeyDown),this.ui.closeBtn.removeEventListener("click",this._closeBtnClick)}_closeBtnClick(){this.hideModal()}addCloseHandlers(){document.addEventListener("keydown",this._escKeyDown),this.ui.closeBtn.addEventListener("click",this._closeBtnClick)}_escKeyDown(e){e.altKey||e.ctrlKey||e.shiftKey||"Escape"!=e.key||this.hideModal()}}class mo extends ho{constructor(e){super(e),this.currentXFPath="",this.ui.formContainer=null,this._createInitialHTML(),this.onTabCloseButton(),this.ValueChangedChecker=function(){return!1},this.isValueChanged=!1}_attachLinkClick(e){e.querySelectorAll('a[href]:not([href^="#"]):not([href=""]):not([href^="mailto:"]):not([href^="tel:"]):not([href^="javascript:"]):not([target="_blank"])').forEach((e=>e.addEventListener("click",(t=>{this._onLikClick(t,e)}))))}_createInitialHTML(){let e=this.ui.root.querySelector(".people-contact-modal__content"),t=uo("div");t.className="contact-form-container",e.appendChild(t),this.ui.formContainer=t}showModal(e){this.prepareContent(...arguments),this.currentActivator=e}_setTitleMessage(e,t,i,s){e&&t&&Kn.updateWithName(e,i,s,t)}_setFormValues(e){let t=co(this.ui.formContainer,"form");if(!t)return;let i=t[Jn(t).country];i&&"SELECT"===i.tagName&&Xn(i),this._setTitleMessage(co(t,".title h1,.title h2,.title h3,.title h4,.title h5,.title h6"),e.title,e.firstName,e.lastName);let s=co(t,'input[name="contactPath"][type="hidden"]');s||(s=uo("input"),s.name="contactPath",s.type="hidden",s.required=!0,t.appendChild(s)),s.value=e.contactPath;let n=co(this.ui.root,".close-btn-top");if(n){let e=t.dataset.closeButtonTitle||"Close Dialog Modal";n.setAttribute("title",e),n.setAttribute("aria-label",e),n.style.display="inline-block"}if(e.contactCfPath){let i=co(t,'input[name="contactCfPath"][type="hidden"]');i||(i=uo("input"),i.name="contactCFPath",i.type="hidden",i.required=!0,t.appendChild(i)),i.value=e.contactCfPath}}_showInternal(){this.ui.root.classList.add("show"),this.ui.root.setAttribute("aria-hidden","false"),document.body.classList.add(this._noScrollClassName),this.ui.root.scrollTop=0,co(this.ui.root,ro).focus(),this.ui.root.dispatchEvent(new CustomEvent("custom-event-modal-opened"));let e=this.ui.formContainer.querySelector("form");this.addCloseHandlers(),e&&e.dispatchEvent(new CustomEvent("custom-event-form-closed"))}prepareContent(){let e=this.ui.formContainer,[,t]=arguments;if(e.querySelector(".cmp-digital-form"))return this._setFormValues(t),this._showInternal(),!0;e.appendChild(lo);let i=co(lo,".cmp-title__text");i&&i.setAttribute("id","cmp-title__text"),this._setFormValues(t),this.setLabelledby("cmp-title__text"),this.onTabSubmitButton(),this._attachLinkClick(lo),this.onTabThankYouMessage(),this._showInternal(),this.ValueChangedChecker=Bn.getInstance(e.querySelector("form")).addChangeListener((e=>this.isValueChanged=e))}onTabCloseButton(){let e=co(this.ui.root,".close-btn-top");e&&e.addEventListener("keydown",(e=>{if(e.shiftKey&&"Tab"==e.key){let t=this.ui.formContainer.querySelector('[type="submit"]'),i=this.ui.formContainer.querySelector(".form-result-container.show a");i?(i.focus&&i.focus(),e.preventDefault()):t&&(t.focus&&t.focus(),e.preventDefault())}}))}onTabSubmitButton(){this.ui.formContainer.querySelector('[type="submit"]').addEventListener("keydown",(e=>{e.shiftKey||"Tab"!=e.key||(co(this.ui.root,".close-btn-top").focus(),e.preventDefault())}))}onTabThankYouMessage(){let e=co(this.ui.formContainer,".close-btn-bottom");if(!e)return;e.addEventListener("click",(e=>{e.preventDefault(),this.hideModal()}));let t=co(this.ui.formContainer,"form");t&&t.addEventListener("form-submit-success",(()=>{co(this.ui.root,".close-btn-top").style.display="none",e.removeEventListener("keydown",this._handleBottomCloseBtnKeyDown),e.addEventListener("keydown",this._handleBottomCloseBtnKeyDown)}))}_handleBottomCloseBtnKeyDown(e){"Tab"==e.key&&e.preventDefault()}_hideModalInternal(e){this.ui.root.classList.remove("show"),this.ui.root.setAttribute("aria-hidden","true"),document.body.classList.remove(this._noScrollClassName),this.currentActivator&&this.currentActivator.focus&&this.currentActivator.focus(),this.removeCloseHandlers(),this.ui.root.dispatchEvent(new CustomEvent("custom-event-modal-closed",{detail:e}))}hideModal(e){this.isValueChanged?this._showConfirmationDilog(this.ui.closeBtn,!0,(t=>{"yes"==t.detail.target.value&&this._hideModalInternal(e)})):this._hideModalInternal("")}_showConfirmationDilog(e,t,i){let s=co(this.ui.formContainer,"form");s&&Pt(s.dataset.formType),function(e,t,i){if(!bo)return void(i&&i());So=i,bo.dialog.off("dialog-closed",Lo),bo.dialog.on("dialog-closed",Lo),bo.dialog.open({focusBackToElement:e})}(e,0,i)}_onLikClick(e,t){if(this.isValueChanged)return e&&e.preventDefault&&e.preventDefault(),void this._showConfirmationDilog(t,!0,(e=>{"yes"==e.detail.target.value&&(this.isValueChanged=!1,t.click&&t.click())}));this._hideModalInternal("")}}const po={contact:""};function fo(e){let t=e.target.querySelector(".cmp-digital-form");t&&(t.dispatchEvent(new CustomEvent("custom-event-form-start")),_t(t,t.dataset.formType||"peopleContact",po))}function go(e){po.contact="";const{firstName:t,lastName:i,contactPath:s=window.location,contactCfPath:n}=this.dataset;if(!lo)return;e.preventDefault();let o=co(lo,"form"),r=o?o.dataset.formTitle:"";var a,l;po.contact=`${t} ${i}`,a=this,l={firstName:t,lastName:i,contactPath:s,title:r,contactCfPath:n},ao.showModal(a,l)}function yo(e){let t=e.target,i=t.querySelector(".cmp-digital-form");i&&i.reset();let s=t.querySelector(".form-result-container");i.classList.remove("hide"),s&&s.classList.remove("show"),Ct({event:"cmp:formClose",eventInfo:{path:"component.people-contact-form-"},component:{"people-contact-form-":{"dc:title":"people contact form"}}})}wn()&&yt((function(e){let t=e.element.querySelector("[triggers-dialog-modal]");if(t){if(!ao){ao=new mo("people-contact-modal-root");let e=co(document,"[data-people-contact-form-url]").getAttribute("data-people-contact-form-url")||"";e&&async function(e){fetch(e).then((e=>{e.text().then((e=>{let t=uo("div");t.innerHTML=e;let i=document.createDocumentFragment();i.append(t),lo=i.querySelector(".cmp-container>.aem-Grid")}))}))}(e),ao.on("modal-closed",yo),ao.on("modal-opened",fo)}t.setAttribute("aria-haspopup","dialog"),t.setAttribute("role","button"),t.addEventListener("click",go)}}),{selectors:{self:".cmp-contact-card,ul.cmp-search-results__list-item--icons-container"}});var Eo=class{get dialog(){return this.#g?._Handler}#y;#g;#E="";#v=!1;#b=!1;#S=null;constructor(e){this.#y=e,this.#E=e.dataset.formType,this.#g=e.parentElement.querySelector(".cmp-digital-form__warning-dialog"),this.dialog&&this.init()}init(){this.#C(),this.#I(),this.#_()}#C(){const e=this.dialog?.UI.CONTENT_ROOT.querySelector("h1,h2,h3,h4,h5,h6,p");e&&(e.id||(e.id=`msg-overlay-desc-id-${this.#y.id}`),this.dialog.setLabelledby(`${e.id}`));const[t,,i]=this.dialog.UI.CLOSE_BUTTON;this.dialog.firstElement=t,this.dialog.lastElement=i}#I(){Bn.getInstance(this.#y).addChangeListener((e=>{this.#b=e})),this.#y.addEventListener("custom-event-form-start",(()=>{this.#v=!0})),this.#y.addEventListener("custom-event-form-closed",(()=>{this.#v=!1})),this.#y.addEventListener("form-submit-success",(()=>{this.#v=!1})),this.#y.addEventListener("reset",(()=>{this.#v=this.#b=!1})),this.dialog.on("dialog-opened",this.#L.bind(this)),this.dialog.on("dialog-closed",this.#T.bind(this))}#L(){Pt(this.#E);const[,,e]=this.dialog.UI.CLOSE_BUTTON;e?.focus?.()}#T(e){const t=this.#A(e);if(console.assert("no"==t||"yes"==t),"yes"===t)return Nt(this.#E,"continue"),this.#v=this.#b=!1,void(this.#S&&this.#S.click&&setTimeout((()=>this.#S.click())));this.#S=null,Nt(this.#E,"cancel")}#_(){document.querySelectorAll('a[href]:not([href^="#"]):not([href=""]):not([href^="mailto:"]):not([href^="tel:"]):not([href^="javascript:"]):not([target="_blank"])').forEach((e=>e.addEventListener("click",(t=>this.#O(t,e)))))}#O(e,t){this.#S=t,this.#v&&this.#b&&(e.preventDefault(),e?.stopPropagation?.(),this.dialog.open({focusBackToElement:t}))}#A(e){return e.detail?.target?.value||"no"}};class vo extends ho{constructor(){super("cmn-msg-overlay-"+ ++vo.InstanceId),this.ui.root.classList.add("cmn-msg-overlay")}_newCloseButtonUI(e){let t=document.createElement("div"),i=document.createElement("button"),s=document.createElement("button");return i.className="btn btn-cancel",i.append("Cancel"),t.appendChild(i),s.className="btn btn-continue",s.append("Continue"),t.appendChild(s),t.className="section buttons",e.appendChild(t),this._buttons||(this._buttons={cancel:null,continue:null}),this._buttons.continue=s,this._buttons.cancel=i,this._onTabConfirmationButtons(),i}_onTabConfirmationButtons(){this._buttons.cancel.addEventListener("keydown",(e=>{"Tab"==e.key&&(this._buttons.continue.focus(),e.preventDefault())})),this._buttons.continue.addEventListener("keydown",(e=>{"Tab"==e.key&&(this._buttons.cancel.focus(),e.preventDefault())}))}setButtonText(e="Cancel",t="Continue"){let i=this._buttons.cancel;for(;i.firstChild;)i.removeChild(i.lastChild);for(i.appendChild(document.createTextNode(e)),i=this._buttons.continue;i.firstChild;)i.removeChild(i.lastChild);i.appendChild(document.createTextNode(t))}AddContent(e){let t=this.ui.root.querySelector(".people-contact-modal__content"),i=this.ui.root.querySelector(".section.buttons");t&&t.insertBefore(e,i)}}let bo,So,Co,Io;function _o(e){return function(e){let t=e.querySelector(".submit-error-message .text-msg");if(!t)return;let i=e.querySelector(".submit-error-message .text-msg .text");if(!i)return;let s=Co=new To;s._form_type=e.dataset.formType,s.AddContent(t);let n=i.querySelector("h1,h2,h3,h4,h5,h6");n&&(n.id||(n.id=`err-msg-overlay-heading-${e.id}`),s.setLabelledby(`${n.id}`));s.setButtonText(i.dataset.buttonTextClose),s.on("modal-closed",(()=>function(e){let t=St[e];t&&Ct({event:"cmp:click",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form_system error_close`}}})}(e.dataset.formType)))}(e),bo=new Eo(e)}function Lo(e){if(So){let t=So;So=null,t(e)}}class To extends ho{constructor(e){super("err-msg-overlay-"+ ++To.InstanceId),this.ui.root.classList.add("cmn-msg-overlay","err-msg-overlay"),e&&this.ui.root.classList.add(e)}_newCloseButtonUI(e){let t=document.createElement("div"),i=document.createElement("button");return i.className="btn btn-close",i.append("Close"),t.appendChild(i),t.className="section buttons",e.appendChild(t),this._closeBtn=i,this._onTabCloseButton(i),i}_onTabCloseButton(e){e.addEventListener("keydown",(t=>{"Tab"==t.key&&(t.preventDefault(),e.focus())}))}setButtonText(e){for(;this._closeBtn.firstChild;)this._closeBtn.removeChild(this._closeBtn.lastChild);this._closeBtn.appendChild(document.createTextNode(e))}AddContent(){return vo.prototype.AddContent.apply(this,arguments)}}function Ao(e){Io&&Io.showModal(e)}yt((function(e){const t=e.element;let i=t.querySelector("#eventCardDate");const s=i.textContent.split(".").join("");i.textContent=s;let n=t.querySelector("#eventCardMonth");const o=n.textContent.split(".").join("");n.textContent=o;let r=t.querySelector("#heroEventTime");if(null!=r){r.textContent=r.textContent.toUpperCase().split(".").join("");const e=e=>"0"===e.charAt(0)?e.slice(1):e,t=r.textContent.match(/\S+/g).map(e).join(" ");r.textContent=t}}),{selectors:{self:".event-card"}});const Oo=async(e,t)=>{let i;try{return i=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json"}}),i=i.status>=200&&i.status<=299?await i.json():[],i}catch(e){console.log("Api failed-",e)}};function wo(e){return Array.from(e.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter((e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity}))}function Po(e){let t=document.createElement("div");return t.style.height=0,t.setAttribute("tabindex","0"),t.classList.add(e),t}function No(){return`accessibility-key-${Date.now()}`}function Ro(e){if(e.firstChild&&e.firstChild.className&&e.firstChild.className.includes("accessibility-key-"))return;let t=wo(e),i=t[0],s=No(),n=t[t.length-1],o=No();const r=function(e,t){let i=Po(t);return e.insertBefore(i,e.firstChild),i}(e,s),a=function(e,t){let i=Po(t);return e.appendChild(i),i}(e,o);r.addEventListener("focus",(function(){n.focus()})),a.addEventListener("focus",(function(){i.focus()}))}function Uo(e,t){for(let i in t)e.forEach((e=>{e.setAttribute(i,t[i])}))}function ko(e){const t=e.querySelectorAll(".cmp-carousel__item");t.forEach(((i,s)=>{const n=wo(i);n[n.length-1].addEventListener("keydown",(n=>{!function(e,t,i,s,n){const o=sn.getKeyID(t);if("TAB"===o&&t.shiftKey);else if("TAB"===o&&s.length-1>n){t.preventDefault();const o=e.querySelectorAll(".cmp-carousel__indicator");i.classList.remove("cmp-carousel__item--active"),s[n+1].classList.add("cmp-carousel__item--active"),o[n].classList.remove("cmp-carousel__indicator--active"),o[n+1].classList.add("cmp-carousel__indicator--active"),wo(s[n+1])[0].focus()}}(e,n,i,t,s)})),n[0].addEventListener("keydown",(n=>{!function(e,t,i,s,n){if("TAB"===sn.getKeyID(t)&&t.shiftKey&&0!=n){t.preventDefault();const o=e.querySelectorAll(".cmp-carousel__indicator");i.classList.remove("cmp-carousel__item--active"),s[n-1].classList.add("cmp-carousel__item--active"),o[n].classList.remove("cmp-carousel__indicator--active"),o[n-1].classList.add("cmp-carousel__indicator--active");const r=wo(s[n-1]);r[r.length-1].focus()}}(e,n,i,t,s)}))}))}class Do{constructor(e){this.filterAttributes=e}loadListFilterCheckboxData=async e=>{const{url:t,data:i,showSpinnerAndHideErrorMessage:s,hideSpinnerAndHideErrorMessage:n,filterCheckBoxCheckUnCheckAction:o,initilizeAccordion:r}=e;try{const e=document.getElementById("list_container");let a=this.filterAttributes.filterListParent.querySelector(".checkbox-error-message");a.classList.remove("active"),s();const l=await Oo(t,i);if(!l||0==l?.length)return n(),void a.classList.add("active");const c=await Oo(this.filterAttributes.listCardApiUrl,{id:"doctype_listing_filter_template",params:{document_type:"INSIGHT",...this.filterAttributes.listCardRequestData.params.exclude_press_release&&{exclude_press_release:this.filterAttributes.listCardRequestData.params.exclude_press_release}}}),d={};if(c&&c.aggregations){const e=c.aggregations;for(const t in e){const i=new Map,s=e[t].buckets.map((e=>({...e,path:e.key.split("/")}))).sort(((e,t)=>e.path.length-t.path.length)).filter((e=>!(2!==e.path.length&&!i.has(e.path[1]))&&(i.set(e.path[1],!0),!0)));s.forEach((e=>{let t=e.key.split("/");t[0]=t[0].charAt(0).toUpperCase()+t[0].slice(1),t.length>=2&&(d[t[0]]=d[t[0]]?d[t[0]]:{},d[t[0]][t[1]]=d[t[0]][t[1]]?[...d[t[0]][t[1]]]:[],t[2]&&(d[t[0]][t[1]]=[...d[t[0]][t[1]],t[2]]))}))}}const u=l.hits.total.value,h=l.hits?l.hits.hits:[],m={};if(h.forEach((e=>{const t=e._source.sl_locale_category;m[t]=m[t]?m[t]:{};let i=e._source.suggestion_identifier,s=e._source.suggestion_text,n=e._source.sl_level,o=e._source.sl_category;if(1===n)m[t][s]={...m[t][s],id:i,categoryType:o};else{let s=e._source.sl_hierarchy;s=s.split("/");const n=s[0],r=s[1];m[t][n]={...m[t][n],[r]:i,categoryType:o}}})),u>0&&0!==Object.entries(m).length){let t="",i="",s="",a=this.filterAttributes.filterlistItems?this.filterAttributes.filterlistItems:"";a&&(a=JSON.parse(this.filterAttributes.filterlistItems).reduce(((e,t)=>{const i=Object.keys(t)[0];return e[i]=t[i],e}),{})),Object.entries(m).forEach((([e,n])=>{const o="accordion-"+Math.random().toString(8).slice(2),r=Object.values(n)[0].categoryType;if(a[r]){const l=a[r].title?a[r].title:e,c=!!a[r].expand&&a[r].expand,u=`\n                <div data-category="${r}" class="cmp-filterlist__accordion--item ${c?"active":""}" role="presentation">\n                    <button class="cmp-filterlist__accordion--button" aria-controls="${o}" data-text="${l}" aria-expanded="${c?"true":"false"}">\n                        ${l} <span class="chevron material-icons-outlined" aria-hidden="true">${c?"expand_less":"expand_more"}</span>\n                    </button>\n                    <div class="cmp-filterlist__accordion--content" id="${o}" aria-hidden="${c?"false":"true"}">\n                        <ul class="filter-ul-set cmp-filterlist__nested-accordion">${this.createFilterCheckboxTree(l,n,d[e])}</ul>\n                    </div>\n                </div>`;switch(r){case"Industries":t+=u;break;case"Services":i+=u;break;case"Insights":s+=u}}}));const l={Industries:t,Services:i,Insights:s};a?Object.keys(a).forEach((t=>{l[t]&&e.insertAdjacentHTML("beforeend",l[t])})):Object.keys(l).forEach((t=>{e.insertAdjacentHTML("beforeend",l[t])})),this.filterAttributes.filterCheckBox=this.filterAttributes.filterOverlay.querySelectorAll("input[type='checkbox']"),o(),r(),n()}else n(),a.classList.add("active")}catch(e){console.log("loadListFilterCheckboxData error",e),n()}};createFilterCheckboxTree(e,t,i){let s=this.filterAttributes.filterListParent.getAttribute("data-all-text")?this.filterAttributes.filterListParent.getAttribute("data-all-text"):"All",n="",o="",r="";for(const a in t){if("id"===a||!i||!Object.keys(i).includes(a))continue;let l=t[a],c=`\n                <button class="cmp-filterlist__accordion--button" data-text="${e} > ${a}" aria-controls="${l.id}-1" aria-expanded="false"> ${a} <span class="filter-count"></span> <span\n                        class="chevron material-icons-outlined"\n                        aria-hidden="true"\n                        >expand_more</span\n                      ></button>\n            `;if(o=`<li class="child-li">\n        <input type="checkbox"\n            data-filter-parent="${l.categoryType}"\n            class="child-chkbox all-checkbox" name="${s}"\n            id="${l.id}" value="${l.id}">\n        <label for="${l.id}">${s}</label>\n    </li>`,Object.keys(l).length>1){r="";for(const e in l){if("id"===e||!i[a].includes(e))continue;const t=l[e];r+=`\n                        <li class="child-li">\n                                <input type="checkbox"\n                                    data-filter-parent="${l.categoryType}"\n                                    class="child-chkbox" name="${e}"\n                                    id="${t}" value="${t}">\n                                <label for="${t}">${e}</label>\n                        </li>\n                    `}}n+=`<li role="presentation" class="cmp-filterlist__accordion--item" data-parent-category="${e}" data-filter-parent="${l.categoryType}">${c}<div class="cmp-filterlist__accordion--content" id="${l.id}-1"><ul class="child-ul">${o} ${r}</ul></div></li>`}return n}filterCategorySetRequestData=()=>{let e=[...document.querySelector("#list_container").querySelectorAll("input[type='checkbox']:checked , .child-selected")].map((e=>({id:e.getAttribute("data-filter-parent"),value:e.value})));e=Array.from(new Set(e.map((e=>e.id)))).map((t=>({[t]:e.filter((e=>e.id===t)).map((e=>e.value))})));const t=[];for(let i=0;i<e.length;i++)t.push(Object.keys(e[i])[0]);let i="";if(0===t.length)i="listing_default_template";else if(1==t.length){i=`listing_${"Industries"===t[0]?"industry":"Insights"===t[0]?"insights":"services"}_aggregation_template`}else 2==t.length?t.includes("Insights")&&t.includes("Services")?i="listing_insight_service_aggr_template":t.includes("Insights")&&t.includes("Industries")?i="listing_insight_industry_aggr_template":t.includes("Services")&&t.includes("Industries")&&(i="listing_service_industry_aggr_template"):i="listing_multi_aggregation_template";const s={id:i,params:{from:this.filterAttributes.listCardRequestData.params.from,size:this.filterAttributes.listCardRequestData.params.size,document_type:this.filterAttributes.listCardRequestData.params.document_type,sort:this.filterAttributes.listCardRequestData.params.sort,...this.filterAttributes.listCardRequestData.params.exclude_press_release&&{exclude_press_release:this.filterAttributes.listCardRequestData.params.exclude_press_release}}};this.filterAttributes.listCardRequestData=s;for(let t=0;t<e.length;t++)"Industries"===Object.keys(e[t])[0]?this.filterAttributes.listCardRequestData.params.industry_ids=Object.values(e[t])[0]:"Services"===Object.keys(e[t])[0]?this.filterAttributes.listCardRequestData.params.service_ids=Object.values(e[t])[0]:"Insights"===Object.keys(e[t])[0]&&(this.filterAttributes.listCardRequestData.params.insight_ids=Object.values(e[t])[0])}}const{KeyboardUtils:Mo}=yn,Fo=e=>{const t=document.querySelector(".cmp-filterlist__accordion--item[data-category="+e+"]");if(!t)return"";if(!t.querySelectorAll("input[type='checkbox']:checked").length)return"";let i="";const s=t.querySelectorAll(".cmp-filterlist__nested-accordion .cmp-filterlist__accordion--item");return i=Array.from(s).map((e=>{const t=e.querySelectorAll("input[type='checkbox']:checked");if(!t.length)return"";var i;return`${e.getAttribute("data-parent-category")} > ${i=t,Array.from(i).map((e=>e.getAttribute("name"))).join(", ")}`})).filter((e=>e)).join(" | "),i},qo=(e,t,i,s,n,o)=>{const r=window.adobeDataLayer.find((e=>e.component&&e.component[o])),a=o.replace("filterlisting","filterresultlisting");e&&e.addEventListener("click",(e=>{vt("cmp:applyfilterclick","component."+a,{},{[a]:{"dc:title":i,"xdm:linkURL":t,"@type":r.component[o]["@type"],parentId:r.component[o].parentId,"repo:modifyDate":r.component[o]["repo:modifyDate"],filterInfo:{IndustriesFilter:Fo("Industries"),ServicesFilter:Fo("Services"),InsightsFilter:Fo("Insights"),numResults:s,pageCount:n,searchInstance:"result update",searchPage:"insights"}}})}))},xo="true"===document.querySelector(".cmp-search").dataset.msDisabled;yt((function(){const e=(()=>{const e=document.querySelectorAll("[data-filterlist]")[0],t=e.querySelector("[cmp-filterlist-error-message]"),i=e.querySelector("[data-filterlist-overlay]");let s=parseInt(e.getAttribute("data-list-size")),n=e.getAttribute("data-list-document-type"),o=e.getAttribute("data-country-code"),r=e.getAttribute("data-lang-code"),a=e.hasAttribute("data-hide-press-release"),l=e.getAttribute("data-list-url");l=`${l}${xo?"":"/"}${o}_${r}`;let c=e.getAttribute("data-filter-url");c=xo?`${c}${o}_${r}_suggestions`:`${c}/${o}_${r}`;const d=JSON.parse(e.getAttribute("data-filter-category"));return{filterListParent:e,filterListParentId:e.getAttribute("id"),totalCount:0,isCheckboxApiAlreadyLoaded:!1,loadMoreTrigger:!1,filterOpenButton:e.querySelectorAll("[data-filterlist-filter-toggle-button]"),filterSubmitButton:e.querySelector("[data-filterlist-submit-button]"),filterClearButton:e.querySelector("[data-filterlist-clear-button]"),filterCloseButton:e.querySelector("[data-filterlist-close-button]"),filterByCount:e.querySelector("[data-filterlist-checkbox-count]"),loadMoreBtn:e.querySelector("[data-filterlist-load-more-button]"),filterOverlay:i,errorMessageBox:t,serverErrorMessage:t.querySelector("[error-message-failure]"),filterlistItems:e.getAttribute("data-list-items"),noResultErrorMessage:t.querySelector("[error-message-noresult]"),spinner:e.querySelector("[cmp-filterlist-spinner]"),countBadgeHtml:e.querySelectorAll(".count-badge"),paginationContainer:e.querySelector("[data-filterlist-pagination]"),filterCheckBox:i.querySelectorAll("input[type='checkbox']"),listPaginationFrom:0,countryCode:e.getAttribute("data-country-code"),languageCode:e.getAttribute("data-lang-code"),pressRelease:e.hasAttribute("data-hide-press-release"),listDocType:n,listSize:s,filterCategoryValue:d,listCardContainer:e.querySelector("[cmp_filterlist_result_container]"),listCardApiUrl:l,filterCheckboxApiUrl:c,filterRequestData:xo?{id:"filter_default_template",params:{categories:d,levels:["1","2"]}}:{categories:d,levels:["1","2"]},listCardRequestData:xo?{id:"listing_default_template",params:{from:0,size:s,document_type:n,sort:"desc",...a&&{exclude_press_release:a}}}:{items_from:0,size:s,document_type:n,sort:"desc"},isSeriesEnabled:e.getAttribute("data-show-series"),isSubtitleEnabled:e.getAttribute("data-show-subtitle")}})();let t=null;xo&&(t=new Do(e));const i=t=>{e.filterByCount.closest(".cmp-filterlist__header .title").classList.add("active"),e.filterByCount.textContent=t;for(const i of e.countBadgeHtml)i.classList.add("active"),i.textContent=t},s=()=>{e.filterByCount.closest(".cmp-filterlist__header .title").classList.remove("active");for(const t of e.countBadgeHtml)t.classList.remove("active")},n=t=>{const i=window.adobeDataLayer.find((t=>t.component&&t.component[e.filterListParentId]));t.stopPropagation(),t.preventDefault(),e.filterOverlay.classList.contains("active")?(o(),vt("cmp:hide","component."+e.filterListParentId,{},{[e.filterListParentId]:{"dc:title":"Filter Listing - Filter Close","@type":i.component[e.filterListParentId]["@type"]}})):(r(),vt("cmp:show","component."+e.filterListParentId,{},{[e.filterListParentId]:{"dc:title":"Filter Listing - Filter Open","@type":i.component[e.filterListParentId]["@type"]}}))},o=()=>{document.documentElement.classList.remove("no-scroll","cmp-filterlist__bodypopup-active"),e.filterOverlay.classList.remove("visually-active"),setTimeout((function(){e.filterOverlay.classList.remove("active")}),900)},r=()=>{e.filterOverlay.classList.add("active"),document.documentElement.classList.add("no-scroll","cmp-filterlist__bodypopup-active"),setTimeout((function(){e.filterOverlay.classList.add("visually-active"),Ro(e.filterOverlay),e.filterCloseButton.focus()}),100)},a=()=>{e.spinner.classList.remove("active"),e.errorMessageBox.classList.remove("active"),e.paginationContainer.classList.add("active"),e.loadMoreBtn.classList.remove("hide"),e.listCardContainer.classList.remove("hide")},l=t=>{e.spinner.classList.remove("active"),e.errorMessageBox.classList.add("active"),e.paginationContainer.classList.remove("active"),e.loadMoreBtn.classList.add("hide"),e.listCardContainer.classList.add("hide"),t?(e.serverErrorMessage.classList.remove("hide"),e.noResultErrorMessage.classList.add("hide")):(e.serverErrorMessage.classList.add("hide"),e.noResultErrorMessage.classList.remove("hide"))},c=()=>{e.spinner.classList.add("active"),e.errorMessageBox.classList.remove("active"),e.paginationContainer.classList.remove("active"),e.loadMoreBtn.classList.add("hide"),e.listCardContainer.classList.add("hide")},d=()=>{e.listCardRequestData={...e.listCardRequestData,categories_set:{}};let t=[...document.querySelector("#list_container").querySelectorAll("input[type='checkbox']:checked")].map((e=>({id:e.getAttribute("data-filter-parent"),value:e.value})));t=Array.from(new Set(t.map((e=>e.id)))).map((e=>({[e]:t.filter((t=>t.id===e)).map((e=>e.value))}))),e.listCardRequestData.categories_set=void 0;for(let i=0;i<t.length;i++)e.listCardRequestData={...e.listCardRequestData,categories_set:{...e.listCardRequestData.categories_set,[Object.keys(t[i])[0]]:Object.values(t[i])[0]}}},u=()=>{e.filterCheckBox.forEach((e=>{e.addEventListener("change",(()=>(e=>{const t=e.classList.contains("all-checkbox"),i=e.closest(".child-ul"),s=i.querySelector(".all-checkbox"),n=i.querySelectorAll("input[type='checkbox']"),o=e.closest(".cmp-filterlist__accordion--item").querySelector(".filter-count");if(t)n.forEach((e=>{e.checked=s.checked,e.classList.remove("child-selected")}));else{let e=!0,t=!1;n.forEach((i=>{i!==s&&(i.checked?t=!0:e=!1)})),s.checked=e,t&&!e?s.classList.add("child-selected"):s.classList.remove("child-selected")}const r=i.querySelectorAll("input[type='checkbox']:checked");o.innerHTML=r.length?r.length:""})(e)))}))},h=async(i,s)=>{if(!document.querySelector("#list_container").querySelectorAll("input[type='checkbox']:checked").length)if(xo){const t={id:"listing_default_template",params:{from:e.listCardRequestData.params.from,size:e.listCardRequestData.params.size,document_type:e.listCardRequestData.params.document_type,sort:e.listCardRequestData.params.sort,...e.listCardRequestData.params.exclude_press_release&&{exclude_press_release:e.listCardRequestData.params.exclude_press_release}}};e.listCardRequestData=t,s=t}else s.categories_set=void 0;try{let n=!1;c();const o=await Oo(i,s);if(!o||0==o?.length)return l(!0),void(n=!0);const r=xo?o.hits.total.value:o.results.total_count,d=xo?o.hits.hits:o.results.results;let h=document.querySelector("[cmp_filterlist_card_template]"),g=e.filterListParent.querySelector("[cmp_filterlist_result_container]"),y=Math.ceil((xo?s.params.from:s.items_from)/e.listSize)+1;const E=window.adobeDataLayer.find((t=>t.component&&t.component[e.filterListParentId]));if(vt("cmp:applyfiltershow","component."+e.filterListParentId,{},{[e.filterListParentId]:{...E.component[e.filterListParentId],"dc:title":"filter result loaded",filterInfo:{IndustriesFilter:Fo("Industries"),ServicesFilter:Fo("Services"),InsightsFilter:Fo("Insights"),numResults:r,pageCount:y,searchInstance:"result update",searchPage:"insights"}}}),!(d&&Object.keys(d).length>0&&r>0))return console.log("No list card data to display"),g.innerHTML="",n=!0,void l(!1);{window.matchMedia("(max-width: 1024px)").matches&&!e.loadMoreTrigger||(g.innerHTML="");for(let t of d){const i=h.content.cloneNode(!0);let s=i.querySelector(".cmp-filterlist__tile--series-title"),n=i.querySelector(".cmp-filterlist__tile--title"),o=i.querySelector(".cmp-filterlist__tile--subtitle"),a=i.querySelector(".cmp-filterlist__tile--description"),l=i.querySelector(".cmp-filterlist__tile--action-link"),c=i.querySelector(".cmp-filterlist__tile--img-sm"),d=i.querySelector(".cmp-filterlist__tile--img-md"),u=i.querySelector(".cmp-filterlist__tile--img-xl"),m=i.querySelector(".cmp-filterlist__tile--img-actual");const p=xo?t._source:t.resource;n.textContent=p.title,a.textContent=p.description,l.setAttribute("href",p.qualified_url),"true"===e.isSeriesEnabled&&p.article_series_title&&(s.textContent=p.article_series_title,s.setAttribute("aria-label",p.article_series_title)),"true"===e.isSubtitleEnabled&&p.article_sub_title&&(o.textContent=p.article_sub_title,o.setAttribute("aria-label",p.article_sub_title)),qo(l,p.qualified_url,p.title,r,y,e.filterListParentId);let f=p.image_url?p.image_url.replace(/ /g,"%20"):"";u.setAttribute("srcset",p?.image_url&&`${f}:cq5dam-web-1120-684?wid=560&hei=342, ${f}:cq5dam-web-1120-684?wid=1120&hei=684 2x`),d.setAttribute("srcset",p?.image_url&&`${f}:cq5dam-web-1120-684?wid=560&hei=342, ${f}:cq5dam-web-1120-684?wid=1120&hei=684 2x`),c.setAttribute("srcset",p?.image_url&&`${f}:cq5dam-web-1120-684?wid=304&hei=171, ${f}:cq5dam-web-1120-684?wid=608&hei=342 2x`),m.setAttribute("src",`${f}:cq5dam-web-1120-684?wid=304&hei=171`),m.setAttribute("alt",p.image_alt_text||p.title),g.appendChild(i)}const t=Math.ceil(r/(xo?s.params.size:s.size));e.totalCount=t;const i=3;let n=Math.max(y-Math.floor(i/2),1),o=Math.min(n+i-1,t);o-n+1<i&&(n=Math.max(o-i+1,1)),document.querySelectorAll("[data-filterlist-pagination] ul li.items").forEach((e=>{e.remove()})),document.querySelector(".cmp-filterlist__pagination--numbers").innerHTML="",n>1&&(p(1,y),n>2&&p("...",y));for(let e=n;e<=o;e++)p(e,y);o<t&&(o<t-1&&p("...",y),p(t,y));const l=e.paginationContainer.querySelector(".cmp-filterlist__pagination--next"),c=e.paginationContainer.querySelector(".cmp-filterlist__pagination--prev");1===y||1===y?(c.classList.add("disabled"),c.setAttribute("disabled","true")):(c.classList.remove("disabled"),c.removeAttribute("disabled")),y===o?(e.loadMoreBtn.classList.add("disabled"),l.classList.add("disabled"),l.setAttribute("disabled","true")):(e.loadMoreBtn.classList.remove("disabled"),l.classList.remove("disabled"),l.removeAttribute("disabled")),e.loadMoreBtn.setAttribute("data-next-page",Math.ceil(y)),a()}e.isCheckboxApiAlreadyLoaded||n||(xo?t.loadListFilterCheckboxData({url:e.filterCheckboxApiUrl,data:e.filterRequestData,showSpinnerAndHideErrorMessage:c,hideSpinnerAndHideErrorMessage:a,filterCheckBoxCheckUnCheckAction:u,initilizeAccordion:m}):f(e.filterCheckboxApiUrl,e.filterRequestData),e.isCheckboxApiAlreadyLoaded=!0)}catch(e){console.log("error catch",e),l(!0)}};function m(){function t(t){const i=t.querySelector(".cmp-filterlist__accordion--content"),s=t.querySelector(".chevron"),n=t.classList.toggle("active"),o=window.adobeDataLayer.find((t=>t.component&&t.component[e.filterListParentId]));i.setAttribute("aria-hidden",n?"false":"true"),s.textContent=n?"expand_less":"expand_more",t.querySelector(".cmp-filterlist__accordion--button").setAttribute("aria-expanded",n.toString()),n?vt("cmp:show","component."+e.filterListParentId,{},{[e.filterListParentId]:{"dc:title":t.querySelector(".cmp-filterlist__accordion--button").getAttribute("data-text"),"@type":o.component[e.filterListParentId]["@type"]}}):vt("cmp:hide","component."+e.filterListParentId,{},{[e.filterListParentId]:{"dc:title":t.querySelector(".cmp-filterlist__accordion--button").getAttribute("data-text"),"@type":o.component[e.filterListParentId]["@type"]}})}e.filterListParent.querySelectorAll(".cmp-filterlist__accordion--item").forEach((e=>{const i=e.querySelector(".cmp-filterlist__accordion--button");i.addEventListener("click",(()=>t(e))),i.addEventListener("keydown",(i=>function(e,i){switch(e.keyCode){case 13:case 32:e.preventDefault(),t(i);break;case 38:e.preventDefault();const s=i.previousElementSibling;s&&s.classList.contains("cmp-filterlist__accordion--item")&&s.querySelector(".cmp-filterlist__accordion--button").focus();break;case 40:e.preventDefault();const n=i.nextElementSibling;n&&n.classList.contains("cmp-filterlist__accordion--item")&&n.querySelector(".cmp-filterlist__accordion--button").focus()}}(i,e)))}))}function p(t,i){const s=document.querySelector("[data-filterlist-pagination]");let n;n="..."!==t?document.createElement("button"):document.createElement("span"),n.textContent=t,"..."!==t&&n.setAttribute("aria-label",s.getAttribute("data-pagination-page-label")+" "+t),t===i&&n.classList.add("active"),"..."!==t&&n.addEventListener("click",(t=>{t.preventDefault();let i=parseInt(t.currentTarget.textContent,0)*e.listSize-e.listSize;xo?e.listCardRequestData.params.from=i:e.listCardRequestData.items_from=i,e.loadMoreTrigger=!1,h(e.listCardApiUrl,e.listCardRequestData)})),document.querySelector(".cmp-filterlist__pagination--numbers").appendChild(n)}e.loadMoreBtn.addEventListener("click",(t=>{t.preventDefault();const i=parseInt(t.currentTarget.getAttribute("data-next-page"),0);e.totalCount>=i&&(e.loadMoreTrigger=!1,t.currentTarget.setAttribute("data-next-page",i),xo?e.listCardRequestData.params.from=i*e.listSize:e.listCardRequestData.items_from=i*e.listSize,h(e.listCardApiUrl,e.listCardRequestData))})),e.paginationContainer.querySelectorAll(".nav-btn").forEach((t=>{t.addEventListener("click",(t=>{if(e.loadMoreTrigger=!1,t.preventDefault(),!t.currentTarget.classList.contains("disabled"))if(t.currentTarget.classList.contains("cmp-filterlist__pagination--next")){const t=(parseInt(e.paginationContainer.querySelector("button.active").textContent)+1)*e.listSize-e.listSize;xo?e.listCardRequestData.params.from=t:e.listCardRequestData.items_from=t,h(e.listCardApiUrl,e.listCardRequestData)}else{const t=(parseInt(e.paginationContainer.querySelector("button.active").textContent)-1)*e.listSize-e.listSize;xo?e.listCardRequestData.params.from=t:e.listCardRequestData.items_from=t,h(e.listCardApiUrl,e.listCardRequestData)}}))}));const f=async(t,i)=>{try{const s=document.getElementById("list_container");let n=e.filterListParent.querySelector(".checkbox-error-message");n.classList.remove("active"),c();const o=await Oo(t,i);if(!o||0==o?.length)return a(),void n.classList.add("active");const{results:{total_count:r},categories_set:l}=o;if(r>0&&0!==Object.keys(l).length){let t="";for(const e in l){const i=l[e];let s=e;const n="accordion-"+Math.random().toString(8).slice(2);switch(s){case"service_terms_buckets":s="service_ids";break;case"insight_terms_buckets":s="insight_ids";break;case"industry_terms_buckets":s="industry_ids";break;default:s=!1}if(!s)return void console.log("Filter List Api- category set id's not matching.");const o=g(null,i.parent_terms,s,!1);t+=`<div class="cmp-filterlist__accordion--item" role="presentation">\n                        <button class="cmp-filterlist__accordion--button" aria-controls="${n}" aria-expanded="false"> ${i.categories.key} <span\n                        class="chevron material-icons-outlined"\n                        aria-hidden="true"\n                        >expand_more</span\n                      ></button>\n                        <div class="cmp-filterlist__accordion--content" id="${n}">${o}</div>\n                    </div>`}s.innerHTML=t,e.filterCheckBox=e.filterOverlay.querySelectorAll("input[type='checkbox']"),u(),m(),a()}else a(),n.classList.add("active")}catch(e){console.log("loadListFilterCheckboxData error",e),a()}};function g(e,t,i,s){let n;n=null!=e?e.appendChild(document.createElement("ul")):document.createElement("ul");for(const[e]of Object.entries(t)){let o=n.appendChild(document.createElement("li"));const r=o.appendChild(document.createElement("span"));let a=r.appendChild(document.createElement("input"));a.setAttribute("type","checkbox"),a.setAttribute("data-filter-parent",i);const l=r.appendChild(document.createElement("label"));s?(o.setAttribute("class","child-li"),n.setAttribute("class","child-ul"),a.setAttribute("class","child-chkbox")):(a.setAttribute("class","parent-chkbox"),n.setAttribute("class","filter-ul-set")),l.textContent=t[e].title,l.setAttribute("for",t[e].id),a.setAttribute("name",t[e].title),a.setAttribute("id",t[e].id),a.setAttribute("value",t[e].id),t[e].child&&g(o,t[e].child,i,!0)}return n.outerHTML}h(e.listCardApiUrl,e.listCardRequestData),e.filterOpenButton.forEach((e=>{e.addEventListener("click",n)})),e.filterCloseButton.addEventListener("click",n),e.filterOverlay.addEventListener("keyup",(t=>{"ESCAPE"===Mo.getKeyID(t)&&(n(t),e.filterOpenButton[0].focus())})),e.filterSubmitButton.addEventListener("click",(async n=>{n.stopPropagation(),n.preventDefault();const r=e.filterOverlay.querySelectorAll("input[type='checkbox']:checked");if(e.loadMoreTrigger=!0,o(),r.length>0)xo?t.filterCategorySetRequestData():d(),i(r.length),xo?e.listCardRequestData.params.from=0:e.listCardRequestData.items_from=0,h(e.listCardApiUrl,e.listCardRequestData);else{let t={};if(xo)t={id:"listing_default_template",params:{from:0,size:e.listCardRequestData.params.size,document_type:e.listCardRequestData.params.document_type,sort:e.listCardRequestData.params.sort,...e.listCardRequestData.params.exclude_press_release&&{exclude_press_release:e.listCardRequestData.params.exclude_press_release}}},e.listCardRequestData=t;else{const{...i}=e.listCardRequestData;t=i,t.items_from=0}s(),h(e.listCardApiUrl,t)}e.filterOpenButton[0].focus()})),e.filterClearButton.addEventListener("click",(async t=>{t.preventDefault(),e.filterCheckBox.forEach((e=>{e.checked=!1,e.classList.remove("child-selected"),e.closest(".cmp-filterlist__accordion--item").querySelector(".filter-count").innerHTML=""})),e.filterSubmitButton.focus();const i=window.adobeDataLayer.find((t=>t.component&&t.component[e.filterListParentId]));vt("cmp:click","component."+e.filterListParentId,{},{[e.filterListParentId]:{"dc:title":"Filter Listing - Clear All","@type":i.component[e.filterListParentId]["@type"]}})}))}),{selectors:{self:".cmp-filterlist"}});const{CookieUtils:Vo}=yn;yt((function(e){const t=e.element,i=t.querySelector(".cmp-geolocation-selector"),s=t.querySelector(".geolocation-selector__portals"),n=t.querySelector(".cmp-geolocation-selector"),o=t.querySelector("#geolocationButtonGlobal"),r="/xx/en.html",a="g_redirect",l=Vo.getCookie(a),c=JSON.parse(i.dataset.cmpDataLayer),d=Object.keys(c)[0],u=c[d]["@type"],h=Vo.getCookie("OptanonAlertBoxClosed"),m=document.referrer;(async()=>{try{const e=await(async()=>{try{return fetch("/akamai/geo-tracker.html",{method:"post"}).then((e=>{let t=e.headers.get("countrycode").toLowerCase();return t=t.replace(/\s/gim,""),t.lastIndexOf(",")>-1&&(t=t.split(",").pop()),t}))}catch(e){console.log("CountryCode error",e)}})(),t=await fetch(`/bin/kpmg/geolocation?countryCode=${e}`);return await t.json()}catch(e){console.log("fetchGeoLocationData error","error")}})().then((e=>{if(l||function(e){const i=window.location.pathname.toLowerCase();""===m&&i.includes(r)&&(!function(e){if(e){const i=t.querySelector(".geolocation-selector__portals").getAttribute("data-label"),n=e[0].country;t.querySelector("#geolocationOrigin").innerHTML=n,e.forEach((e=>{const t=e.countrylang.split("(").join(" (");let n,o;if(e.siteUrl.includes("/content")){let t=e.siteUrl.substring(e.siteUrl.length-6);n=`${t}.html`,o=t}else{n=e.siteUrl;o="/"+e.siteUrl.split("/").filter((e=>2===e.length)).join("/")}s.insertAdjacentHTML("beforeend",`\n             <div class="button cmp-button--secondary cmp-button--full-width">\n                <a href="${n}"\n                  title="${i} ${t}"\n                  class="cmp-button"\n                  data-location="${n}"\n                  data-cookie="${o}"\n                  data-country="${t}"\n                  ${h?"":"inert"}\n                  >\n                  <span \n                    data-location="${n}" \n                    data-cookie="${o}"\n                    data-country="${t}" \n                    class="cmp-button__text">                \n                    ${i} ${t}\n                  </span>\n                </a\n              >\n             </div>`)}))}}(e),wn()&&(y("show"),vt("cmp:show","component."+d,{},{[d]:{"dc:title":"Geolocation Appears","@type":u}})))}(e),l){if(l===r)return;if(l&&""!=m)return;if(l&&""===m)try{const e=new URL(l,window.location.origin);if(e.origin!==window.location.origin)throw new Error("Invalid redirect target");location.href=encodeURI(e.href)}catch(e){location.href=encodeURI(`${r}`)}}})),s.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Vo.setCookie(a,e.target.attributes["data-cookie"].value,365);const t=e.currentTarget.querySelector("a").getAttribute("href"),i=e.currentTarget.querySelector("a").getAttribute("data-country");vt("cmp:click","component.geolocationmodal-"+d,{},{["geolocationmodal-"+d]:{"dc:title":i,"@type":u,"xdm:linkURL":t}}),location.href=e.target.attributes["data-location"].value}));const p='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',f=document.querySelectorAll(p),g=()=>{const e=t.querySelectorAll(p)[0],i=t.querySelectorAll(p),s=i[i.length-1];f.forEach((e=>{e.setAttribute("inert","")})),i.forEach((e=>{e.removeAttribute("inert")})),document.addEventListener("keydown",(function(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===e&&(s.focus(),t.preventDefault()):document.activeElement===s&&(e.focus(),t.preventDefault()))})),document.addEventListener("click",(()=>{f.forEach((e=>{e.removeAttribute("inert","")}))}))};function y(e){if("show"===e&&(document.querySelector("body").classList.add("no-scroll-"),document.querySelector("body").classList.add("loading"),t.classList.add("cmn-msg-overlay"),n.show(),t.classList.add("show"),h||f.forEach((e=>{e.setAttribute("inert","")})),h&&g()),"hide"===e){document.querySelector("body").classList.contains("no-scroll-")&&document.querySelector("body").classList.remove("no-scroll-"),document.querySelector("body").classList.remove("loading"),t.classList.remove("cmn-msg-overlay"),t.classList.remove("show"),n.close(),document.body.style.overflow="auto",f.forEach((e=>{e.removeAttribute("inert","")}));document.querySelector("a").focus()}}o.addEventListener("click",(e=>{e.preventDefault(),Vo.setCookie(a,r,365),y("hide");const t=window.location.pathname;vt("cmp:click","component.geolocationmodal-"+d,{},{["geolocationmodal-"+d]:{"dc:title":"Global","@type":u,"xdm:linkURL":t}})})),document.body.addEventListener("click",(e=>{const i=t.querySelectorAll(p),s=()=>{i.forEach((e=>{e.removeAttribute("inert")})),o.focus(),g()};"onetrust-accept-btn-handler"!==e.target.id&&"onetrust-reject-all-handler"!==e.target.id||s(),"save-preference-btn-handler onetrust-close-btn-handler"!=e.target.className&&"accept-recommended-btn-handler"!==e.target.id||setTimeout((()=>{s()}),500)}))}),{selectors:{self:".geolocation-selector"}}),yt((function(e){const t=e.element;let i=t.querySelector("#heroCsiMonth");const s=i.textContent.split(".").join("");i.textContent=s;let n=t.querySelector("#heroEventTime");if(null!=n){n.textContent=n.textContent.toUpperCase().split(".").join("");const e=e=>"0"===e.charAt(0)?e.slice(1):e,t=n.textContent.match(/\S+/g).map(e).join(" ");n.textContent=t}}),{selectors:{self:".hero-csi"}}),yt((function(e){const t=e.element;let i=t.querySelector("#heroEventDate");const s=i.textContent.split(".").join("");i.textContent=s;let n=t.querySelector("#heroEventTime");if(null!=n){n.textContent=n.textContent.toUpperCase().split(".").join("");const e=e=>"0"===e.charAt(0)?e.slice(1):e,t=n.textContent.match(/\S+/g).map(e).join(" ");n.textContent=t}}),{selectors:{self:".hero-event"}});new ResizeObserver((()=>{window.kpmgResizeHandlers&&window.kpmgResizeHandlers.forEach((e=>{e()}))})).observe(document.body,{box:"border-box"});let $o;yt((function(e){const t=e.element,i=t.querySelector(e.selectors.content),s=()=>{const e=t.getBoundingClientRect(),s=i.getBoundingClientRect(),n=t.classList.contains("utils-bleed-right")?"right":"left";let o=s[n]-e[n];const r=((e,t)=>window.getComputedStyle(e,null).getPropertyValue(t))(i,`padding-${n}`),a=Math.abs(o)+parseInt(r,10);t.style.setProperty("--horizontal-bleed-width",`${a}px`)};var n;s(),n=s,window.kpmgResizeHandlers||(window.kpmgResizeHandlers=[]),window.kpmgResizeHandlers.push(n)}),{selectors:{self:".section.container",content:".section.container > .cmp-container"}}),yt((function(e){const t=e.element,i={25:"cmp:videotwentyfive",50:"cmp:videofifty",75:"cmp:videoseventyfive",95:"cmp:videocomplete"},s=new Map;window.addEventListener("DOMContentLoaded",(async function(){await new Promise((e=>{if(window.YT&&window.YT.Player)return void e();let t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=()=>{e()}})),document.querySelectorAll(".youtube-iframe").forEach((e=>{const t=new URL(e.src).pathname.split("/").pop();if(!t)return void console.warn("YouTube video ID not found.");s.set(e,{hasStarted:!1,milestones:{25:!1,50:!1,75:!1,95:!1},id:t});const n=new YT.Player(e,{events:{onStateChange:t=>{const o=s.get(e);if(t.data===YT.PlayerState.PLAYING&&!o.hasStarted){o.hasStarted=!0;let t={};const i={"@type":"kpmg/components/html-container-youtube",assetType:"Youtube","dc:title":e.title,formType:"Non-Gated Content"};t["youtube-"+o.id]=i,vt("cmp:videostart","component.youtube-"+o.id,{},t)}if(t.data===YT.PlayerState.PLAYING){let t=setInterval((()=>{let s=n.getCurrentTime()/n.getDuration()*100;for(let t in o.milestones)if(!o.milestones[t]&&s>=t){o.milestones[t]=!0;let s={};const n={"@type":"kpmg/components/html-container-youtube",assetType:"Youtube","dc:title":e.title,formType:"Non-Gated Content"};s["youtube-"+o.id]=n,vt(i[t],"component.youtube-"+o.id,{},s)}s>=95&&clearInterval(t)}),1e3)}}}})}))})),window.addEventListener("DOMContentLoaded",(function(){const e=[];t.querySelectorAll("iframe").forEach((t=>{let i=t.getAttribute("src");if(i)try{new URL(i).origin.includes("podbean.com")&&e.push(t)}catch(e){console.log("Not a valid URL in iframe")}}));const s=new Map;e.forEach((e=>{let t=new URL(e.src).searchParams.get("i"),i=e.getAttribute("title");s.set(e,{hasStarted:!1,milestones:{25:!1,50:!1,75:!1,95:!1},id:t,title:i})})),window.addEventListener("message",(function(t){const n=Array.from(e).find((e=>e.contentWindow===t.source));if(!n)return;const o=s.get(n);if(o&&t.data&&t.data.event){if("PB.Widget.Events.PLAY"===t.data.event&&!o.hasStarted){o.hasStarted=!0;let e={},t={"@type":"kpmg/components/html-container-podbean",assetType:"Podbean","dc:title":n.getAttribute("title"),formType:"Non-Gated Content"};e["podbean-"+o.id]=t,vt("cmp:videostart","component.podbean-"+o.id,{},e)}if("PB.Widget.Events.PLAY_PROGRESS"===t.data.event&&t.data.data){let e=Math.round(100*t.data.data.relativePosition);for(let t in o.milestones)if(!o.milestones[t]&&e>=t){o.milestones[t]=!0;let e={},s={"@type":"kpmg/components/html-container-podbean",assetType:"Podbean","dc:title":n.getAttribute("title"),formType:"Non-Gated Content"};e["podbean-"+o.id]=s,vt(i[t],"component.podbean-"+o.id,{},e)}}}}))}))}),{selectors:{self:".cmp-htmlcontainer"}}),yt((function(){document.querySelectorAll(".industryservicegrid").forEach((e=>{e.classList.contains("dark-theme")&&(e.querySelector(".button-view-all").parentElement.classList.add("dark-theme"),e.querySelector(".button-view-all").parentElement.classList.remove("light-theme"))})),document.querySelectorAll(".button-view-all").forEach((e=>{e.addEventListener("click",(function(e){const t=e.target.closest('.cmp-industryservicegrid[data-show="true"]').querySelectorAll(".cmp-col").length;this.classList.toggle("active"),this.classList.contains("active")?this.setAttribute("aria-expanded","true"):this.setAttribute("aria-expanded","false"),e.target.closest('.cmp-industryservicegrid[data-show="true"]').classList.toggle("active"),t>4&&(this.classList.contains("active")?this.querySelector(".cmp-button__text").innerHTML=this.getAttribute("data-less"):this.querySelector(".cmp-button__text").innerHTML=this.getAttribute("data-show"))}))}))}),{selectors:{self:".industryservicegrid"}}),yt((function(e){const t=e.element.querySelectorAll('[data-link-type="pdf"]');t&&t.forEach((e=>{e.addEventListener("click",(function(){e.classList.add("visited")}))}))}),{selectors:{self:".cmp-linklist"}}),yt((function(e){const t=e.element;t.setAttribute("id","kpmg-accessibility-main"),t.setAttribute("role","main")}),{selectors:{self:".main"}}),yt((function(e){const t=e.element,i=t.querySelector(e.selectors.title),s=t.querySelector(e.selectors.description),n=(e,t)=>{let i=e.textContent.substring(0,t);e.innerHTML=i};n(i,54),n(s,120)}),{selectors:{self:".nextbestactionpromo",title:".cmp-teaser__title",description:".cmp-teaser__description"}}),yt((function(e){const t=e.element,i=t.querySelector("#rfpOverlayInput"),s=t.querySelectorAll(".rfpformlocationselectoroverlay__list-item"),n=t.querySelectorAll(".rfpformlocationselectoroverlay__list-input"),o=t.querySelector(".rfpformlocationselectoroverlay__empty"),r=t.querySelector("#rfpOverlaySubmitDiv"),a=t.querySelector("#rfpOverlaySubmit"),l=Array.from(s).map(((e,t)=>({input:n[t],listItem:e})));let c;const d=e=>{s.forEach((e=>{e.classList.add("rfpformlocationselectoroverlay__list-item--hide")}));let t=((e,t)=>t.filter((t=>t.input.dataset.value.toLowerCase().startsWith(e))))(e,l);t.forEach((({listItem:e})=>{e.classList.remove("rfpformlocationselectoroverlay__list-item--hide")})),0==t.length&&(o.style.display="flex",c&&(r.classList.add("cmp-button--primary-disabled"),a.setAttribute("disabled",""),n.forEach((e=>{e.checked=!1})))),t.length>0&&(o.style.display="none")};n.forEach((e=>{e.addEventListener("click",(e=>{c=!0,r.classList.remove("cmp-button--primary-disabled"),a.removeAttribute("disabled"),a.onclick=()=>{try{const t=JSON.parse(a.dataset.datalayerClick),i=It(t);i&&(i["dc:title"]=e.target.dataset.value||"",i["xdm:linkURL"]=e.target.value),Ct(t)}catch{}const t=["cloud.dev.kpmg.com","cloud.qa.kpmg.com","cloud.stg.kpmg.com","cloud.kpmg.com","dev.kpmg.com","qa.kpmg.com","stg.kpmg.com","launch.kpmg.com","kpmg.com"];try{const i=new URL(e.target.value);t.includes(i.hostname)?location.href=encodeURI(i.href):console.error("Blocked redirect to untrusted host")}catch(e){console.error("Invalid URL")}}}))})),$o||($o=document.querySelector("#rfpLocationSelectorOverlay")?._Handler,$o.on("dialog-closed",(e=>{if("rfpLocationSelectorOverlay"!=e.currentTarget.id)return;const t=e.detail?.target;if("rfpOverlaySubmit"!=t?.id)try{let e;if("rfpOverlayCancel"==t.id)e=JSON.parse(t.dataset.datalayerClick);else{const t=document.querySelector("[data-dl-dialog-close-click]");t&&(e=JSON.parse(t.dataset.dlDialogCloseClick))}e&&Ct(e)}catch{}i.value="",r.classList.add("cmp-button--primary-disabled"),a.setAttribute("disabled",""),s.forEach((e=>{e.classList.remove("rfpformlocationselectoroverlay__list-item--hide")})),n.forEach((e=>{e.checked=!1}))}))),i.addEventListener("change",(e=>{let t=e.target.value.toLowerCase();d(t)})),i.addEventListener("keyup",(e=>{let t=e.target.value.toLowerCase();d(t)}))}),{selectors:{self:".rfpformlocationselectoroverlay",cmpOverlay:".cmp-rfpformlocationselectoroverlay",searchInput:"#rfpOverlayInput"}});const{FormUtils:Bo}=yn;let Go,Ho,jo;yt((function({element:e}){Ho||(document.body.appendChild(document.querySelector("#rfpLocationSelectorOverlay")),document.querySelector("#rfpLocationSelectorOverlay")?.setAttribute("data-cmp-dialog",""),Ho=e.href),Ho&&e.addEventListener("click",(e=>{const t=e.target;jo=document.querySelector("#rfpLocationSelectorOverlay")._Handler,e.preventDefault(),e.stopPropagation(),Go?(jo.open({focusBackToElement:t}),Bo.focusInput(jo.UI.ROOT.querySelector("#rfpOverlayInput"))):fetch(Ho).then((e=>{Go=e,e.text().then((e=>{const i=document.createDocumentFragment(),s=document.createElement("div");s.innerHTML=e,i.appendChild(s),jo.UI.CONTENT_ROOT.appendChild(i),jo.firstElement=jo.UI.CLOSE_BUTTON[0]??jo.UI.CLOSE_BUTTON;const n=jo.UI.CONTENT_ROOT.querySelector("#rfpOverlayCancel");jo.lastElement=n,jo.open({focusBackToElement:t,data:"rfp-overlay"}),Bo.focusInput(jo.UI.ROOT.querySelector("#rfpOverlayInput"))}))}))}))}),{selectors:{self:"[data-is-rfp-link]"}});const Ko="cmp-search-results__filters",zo={filtersContainer:`.${Ko}-container`,filtersPrevBtn:`#${Ko}--prev-btn`,filtersNextBtn:`#${Ko}--next-btn`,filterButtons:`.${Ko}--cta`,filterBtnWrapper:`.${Ko}`,filterPrevBtnWrapper:`.${Ko}-btn-wrapper.left`,filterNextBtnWrapper:`.${Ko}-btn-wrapper.right`,searchResults:".search-results",ROOT:".${CmpClass}-container"};yt(class{UI={filterButtons:null};#w;constructor({element:e}){Et(e,this.UI,zo),this.UI.searchResults=e.parentElement,this.UI.filtersContainer=e,this.#P()}#P(){this.#N(),this.#R(),this.UI.filterBtnWrapper.addEventListener("scroll",(()=>{this.#R()}));let e=document.body.clientWidth;window.addEventListener("resize",(()=>{e!=document.body.clientWidth&&(requestAnimationFrame((()=>this.#R())),this.#U())})),this.#U(),this.#k()}#U(){this.UI.filterBtnWrapper.style.width=this.UI.filtersContainer.style.width=`${this.UI.searchResults.clientWidth}px`}#N(){this.#D(),this.UI.filtersPrevBtn.addEventListener("click",(()=>{this.#M.scrollTo({left:-16,behavior:"smooth"})})),this.UI.filtersNextBtn.addEventListener("click",(()=>{this.#M.scrollTo({left:this.#M.scrollWidth+16,behavior:"smooth"})}))}get#M(){return this.UI.filterBtnWrapper}#R(){this.#w||(this.#w=setTimeout((()=>{const{firstElementChild:e,lastElementChild:t}=this.UI.filterBtnWrapper,i=e.classList.contains("in-view"),s=t.classList.contains("in-view");this.#F(this.UI.filterPrevBtnWrapper,i),this.#F(this.UI.filterNextBtnWrapper,s),this.#w=0}),100))}#D(){const{firstElementChild:e,lastElementChild:t}=this.UI.filterBtnWrapper,i=new IntersectionObserver((i=>{i.forEach((({target:i,isIntersecting:s})=>{i!=e?i!=t||t.classList.toggle("in-view",s):e.classList.toggle("in-view",s)}))}),{root:this.UI.filterBtnWrapper,threshold:.99});i.observe(e),i.observe(t)}#F(e,t){e.classList.toggle("hidden",t)}#k(){const e=Array.from(this.UI.filterBtnWrapper.querySelectorAll(zo.filterButtons)),{filterBtnWrapper:t}=this.UI;Uo(e,{tabindex:-1});const i=e.find((e=>e.classList.contains("selected")));i&&(i.tabIndex=0),t.addEventListener("focusout",(t=>{t.relatedTarget?.matches(zo.filterButtons)||(Uo(e,{tabindex:-1}),i&&(i.tabIndex=0))}));e.forEach(((i,s)=>{i.addEventListener("keydown",(i=>{const n=i.key.toUpperCase();let o;if("ARROWLEFT"===n||"ARROWUP"===n?o=0===s?e.length-1:s-1:"ARROWRIGHT"!==n&&"ARROWDOWN"!==n||(o=s===e.length-1?0:s+1),void 0!==o){i.preventDefault();const n=e[o];e[s].tabIndex=-1,n.tabIndex=0,n.focus(),(e=>{const i=t,s=i.getBoundingClientRect(),n=e.getBoundingClientRect();n.left<s.left?i.scrollLeft-=s.left-n.left:n.right>s.right&&(i.scrollLeft+=n.right-s.right)})(n)}}))}))}},{selectors:{self:".cmp-search-results__filters-container"}});class Wo{#q;#x;constructor(e){const t=e.parent;t.insertAdjacentHTML("beforeend",'<div class="cmp-loading-spinner">\n            <div class="cmp-loading-spinner__inner">\n                <div class="cmp-loading-spinner__icon"></div>\n                <p>Loading...</p>\n            </div>\n        </div>'),this.#q=t.querySelector(".cmp-loading-spinner"),this.#x=document.querySelector("body")}show(){const{DOMUtils:e}=yn;e.addClass({element:this.#q,className:"cmp-loading-spinner--show"}),e.addClass({element:this.#x,className:"loading"})}hide(){const{DOMUtils:e}=yn;e.removeClass({element:this.#q,className:"cmp-loading-spinner--show"}),e.removeClass({element:this.#x,className:"loading"})}}const{DeviceUtils:Yo,URLUtils:Jo}=yn;(wn()||"local"===Jo.getInstance().instance)&&yt((function(e){const t="true"===document.querySelector(".cmp-search").dataset.msDisabled;setTimeout((()=>function(e){let t=e.element.querySelector(".error-msg-for-overlay  .text-msg");if(!t)return;let i=t.querySelector(".text-msg .text");if(!i)return;let s=Io=new To;s.AddContent(t);let n=i.querySelector("h1,h2,h3,h4,h5,h6");if(n){if(!n.id){let t=e.element.id;t||(t=To.InstanceId+100+1),n.id=`err-msg-overlay-heading-${e.element.id?e.element.id:t}`}s.setLabelledby(`${n.id}`)}s.setButtonText(i.dataset.buttonTextClose)}(e)));const i=Un().get("q"),s=Un().get("kpmg_doc_type");let n=Un().get("page");const o=e.element;i&&"null"!==i&&function(e){const t=document.title,i=t.indexOf("|");document.title=-1!==i?t.slice(0,i).trim()+` - '${e}' `+t.slice(i):`${t} - '${e}' | KPMG`}(i);const r=document.querySelectorAll(e.selectors.filterButtons),a=document.getElementById(e.selectors.paginationContainer),l=document.querySelector(e.selectors.resultListContainer),c=new Wo({parent:o}),d=new Yo,u=()=>"DEFAULT"===d.getData().currentBreakPoint,h=()=>{document.querySelector(".cmp-container").scrollIntoView({behavior:"smooth",block:"start"})},m=(e={})=>{const{msDisabled:t,searchTerm:i,pageNumber:s,docType:n,updateQuery:o}=e;c.show(),setTimeout((()=>{Fn(t,i,s,n),o&&function(e,t,i){let s="?q="+e;i&&(s+="&kpmg_doc_type="+i),t&&(s+="&page="+t),window.history.pushState(null,"",s)}(i,s,n),c.hide()}),500)};n&&(n=parseInt(n)),i?u()?m({msDisabled:t,searchTerm:i,pageNumber:1,docType:s,updateQuery:!0}):m({msDisabled:t,searchTerm:i,pageNumber:n,docType:s,updateQuery:!1}):(Uo(r,{tabIndex:"-1","aria-checked":"false"}),Uo([r[0]],{tabIndex:"0","aria-checked":"true"})),a.addEventListener("click",(function(i){if(i.target.classList.contains(e.selectors.paginationPrevButton)){let e,i=Un().get("q"),s=Un().get("kpmg_doc_type"),n=Un().get("page");e=n&&n>1?parseInt(n)-1:1,m({msDisabled:t,searchTerm:i,pageNumber:e,docType:s,updateQuery:!0}),u()||h()}if(i.target.classList.contains(e.selectors.paginationNextButton)){let e,i=Un().get("q"),s=Un().get("kpmg_doc_type"),n=Un().get("page");e=n?parseInt(n)+1:2,m({msDisabled:t,searchTerm:i,pageNumber:e,docType:s,updateQuery:!0}),u()||h()}if(i.target.classList.contains(e.selectors.paginationNumberButton)){let e=parseInt(i.target.textContent),s=Un().get("q"),n=Un().get("kpmg_doc_type");m({msDisabled:t,searchTerm:s,pageNumber:e,docType:n,updateQuery:!0}),u()||h()}})),r.forEach((e=>{e.addEventListener("click",(()=>{if(r.forEach((t=>{t!==e&&(t.classList.remove("selected"),Uo([t],{tabIndex:"-1","aria-checked":"false"}))})),e.dataset.filterType){let i=1,s=Un().get("q"),n=e.dataset.filterType.toUpperCase();l.innerHTML="",h(),m({msDisabled:t,searchTerm:s,pageNumber:i,docType:n,updateQuery:!0})}e.classList.add("selected"),Uo([e],{tabIndex:"0","aria-checked":"true"})}))})),window.history&&window.history.pushState&&window.addEventListener("popstate",(function(){let e=Un().get("q"),i=Un().get("kpmg_doc_type"),s=Un().get("page");m({msDisabled:t,searchTerm:e,pageNumber:s,docType:i,updateQuery:!1}),document.querySelector("#cmp-search-input-auto-complete").value=e})),document.body.addEventListener("search-query-updated",(e=>{m({msDisabled:t,searchTerm:e.detail.text,updateQuery:!1})}))}),{selectors:{self:".cmp-search-results",countDesktopLabel:".cmp-search-results__count--desktop-label",countMobileLabel:".cmp-search-results__count--mobile-label span",resultListContainer:".cmp-search-results__list",filterButtons:".cmp-search-results__filters--cta",paginationContainer:"cmp-search-results__pagination",paginationNextButton:"cmp-search-results__pagination--next-button",paginationNumberButton:"cmp-search-results__pagination--number-button",paginationPrevButton:"cmp-search-results__pagination--previous-button"}}),yt((function(e){const t=e.element,i=t.querySelector(".cmp-title__text").innerText;let s=t.querySelector(".cmp-button").ariaLabel;const n=t.querySelector(".cmp-button").innerText;s||(t.querySelector(".cmp-button").ariaLabel=i+", "+n)}),{selectors:{self:".section-highlight"}}),yt((function(e){const t=e.element,i=t.querySelectorAll(".cmp-sideaccordion__toggle"),s=t.querySelectorAll(".cmp-sideaccordion__details--desktop .cmp-sideaccordion__content"),n=window.innerWidth,o=t.querySelector(".cmp-sideaccordion__panels"),r=t.querySelector(".cmp-sideaccordion__list").getBoundingClientRect().height;i.forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-target"),n=document.getElementById(t);i.forEach((e=>{e.classList.remove("is-active"),e.setAttribute("aria-expanded","false")})),s.forEach((e=>e.classList.remove("is-active"))),n&&(e.classList.add("is-active"),e.setAttribute("aria-expanded","true"),n.classList.add("is-active"))}))})),document.querySelectorAll(".cmp-sideaccordion").forEach((e=>{const t=e.querySelectorAll(".cmp-sideaccordion__details--mobile");t.forEach(((e,i)=>{e.setAttribute("aria-expanded","false"),0===i&&e.setAttribute("aria-expanded","true"),e.addEventListener("toggle",(()=>{e.setAttribute("aria-expanded","false"),e.open&&(e.setAttribute("aria-expanded","true"),t.forEach((t=>{t!==e&&t.open&&(t.open=!1)})))}))}))}));const a=(()=>{let e=0;return[...s].forEach((t=>{const i=t.style.display;t.style.display="block",t.style.visibility="hidden",t.style.position="absolute",t.style.top="-9999px";const s=t.offsetHeight;e=Math.max(e,s),t.style.display=i,t.style.visibility="",t.style.position="",t.style.top=""})),e})();n>1024&&(a<=600&&(o.style.height=`${a}px`),a>=600&&(o.style.height="600px"),r>=a&&(o.style.height=`${r}px`))}),{selectors:{self:".sideaccordion"}});yt((function(e){const t=e.element;t?.parentElement?.classList.contains("standardteaser-carousel")&&(!function(e){if(e){const t=e.querySelector(".cmp-carousel__indicators"),i=e.querySelector(".cmp-carousel__action--previous");i&&t&&i.after(t)}}(t),ko(t))}),{selectors:{self:".cmp-carousel"}}),yt((function(e){const t=e.element,i=t.getAttribute("id");t.querySelectorAll(".cmp-tabs__tab").forEach((e=>{e.addEventListener("click",(()=>function(e,t,i,s){const n=t.getAttribute("data-cmp-data-layer"),o=JSON.parse(n),r=o[e]["repo:modifyDate"],a=o[e]["@type"];try{window.adobeDataLayer&&e&&window.adobeDataLayer.push({event:"cmp:show",eventInfo:{path:`component.${i}`},component:{[i]:{"dc:title":s,"@type":a,"repo:modifyDate":r}}})}catch(e){console.log("Analytics error",e)}}(i,e,e.id,e.innerText)))}))}),{selectors:{self:".cmp-tabs"}}),yt((function(e){const t=e.element,i=t.querySelector(e.selectors.tabsList),s=t.querySelectorAll(e.selectors.tab),n=t.querySelector(e.selectors.leftBtn),o=t.querySelector(e.selectors.rightBtn);let r=0;const a=function(){i.scrollLeft>=10?n.classList.add("active"):n.classList.remove("active");let e=i.scrollWidth-i.clientWidth-10;i.scrollLeft>=e?o.classList.remove("active"):o.classList.add("active")};s.forEach((e=>{e.addEventListener("click",(e=>{window.innerWidth<768&&(i.scrollLeft=e.target.offsetLeft-56),window.innerWidth>=768&&(i.scrollLeft=e.target.offsetLeft-123)}))})),i.scrollWidth>i.offsetWidth&&(o.classList.add("active"),i.addEventListener("scroll",a),window.addEventListener("resize",a)),n.addEventListener("click",(()=>{n.focus(),i.scrollBy({left:-(s[r].offsetWidth+40),behavior:"smooth"}),r<=0?r=0:r--,a()})),o.addEventListener("click",(()=>{o.focus(),i.scrollBy({left:s[r].offsetWidth+40,behavior:"smooth"}),r>=s.length?r=s.length:r++,a()}))}),{selectors:{self:".tabs",tabsList:".cmp-tabs__tablist",tab:".cmp-tabs__tab",leftBtn:".cmp-tabs__btn--left",rightBtn:".cmp-tabs__btn--right"}}),yt((function(e){e.element.querySelectorAll(e.selectors.teaserItem).forEach((t=>{t.querySelectorAll(e.selectors.teaserContainer).forEach((e=>{""===e.innerHTML.trim()&&(t.style.display="none")}))}))}),{selectors:{self:".teaserbox",teaserItem:".toc-grid-item",teaserContainer:".cmp-container"}}),yt((function(e){const t=e.element,i=[...t.classList].some((e=>e.includes("number"))),s=t.classList.contains("cmp-text-list--icon")||t.classList.contains("cmp-text-list--simple-icon");if(i||!s){const e=document.createElement("ol"),i=t.querySelector(".cmp-text-list"),s=i.getAttribute("id");for(e.setAttribute("id",s),e.classList.add("cmp-text-list");i.firstChild;)e.appendChild(i.firstChild);i.replaceWith(e)}}),{selectors:{self:".textlist"}});const{KeyboardUtils:Xo}=yn,Qo={ROOT:"[data-cmp-dialog]",CONTENT_ROOT:"[data-cmp-dialog-content]",CLOSE_BUTTON:"[data-cmp-dialog-close-button]"};class Zo{static InstanceId=0;UI={};#V={firstElement:null,lastElement:null,focusBackToElement:null};constructor(e){this._noScrollClassName="no-scroll-bsdialog-"+ ++Zo.InstanceId,this.cacheUIElements(e),this._prepareEventHandlers(),this.UI.ROOT._Handler=this}set firstElement(e){this.#V.firstElement=e}get firstElement(){return this.#V.firstElement}set lastElement(e){this.#V.lastElement=e}get lastElement(){return this.#V.lastElement}get contentRoot(){return this.UI.CONTENT_ROOT}focus(e){e&&("INPUT"==e.tagName?Zs.focusInput(e):e&&e.focus&&e.focus())}cacheUIElements({element:e}){this.UI.ROOT=e;for(const e in Qo)if("ROOT"!=e&&Object.hasOwnProperty.call(Qo,e)){const t=this.UI.ROOT.querySelectorAll(Qo[e]);t.length?this.UI[e]=1==t.length?t[0]:t:this.UI[e]=null}}_prepareEventHandlers(){this._escKeyDown=this._escKeyDown.bind(this),this._closeBtnClick=this._closeBtnClick.bind(this),this._TabKeyDownListener=this._TabKeyDownListener.bind(this),oi.addEventForChild(this.UI.ROOT,"click",Qo.CLOSE_BUTTON,this._closeBtnClick)}_removeCloseHandlers(){document.removeEventListener("keydown",this._escKeyDown),this.UI.ROOT.removeEventListener("keydown",this._TabKeyDownListener)}_addCloseHandlers(){document.addEventListener("keydown",this._escKeyDown),this.UI.ROOT.addEventListener("keydown",this._TabKeyDownListener)}setLabelledby(e){this.UI.ROOT.setAttribute("aria-labelledby",e)}_TabKeyDownListener(e){if(!(e instanceof KeyboardEvent))return;const t=e.target;"TAB"==Xo.getKeyID(e)&&(e.shiftKey?t==this.firstElement&&(e.preventDefault(),this.focus(this.lastElement)):t==this.lastElement&&(e.preventDefault(),this.focus(this.firstElement)))}_escKeyDown(e){e.altKey||e.ctrlKey||e.shiftKey||"Escape"!=e.key||this.close(e).catch((()=>{}))}_closeBtnClick(e){this.close(e).catch((()=>{}))}on(e,...t){this.UI.ROOT.addEventListener(e,...t)}off(e,...t){t.length?this.UI.ROOT.removeEventListener(e,...t):this.UI.ROOT.removeEventListener(e)}_fireEvent(e,t){const i=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});return this.UI.ROOT.dispatchEvent(i),i}async open(e={}){const{data:t,focusBackToElement:i}=e;this.#V.focusBackToElement=i;return this._fireEvent("dialog-opening",t).defaultPrevented?Promise.reject(t):(this.showModal(t),Promise.resolve(t))}showModal(e){document.body.classList.add(this._noScrollClassName),this.UI.ROOT.classList.add("show"),this.UI.ROOT.setAttribute("aria-hidden","false"),this._addCloseHandlers(),this._fireEvent("dialog-opened",e)}hideModal(e){this.UI.ROOT.classList.remove("show"),this.UI.ROOT.setAttribute("aria-hidden","true"),this.#V.focusBackToElement&&this.focus(this.#V.focusBackToElement),document.body.classList.remove(this._noScrollClassName),this._removeCloseHandlers(),this._fireEvent("dialog-closed",e)}async close(e){return this._fireEvent("dialog-closing",e).defaultPrevented?Promise.reject(e):(this.hideModal(e),this.#V.focusBackToElement=null,Promise.resolve(e))}async show({data:e,focusBackToElement:t}){try{return await this.open({data:e,focusBackToElement:t}),new Promise((t=>{const i=s=>{this.off("dialog-closed",i),t({event:s,data:e})};this.on("dialog-closed",i)}))}catch(t){return Promise.reject({error:t,data:e})}}}class er{dialog;confirm;CloseConfirmed=!1;constructor(e,t,i){this.dialog=e._Handler,this.dialog.UI.ROOT.classList.add(i),this.confirm=t._Handler,this.init()}init(){this.dialog.on("dialog-closing",this._onDialogClosing.bind(this)),this.dialog.on("dialog-opened",this._onDialogOpened.bind(this)),this.confirm.on("dialog-closed",this._onConfirmDialogClosed.bind(this));const e=this.confirm.contentRoot.querySelectorAll(".cmp-button");this.confirm.firstElement=e[0],this.confirm.lastElement=e[1]}_onDialogClosing(e){this.CloseConfirmed||(e.preventDefault(),this.confirm.open({focusBackToElement:e.detail?.target}),this.confirm.focus(this.confirm.firstElement))}_onDialogOpened(){this.CloseConfirmed=!1}_onConfirmDialogClosed(e){const t=e.detail?.target?.value;this.CloseConfirmed="yes"===t,this.CloseConfirmed&&this.dialog.close()}}yt(Zo,{selectors:{self:Qo.ROOT}});class tr{constructor(e){this.ui={form:e},this.AllFieldsValid=!0,this._attachEvents()}get FieldSelector(){return".cmp-form-text textarea[data-pattern]"}_attachEvents(){}ShowErrorMessage(e){let t=this.getErrorMessage(e);eo.Show(e,t||"",e.parentElement),e.reportValidity()}getErrorMessage(e){let t=e?.parentElement?.dataset?.cmpConstraintMessage;return t||""}HideErrorMessage(e){eo.Hide(e,e.parentElement)}_isValidValue(e){if(0==e.value.length)return!0;const t=e.value.replaceAll(/\n/g,"");try{return new RegExp(e.dataset.pattern).test(t)}catch{}return!1}Validate(){let e=this.ui.form.querySelectorAll(this.FieldSelector),t=!0;this.AllFieldsValid=!0;for(let i=0;i<e.length;i++){const s=e[i];this.HideErrorMessage(s),this._isValidValue(s)||(t=!1,this.ShowErrorMessage(s))}return this.AllFieldsValid=t,this.AllFieldsValid}}class ir extends tr{get FieldSelector(){return".cmp-form-text input[type=email][data-blocked-domains]:not(:invalid)"}get blockedDomains(){const e=this.ui.form.querySelectorAll(this.FieldSelector)[0].dataset?.blockedDomains||"";return e?e.split(",").map((e=>e.trim())):[]}getErrorMessage(e){const t=e?.parentElement?.dataset?.cmpConstraintMessage;return t||" "}_isValidValue(e){const t=e.value.split("@"),i=t.length>1?t[1]:"";return i&&!this.blockedDomains.includes(i)}}class sr{constructor(e){this.ui={form:e},this._attachEvents(),this.AllDropdownsValid=!0}_attachEvents(){this.ui.form.querySelectorAll(".cmp-form-options--drop-down select[required]").forEach((e=>{e.addEventListener("change",(t=>{this.HideErrorMessage(t.target),e.classList.remove("invalid")})),e.addEventListener("invalid",(e=>this._onInvalid(e)))})),this.ui.form.addEventListener("reset",(()=>{this.ui.form.querySelectorAll(".cmp-form-options--drop-down select[required]").forEach((e=>{this.HideErrorMessage(e),e.classList.remove("invalid")}))}))}ShowErrorMessage(e){let t=e.parentElement?.parentElement?.parentElement;if(!t)return;let i=t.querySelector(".err-msg"),s=t.dataset.cmpRequiredMessage||"";if(!i)return;const n=i.querySelector("span.msg");for(;n.firstChild;)n.removeChild(n.lastChild);n.appendChild(document.createTextNode(s)),i.classList.add("show"),i.setAttribute("aria-hidden",!1),e.setAttribute("aria-invalid",!0),e.setCustomValidity(s),e.setAttribute("aria-label",s),e.reportValidity()}_onInvalid(e){return e.preventDefault(),!0}HideErrorMessage(e){let t=e.parentElement?.parentElement?.parentElement;if(!t)return;let i=t.querySelector(".err-msg.show");i&&(i.setAttribute("aria-hidden",!0),i.classList.remove("show"),e.removeAttribute("aria-invalid"),e.setCustomValidity(""),e.removeAttribute("aria-label"))}_isDropdownDefaultValue(e){return"default"==e.value}Validate(){let e=this.ui.form.querySelectorAll(".cmp-form-options--drop-down select[required]"),t=!0;this.AllDropdownsValid=!0;for(let i=0;i<e.length;i++){const s=e[i];s.classList.remove("invalid"),this.HideErrorMessage(s),(s.selectedIndex<0||this._isDropdownDefaultValue(s))&&(t=!1,this.ShowErrorMessage(s),s.classList.add("invalid"))}return this.AllDropdownsValid=t,this.AllDropdownsValid}}class nr extends ri{static WidthIdCounter=0;constructor(e){super(),this.Config=this._getConfig(e),this.IsCaptchaEnabled=!1,this.CaptchaAPI=null,this.WidgetId=null,this.ui={form:e,widgetDiv:null},this.CaptchaToken="",this.IsPeopleContactForm="peopleContact"==e.dataset.formType,this._attachEvents()}_getConfig(e){return Object.freeze({Enabled:"true"===e.dataset.captchaEnabled,Version:e.dataset.captchaVersion,SiteKey:e.dataset.captchaSitekey,Script:e.dataset.captchaScript,Size:e.dataset.captchaSize||"invisible"})}Execute(e,t){if(!this.IsCaptchaEnabled)return void setTimeout((()=>e("")),16);if("V2"==this.Config.Version)return this.cb=e,this.CaptchaAPI.execute(this.WidgetId);(t?this.CaptchaAPI.execute(this.Config.SiteKey,{action:t}):this.CaptchaAPI.execute(this.Config.SiteKey)).then((t=>{this.CaptchaToken=t;let i=document.getElementById("g-recaptcha-response-v3-field");i&&(i.value=t),setTimeout((()=>e(t)),16)}))}_attachEvents(){if(!wn())return!0;let e=this.ui.form.querySelector(".google-captcha-trigger-script");if(document.body.classList.contains("google-captcha-enabled")&&(this.IsCaptchaEnabled=this.Config.Enabled,this.LoadCaptcha()),e){let e,t=0,i=20;this.IsPeopleContactForm?e=setInterval((()=>{if(t>=i)return void clearInterval(e);t++;let s=this.ui.form.querySelector(".google-captcha-trigger-script");s&&"text/javascript"==s.type&&(this.IsCaptchaEnabled=this.Config.Enabled,this.LoadCaptcha(),clearInterval(e))}),1e3):document.body.addEventListener("onetrust-google-recaptcha-selected",(()=>{this.IsCaptchaEnabled=this.Config.Enabled,this.LoadCaptcha()}))}else this.IsCaptchaEnabled=this.Config.Enabled,this.LoadCaptcha();this.ui.form.addEventListener("form-submit-success",(()=>this._reset())),this.ui.form.addEventListener("form-submit-error",(()=>this._reset()))}_render(e){this.WidgetId=this.CaptchaAPI.render(e,{sitekey:this.Config.SiteKey,size:this.Config.Size,callback:e=>{this._callback(e)},"expired-callback":e=>{this._captchaExpired(e)}})}_callback(e){this.CaptchaToken=e,this.cb&&setTimeout((()=>{this.cb(e),delete this.cb}),16)}_captchaExpired(){this._reset()}_reset(){this.CaptchaToken="",this.IsCaptchaEnabled&&this.CaptchaAPI&&"V2"==this.Config.Version&&(this.CaptchaAPI.reset(this.WidgetId),this.#$())}_createScriptElement(e){let t=document.createElement("script");if("V3"==this.Config.Version){let e=new URL(this.Config.Script);e.searchParams.set("render",this.Config.SiteKey),t.src=e.toString()}else t.src=this.Config.Script;return t.onload=e,t.defer=t.async=!0,t}_onCaptchaScriptLoad(){this.CaptchaAPI=grecaptcha||window.grecaptcha,this.CaptchaAPI&&this.CaptchaAPI.ready&&this.CaptchaAPI.ready((()=>{this.InitCaptcha()}))}LoadCaptcha(){if(this.IsCaptchaEnabled&&!this.CaptchaAPI){let e=this._createScriptElement((()=>this._onCaptchaScriptLoad()));document.body.append(e)}}_createWidgetDiv(){let e=document.createElement("div");return e.id="captcha-widget-"+ ++nr.WidthIdCounter,this.ui.widgetDiv=e,this.ui.form.appendChild(e),e}InitCaptcha(){if("V3"==this.Config.Version)return;requestAnimationFrame((()=>this.#$()));let e=this._createWidgetDiv();this._render(e)}#$(){this.#B()}#B(){const e=new MutationObserver((()=>{const t=document.querySelector('iframe[src^="https://www.google.com/recaptcha"][src*="bframe"]');if(t){e.disconnect();const i=t.parentNode?.parentNode?.firstChild;i&&i.addEventListener&&i.addEventListener("click",(e=>{this.#G(e)}))}}));e.observe(document.body,{childList:!0,subtree:!0})}#G(){const e=this.CaptchaAPI.getResponse().length;this.dispatch("challenge-closed",e)}}const or="/rfpservice_qa/RFPReconnectService.svc/ModifyRFP";let rr,ar;class lr{constructor(){this.ValueChangedInFirstStepChecker=function(){return!1}}static async getAuthToken(){try{const e=await fetch("/bin/gethmactokengenereator?_="+(new Date).getTime(),{method:"GET"});return(await e.json()).token}catch(e){}}static async getFormData(e,t){let i=new FormData(e);const s=Jn(e);let n={};n.FirstName=Gn(i.get(s.first_name)),n.LastName=Gn(i.get(s.last_name)),n.Email=Gn(i.get(s.email_address)),n.Phone=Gn(i.get(s.phone)),n.Company=Gn(i.get(s.company)),n.JobTitle=Gn(i.get(s.role)),n.Industry=Gn(i.get(s.industry)),n.AlreadyClient="yes"===i.get(s.iskpmgclient).toLowerCase();let o=Gn(i.get(s.country)),r=e.querySelector("[name='"+s.country+"']"),a=r.options[r.selectedIndex].text;return n.LocationEnglishName=a,n.LocationCode=o,n.Territory="",n.RFPPageURL="External Source",n.CountryId=e.dataset.countryId?e.dataset.countryId:"",n.OriginatingSiteURL="/"+Pn()+"/"+Nn(),n["overview-privacy"]="on",n.AnalyticId=e.dataset.analyticId?e.dataset.analyticId:"",n.Submitted_via=window.location.origin,t&&(n.CAPTCHA_VALUE=t),n}static async createRFP(e,t){const i=await lr.getFormData(e,t);let s=JSON.stringify(i),n=await lr.getAuthToken();if(!n)return e.dispatchEvent(new CustomEvent("form-continue-error",{detail:{error:"Unable to get authentication token."}})),void io(e,"Unable to get authentication token.");try{let t=await fetch("/rfpservice_qa/RFPReconnectService.svc/CreateNewRFP",{method:"POST",body:s,headers:{"Content-Type":"application/json",Accept:"application/json",AUTH_TOKEN:n}}),i=await t.json();if(200==t.status&&!i.CreateRFPResult.ErrorInfo&&i.CreateRFPResult.RFPId){let t=e.querySelector('.cmp-form-button[type="button"]'),s=t.closest(".cmp-container");t.parentElement.remove(),e.classList.add("show-second-step"),ar=i.CreateRFPResult.RFPId,lr.ValueChangedInFirstStepChecker=lr.formDataChangedInFirstStep(s),_t(e,e.dataset.formType,{step2:!0})}else e.dispatchEvent(new CustomEvent("form-continue-error",{detail:{error:i.CreateRFPResult.ErrorInfo.ErrorMessage}})),io(e,i.CreateRFPResult.ErrorInfo.ErrorMessage)}catch(t){e.dispatchEvent(new CustomEvent("form-continue-error",{detail:{error:t}})),io(e,t)}}static formDataChangedInFirstStep(e){let t=!1,i=e.querySelectorAll("input,select");return i.forEach((e=>e.addEventListener("change",(()=>t=!0)))),i=e.querySelectorAll("input"),i.forEach((e=>e.addEventListener("input",(()=>t=!0)))),()=>t}static async updateRFPInfo(e,t){let i=await lr.getAuthToken();if(!i)return t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"Unable to get authentication token.");try{const s=[],n=await lr.getFormData(t);for(const e in n)n.hasOwnProperty(e)&&s.push({Key:e,Value:n[e]});let o={RFPId:e,UpdatedFields:s},r=await fetch(or,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Accept:"application/json",AUTH_TOKEN:i}}),a=await r.json();200!=r.status||a.Result.ErrorInfo?(t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:a.Result.ErrorInfo.ErrorMessage}})),io(t,a.Result.ErrorInfo.ErrorMessage)):lr.updateRFPMessage(e,t)}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}static async updateRFPMessage(e,t){let i=Gn(t[Jn(t).message].value).replace(/<br>/g,"\n"),s=await lr.getAuthToken();if(!s)return t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"Unable to get authentication token.");try{const n=[];n.push({Key:"Message",Value:i});let o={RFPId:e,UpdatedFields:n},r=await fetch(or,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Accept:"application/json",AUTH_TOKEN:s}}),a=await r.json();200!=r.status||a.Result.ErrorInfo?(t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:a.Result.ErrorInfo.ErrorMessage}})),io(t,a.Result.ErrorInfo.ErrorMessage)):lr.getRFPDetails(e,t)}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}static async handleFileUpload(e,t,i,s){let n=e.name.replace(/[^\w\s]/gi,""),o=new FormData;o.append(n,e);let r=await lr.getAuthToken();if(!r)return s&&s({},e,t,i),t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"File Upload error - Unable to get authentication token.");try{200==(await fetch("/rfpservice_qa/rfpupload.axd",{method:"POST",body:o,cache:"no-store",headers:{AUTH_TOKEN:r,RFPId:ar}})).status?(t.querySelector("#"+i+" .file-upload__cancel-button").classList.add("active"),t.querySelector("#"+i+" .file-upload__loading").remove()):(t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"File Upload error - "+e.name}})),io(t,"File Upload error - "+e.name))}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}static async handleFileRemove(e,t,i){let s=await lr.getAuthToken();if(!s)return t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"Unable to get authentication token.");try{200==(await fetch("/rfpservice_qa/deleteupload.axd",{method:"POST",cache:"no-store",headers:{AUTH_TOKEN:s,RFPId:ar,UploadedFileName:e.name}})).status?t.querySelector("#"+i).remove():(t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"File Upload error - "+e.name}})),io(t,"File Upload error - "+e.name))}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}static async handleSubmitRFP(e,t){let i=await lr.getAuthToken();if(!i)return t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"Unable to get authentication token.");try{let s={RFPId:e},n=await fetch("/rfpservice_qa/RFPReconnectService.svc/SubmitRFP",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Accept:"application/json",AUTH_TOKEN:i}}),o=await n.json();if(200==n.status&&!o.Result.ErrorInfo&&o.Result.ReferenceNo){let e=o.Result.ReferenceNo;localStorage.setItem("RFPRefNo",e),t.dispatchEvent(new CustomEvent("form-submit-success",{detail:{response:n}})),zn(rr),document.querySelector("body").classList.remove("loading")}else t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:o.Result.ErrorInfo.ErrorMessage}})),io(t,o.Result.ErrorInfo.ErrorMessage)}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}static getFieldNameForRFPName(e,t){switch(e){case"FirstName":return t.first_name;case"LastName":return t.last_name;case"Email":return t.email_address;case"Phone":return t.phone;case"JobTitle":return t.role;case"Company":return t.company;case"Industry":return t.industry;case"Location":return t.country;case"AlreadyClient":return t.iskpmgclient;case"Message":return t.message;case"Attachments":return t.attachment}}static async addLabelValuesToResponse(e,t){let i=e,s=t;const n=Jn(t);return i.forEach((e=>{const t=this.getFieldNameForRFPName(e.Key,n);if(!t)return;const i=s.querySelector(`[name="${t}"]`);if(!i)return;const o=this.getVisibleLabelForFormField(i);o&&(e.Text=o)})),i}static getVisibleLabelForFormField(e){let t;if(t="checkbox"==e.type||"radio"==e.type?e.parentElement.closest(".cmp-form-options")?.querySelector("legend"):"SELECT"==e.tagName?e.parentElement.closest(".cmp-form-options")?.querySelector("label"):"file"==e.type?e.parentElement.closest(".cmp-form-fileupload")?.querySelector("label"):e.parentElement.closest('[class^="cmp-form-"]')?.querySelector("label"),t)return t.querySelectorAll("sup,p,.cmp-digital-form__mandatory--icon").forEach((e=>e.remove())),t.textContent.replace(/([\n\t])/gm,"").replace(/(\d*)\/(\d*)/gm,"").trim()}static async getRFPDetails(e,t){let i=await lr.getAuthToken();if(!i)return t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:"Unable to get authentication token."}})),void io(t,"Unable to get authentication token.");try{let s=`/rfpservice_qa/RFPReconnectService.svc/GetRFPDetail/${encodeURIComponent(e)}?_=${(new Date).getTime()}`,n=await fetch(s,{method:"GET",headers:{AUTH_TOKEN:i}}),o=await n.json();if(200==n.status&&!o.ResultGetRFP.ErrorInfo&&o.ResultGetRFP.RFPData){let i=o.ResultGetRFP.RFPData,s=await lr.addLabelValuesToResponse(i,t);s&&(localStorage.setItem("RFPInformation",JSON.stringify(s)),lr.handleSubmitRFP(e,t))}else t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:o.ResultGetRFP.ErrorInfo.ErrorMessage}})),io(t,o.ResultGetRFP.ErrorInfo.ErrorMessage)}catch(e){t.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}})),io(t,e)}}}class cr{constructor(e){this.formElement=e,this.is_RFPForm=e.classList.contains("cmp-digital-form__rfp"),this.FormCaptcha=new nr(this.formElement),this.DropdownValidator=new sr(e),this.TextAreaPatternValidator=new tr(e),this.BlockedEamilProvider=new ir(e),this._attachEvents()}CheckValidityRadioFields(e){let t=!0,i=!1,s=!1;for(let t=0;t<e.length;t++){const n=e[t];if(n.required&&(i=!0),n.reportValidity(),n.checked&&(s=!0),i&&s)break}return i&&(t=!1),s&&(t=!0),t}CheckValidityForFieldList(e=[]){let t=this.formElement;return e.reduce(((e,i)=>{let s=!0;const n=t[i];return n?(s=n instanceof RadioNodeList?this.CheckValidityRadioFields(n):n.reportValidity(),e&&s):e&&s}),!0)}_attachEvents(){this.formElement.addEventListener("submit",(e=>{e.preventDefault(),this.handleSubmit(e)}));let e=this.formElement.querySelector('[type="submit"]');if(e&&e.addEventListener("click",(()=>{this.DropdownValidator.Validate(),this.TextAreaPatternValidator.Validate(),!this.is_RFPForm&&this.BlockedEamilProvider.Validate(),setTimeout((()=>{this.formElement.dispatchEvent(new CustomEvent("focus-invalid-elements"))}),100),setTimeout((()=>Ot(this.formElement)),200)})),this.is_RFPForm){let e=this.formElement.querySelector('.cmp-form-button[type="button"]');e&&e.addEventListener("click",this.handleRFPFormContinueClick.bind(this))}}getFieldsToValidateForRFP(){let e=this.formElement.querySelector('.cmp-form-button[type="button"]');if(!e)return[];let t=e.closest(".cmp-container");if(!t)return[];let i=Object.create(null);return t.querySelectorAll('input[required]:not([type="hidden"]),select[required],textarea[required]').forEach((e=>e.name&&(i[e.name]=!0))),Object.keys(i)}handleRFPFormContinueClick(){let e=this.getFieldsToValidateForRFP();return this.DropdownValidator.Validate(),this.DropdownValidator.AllDropdownsValid&&this.CheckValidityForFieldList(e)?(no(this.formElement,!1),!wn()||(rr=this.formElement.dataset.redirectValue,void(this.FormCaptcha.IsCaptchaEnabled?this.FormCaptcha.Execute(lr.createRFP.bind(void 0,this.formElement),this.formElement.dataset.action):lr.createRFP(this.formElement)))):(setTimeout((()=>{this.formElement.dispatchEvent(new CustomEvent("focus-invalid-elements"),{detail:{fields:e}})}),100),void setTimeout((()=>Ot(this.formElement,e)),200))}Validate(){return!!this.DropdownValidator.AllDropdownsValid&&!!this.TextAreaPatternValidator.AllFieldsValid}async handleSubmit(){if(this.Validate()){if(so(this.formElement,!1),!wn())return!0;this.is_RFPForm?(document.querySelector("body").classList.add("loading"),lr.ValueChangedInFirstStepChecker()?lr.updateRFPInfo(ar,this.formElement):lr.updateRFPMessage(ar,this.formElement)):this.FormCaptcha.IsCaptchaEnabled?this.FormCaptcha.Execute((e=>{this.handleFormSubmit(this.formElement,e)}),this.formElement.dataset.action):this.handleFormSubmit(this.formElement)}}async handleFormSubmit(e){const t=await async function(e,t){let i;const s=new FormData(e),n={};s.forEach((function(e,t){n[t]=e.replaceAll(/\n/g,"<br>")}));let o=JSON.stringify(n);try{i=await fetch(e.dataset.action,{method:e.dataset.method||"POST",headers:{"Content-Type":"application/json"},body:o})}catch(e){t&&t(e)}return i}(e,(t=>{e.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:t,form:e}})),io(e,"Failed to Submit Form:"+t)}));if(t)if(200==t.status)this._afterSubmitSuccess(t);else{const e=t.statusText?t.status+":"+t.statusText:"status:"+t.status;this._afterSubmitError(e)}}_afterSubmitError(e){this.formElement.dispatchEvent(new CustomEvent("form-submit-error",{detail:{err:e}})),io(this.formElement,e)}_afterSubmitSuccess(e){const t=this.formElement;t.dataset.redirect&&t.dataset.redirectValue?zn(t.dataset.redirectValue,100):to(t);try{t.dispatchEvent(new CustomEvent("form-submit-success",{detail:{data:e}}))}catch{}}}const{DebugUtils:dr}=yn,ur=new function(){const e=new dr({constructorName:"enableCharacterCount",origin:"form-text"});let t;this.init=e=>{!t&&(t=oo(e.parentElement)),e.addEventListener("keyup",this.onKeyUp,!0),e.addEventListener("focus",this.onFocus,!0)},this.onKeyUp=t=>{const{target:n,key:o}=t,{maxLength:r}=n;if(r>0){const t=n.value.length,a=r-t;e.log("onKeyUp",n.name,o),s(n,t,r,a)&&function(t){let i;switch(t){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":i=!1;break;default:i=!0}return e.log("NotAnArrowKey",i),i}(o)&&i(n,r,a)}},this.onFocus=t=>{const{target:n}=t,{maxLength:o}=n;if(o>0){e.log("onFocus",n.name);const t=n.value.length,r=o-t;s(n,t,o,r)&&i(n,o,r)}};const i=(i,s,n)=>{const{dataset:o}=i;s>0&&(t.Update(""),setTimeout((()=>{const i=`${n} ${o.characterCountLabel}`;e.log("announceCharCount",i),t.Update(i)}),1e3))};function s(t,i,s,n){const o=t.dataset.charCountWarningThreshold||3,r=n/s*100<=10||n<=o;return e.log("isThresholdReached",r),r}};var hr=ur;let mr="cmp",pr="formText",fr={self:'[data-cmp-is="'+pr+'"]'},gr={constraintMessage:"",requiredMessage:""};function yr(e){let t=e.dataset,i=[],s=pr;s=s.charAt(0).toUpperCase()+s.slice(1);let n=["is","hook"+s];for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let s=t[e];0===e.indexOf(mr)&&(e=e.slice(3),e=e.charAt(0).toLowerCase()+e.substring(1),-1===n.indexOf(e)&&(i[e]=s))}return i}class Er{constructor(e){e.element&&e.element.removeAttribute("data-cmp-is"),this._elements={},this._cacheElements(e.element),this._setupProperties(e.options),this._elements.input.addEventListener("invalid",this._onInvalid.bind(this)),this._elements.input&&(this._elements.input._formText=this),this._elements.input.addEventListener("input",this._onInput.bind(this)),this._handleCharCountUpdate()}_handleCharCountUpdate(){!this._elements.input.disabled&&this._elements.input.maxLength>0&&(hr.init(this._elements.input),this._elements.input.addEventListener("input",(e=>{this._setCharCount(e.target.value.length)})),this._setCharCount(this._elements.input.value.length))}_setCharCount(e){const t=this._elements.self.querySelector(".char-count-used");if(t){for(;t.firstChild;)t.removeChild(t.lastChild);t.appendChild(document.createTextNode(e))}}_onInvalid(e){let t="";const i=e.target;i.classList.add("invalid"),i.setAttribute("aria-invalid",!0),e.preventDefault(),i.validity.typeMismatch||i.validity.patternMismatch||i.validity.tooShort?this._properties.constraintMessage&&(t=this._properties.constraintMessage,this._showErrorMessage(t)):i.validity.valueMissing?this._properties.requiredMessage&&(t=this._properties.requiredMessage,this._showErrorMessage(t)):i.validity.customError&&(t=i.validationMessage," "!==t&&this._showErrorMessage(t)),i.setAttribute("aria-label",t),t&&i.setCustomValidity(t)}_hideErrorMessage(){let e=this._elements.self.querySelector(".err-msg.show");if(!e)return;let t=e.querySelector("span.msg");for(;t.firstChild;)t.removeChild(t.lastChild);e.setAttribute("aria-hidden",!0),e.classList.remove("show")}_showErrorMessage(e){let t=this._elements.self.querySelector(".err-msg");if(!t)return;let i=t.querySelector("span.msg");for(;i.firstChild;)i.removeChild(i.lastChild);i.appendChild(document.createTextNode(e)),t.classList.add("show"),t.setAttribute("aria-hidden",!1)}_onInput(e){this._reset()}_reset(){const e=this._elements.input;e.setCustomValidity(""),e.classList.remove("invalid"),e.removeAttribute("aria-invalid"),e.removeAttribute("aria-label"),this._hideErrorMessage()}_cacheElements(e){this._elements.self=e;let t=this._elements.self.querySelectorAll("[data-cmp-hook-form-text]");for(let e=0;e<t.length;e++){let i=t[e],s=pr;s=s.charAt(0).toUpperCase()+s.slice(1);let n=i.dataset[mr+"Hook"+s];this._elements[n]=i}}_setupProperties(e){this._properties={};for(let t in gr)if(Object.prototype.hasOwnProperty.call(gr,t)){let i=gr[t];e&&null!=e[t]?i&&"function"==typeof i.transform?this._properties[t]=i.transform(e[t]):this._properties[t]=e[t]:this._properties[t]=gr[t].default}}}function vr(e){let t=e.querySelectorAll(fr.self);const i=[];for(let e=0;e<t.length;e++)i.push(new Er({element:t[e],options:yr(t[e])}));let s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=document.querySelector("body");new s((function(e){e.forEach((function(e){let t=[].slice.call(e.addedNodes);t.length>0&&t.forEach((function(e){if(e.querySelectorAll){[].slice.call(e.querySelectorAll(fr.self)).forEach((function(e){i.push(new Er({element:e,options:yr(e)}))}))}}))}))})).observe(n,{subtree:!0,childList:!0,characterData:!0}),e.addEventListener("reset",(()=>i.forEach((e=>{e._reset(),e._setCharCount(0)}))))}class br{constructor(e,t){this.form=t,this.uploadedFiles=t._uploadedFiles=[],this.FormConfigs={...t.dataset},this.ui=this.getUI(e),this.attachEvents()}getUI(e){return{root:e,fileInput:e.querySelector('input[type="file"]'),uploadContainer:e.querySelector("#file-upload-container"),fileList:e.querySelector("#file-list"),errorMessage:e.querySelector(".err-msg")}}attachEvents(){this._onDragOver=this._onDragOver.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this._onDrop=this._onDrop.bind(this),this.ui.fileInput.addEventListener("change",(e=>{e.target.setCustomValidity(""),this.haveFiles(e.target.files)})),this.ui.uploadContainer.addEventListener("click",(()=>this.ui.fileInput.click())),this.ui.uploadContainer.addEventListener("dragover",this._onDragOver),this.ui.uploadContainer.addEventListener("dragleave",this._onDragLeave),this.ui.uploadContainer.addEventListener("drop",this._onDrop),this._handleRequiredFieldValidity()}_handleRequiredFieldValidity(){this.ui.fileInput.required&&this.ui.fileInput.addEventListener("invalid",(e=>{e.target.setCustomValidity(""),e.preventDefault(),this.ui.uploadContainer.classList.add("invalid"),e.target.validity.valueMissing&&this.showErrorMessage(this.ui.uploadContainer.dataset.requiredMessage||"")}))}_onDragOver(e){e.preventDefault(),this.ui.uploadContainer.classList.add("drag-over")}_onDragLeave(e){e.preventDefault(),this.ui.uploadContainer.classList.remove("drag-over")}_onDrop(e){e.preventDefault(),this.ui.uploadContainer.classList.remove("drag-over"),this.haveFiles(e.dataTransfer.files)}_isValidFile(e){const t=this.ui.uploadContainer.dataset.maxFiles||5,i=this.ui.uploadContainer.dataset.maxFileSize||15;if(this.uploadedFiles.length>=t)return At("|file number"),void this.showErrorMessage(this.ui.uploadContainer.dataset.maxFilesError||"Maximum number of files reached!");if(this.isDuplicateFile(e))return At("|duplicate"),this.showErrorMessage(this.ui.uploadContainer.dataset.duplicateError||"No duplicates allowed."),!1;if(!this.isSupportedFileType(e))return At("|file type"),this.showErrorMessage(this.ui.uploadContainer.dataset.invalidTypeError||"Invalid file! Supported file types: .doc, .docx, .mpp,.mppx, .pdf, .ppt, .pptx, .xls, .xlsx, .zip, .msg."),!1;return this.uploadedFiles.reduce(((e,{size:t})=>e+t),e.size)/1048576>i?(At("|file size"),this.showErrorMessage(this.ui.uploadContainer.dataset.maxSizeError||`File size exceeds the limit of ${i}MB.`),!1):(this.hideErrorMessage(),!0)}haveFiles(e){this.hideErrorMessage();for(const t of e){let e=this._isValidFile(t);if(!1!==e){if(!e)return;this._addAFile(t)}}}showErrorMessage(e){this.ui.uploadContainer.classList.add("invalid");let t=this.ui.errorMessage;const i=t.querySelector("span.msg");for(;i.firstChild;)i.removeChild(i.lastChild);i.appendChild(document.createTextNode(e)),t.classList.add("show"),t.setAttribute("aria-hidden",!1)}hideErrorMessage(){this.ui.uploadContainer.classList.remove("invalid");let e=this.ui.errorMessage;e&&(e.setAttribute("aria-hidden",!0),e.classList.remove("show"))}_addAFile(e){this.uploadedFiles.push(e);const t=`uploaded-file-${Math.floor(1e5*Math.random())}`;lr.handleFileUpload(e,this.form,t);try{!function(e){let t=St.rfp;Ct({event:"cmp:formFileUpdate",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form_upload file`,formInfo:{formStep:2,fileUploaded:{format:Object.keys(e.reduce(((e,t)=>(e[t.name.split(".").pop()]=!0,e)),{})),numFiles:e.length}}}}})}(this.uploadedFiles)}catch{}const i=this._getNewFileUI(e,t);this.ui.fileList.appendChild(i)}_getNewFileUI(e,t){const i=document.createElement("li"),s=document.createElement("span"),n=document.createElement("span"),o=document.createElement("button"),r=document.createElement("span");return s.appendChild(document.createTextNode("description")),s.classList.add("file-upload__icon"),n.appendChild(document.createTextNode(e.name)),n.classList.add("file-upload__file-name"),r.classList.add("file-upload__loading"),o.setAttribute("type","button"),o.appendChild(document.createTextNode("clear")),o.classList.add("file-upload__cancel-button"),i.setAttribute("id",t),i.appendChild(s),i.appendChild(n),i.appendChild(r),i.appendChild(o),o.addEventListener("click",(()=>{this._onRemoveFileClick(e,t)})),i}_onRemoveFileClick(e,t){this.hideErrorMessage();for(let t=this.uploadedFiles.length-1;t>=0;t--){const i=this.uploadedFiles[t];i.name==e.name&&i.size==e.size&&this.uploadedFiles.splice(t,1)}lr.handleFileRemove(e,this.form,t),function(e){let t=St.rfp;Ct({event:"cmp:formFileUpdate",eventInfo:{path:`component.${t.path}`},component:{[t.path]:{"dc:title":`${t.title} form_delete file`,formInfo:{formStep:2,fileUploaded:{format:Object.keys(e.reduce(((e,t)=>(e[t.name.split(".").pop()]=!0,e)),{})),numFiles:e.length}}}}})}(this.uploadedFiles)}isSupportedFileType(e){const t=this.ui.uploadContainer.dataset.allowedExtensions?this.ui.uploadContainer.dataset.allowedExtensions.split():[".doc",".docx",".mpp",".mppx",".pdf",".ppt",".pptx",".xls",".xlsx",".zip",".msg"],i=e.name,s=i.substring(i.lastIndexOf(".")).toLowerCase();return t.includes(s)}isDuplicateFile(e){return this.uploadedFiles.some((t=>t.name===e.name&&t.size===e.size))}}const Sr=[];if(yt((function(e){let t=e.element;var i;if(Zn(t),Bn.Watch(t),vr(t),Wn(t),Yn(t),new cr(t),(i=t).querySelectorAll(".fileupload").forEach((e=>{let t=new br(e,i);Sr.push(t)})),Qn(t),_o(t),"peopleContact"!=t.dataset.formType&&(_t(t,t.dataset.formType),setTimeout((()=>t.dispatchEvent(new CustomEvent("custom-event-form-start"))))),"rfp"===t.dataset.formType){let e=t.querySelector(".container");e&&e.classList.add("show")}else Lt(t,t.dataset.formType);let s=t[Jn(t).country];s&&"SELECT"===s.tagName&&Xn(s)}),{selectors:{self:'form.cmp-digital-form[data-form-type="rfp"],form.cmp-digital-form[data-form-type="peopleContact"],form.cmp-digital-form[data-form-type="contact"]'}}),document.querySelector(".cmp-digital-form")&&"rfp"===document.querySelector(".cmp-digital-form").dataset.formType){let e=document.querySelector(".cmp-digital-form").querySelector(".container");e&&e.classList.add("show")}const Cr=[{re:/&/g,ent:"&amp;"},{re:/</g,ent:"&lt;"},{re:/>/g,ent:"&gt;"},{re:/"/g,ent:"&quot;"},{re:/'/g,ent:"&#x27;"},{re:/=/g,ent:"&#61;"},{re:/javscript:/gi,ent:""},{re:/\son[a-z]*=/gi,ent:""}],Ir=[/\<script/gi,/\<style/gi];function _r(e){let t=e;return Cr.forEach((e=>{t=t.replace(e.re,e.ent),e.re.lastIndex=0})),t}var Lr=function(e,t){let i=e;for(let t=0;t<Ir.length;t++){const i=Ir[t];if(i.lastIndex=0,i.test(e))throw new Error(`Disallowed string in template: ${i}`)}try{for(const e in t){const s=_r(t[e]+"");({}).hasOwnProperty.call(t,e)&&(i=i.replace(new RegExp("\\$"+e,"g"),s))}}catch(t){return console.error(`interpolate() failed for string '${e}'. Reason:`,t),e}return i};const{DOMUtils:Tr,KeyboardUtils:Ar,FormUtils:Or}=yn,{PasswordValidator:wr}=Or.classes;class Pr{parentClass="cmp-form-password";#H={toggleShowClass:`${this.parentClass}__toggle-button--show`,toggleHideClass:`${this.parentClass}__toggle-button--hide`};setFieldState(e,t,i=" "){e.required&&!e.value||(t?(e.setCustomValidity(""),e.reportValidity()):(e.setCustomValidity(i),e.reportValidity()))}onInputToggleClick(e){const t=e.target,i=t.previousElementSibling,s=i.getAttribute("type"),n=this.#H.toggleShowClass,o=this.#H.toggleHideClass;"password"===s?(i.setAttribute("type","text"),t.ariaChecked=!0,Tr.removeClass({element:t,className:n}),Tr.addClass({element:t,className:o})):(i.setAttribute("type","password"),t.ariaChecked=!1,Tr.removeClass({element:t,className:o}),Tr.addClass({element:t,className:n}))}initEventListeners(){const e=this.UI.Input.form.querySelector('[type="submit"]');e&&e.addEventListener("click",(e=>this.onSubmitClick(e))),this.UI.Input.addEventListener("keyup",(e=>this.onKeyUp(e))),this.UI.Input.addEventListener("blur",(e=>this.onBlur(e))),this.UI.Input.addEventListener("invalid",(e=>this.onInvalid(e))),this.UI.Input.addEventListener("input",(e=>this.onInput(e))),this.UI.Toggle.addEventListener("click",(e=>this.onInputToggleClick(e))),this.UI.Input?.form.addEventListener("reset",(e=>this.onFormReset(e)))}onInvalid(){}onInput(){this.Validate(!1)}onSubmitClick(){this.Validate(!0)}onFormReset(){}onKeyUp(e){const t=Ar.getKeyID(e);"ENTER"!==t&&"TAB"!==t&&this.Validate(!1)}onBlur(){}Validate(){return!0}}class Nr extends Pr{root;#j={};UI={root:null,Input:null,Toggle:null};#K;#z;#W=!1;#Y=0;#J=500;constructor({element:e},t,i){super(),this.#K=t,this.#z=i,this.init(e)}init(e){this.UI.root=e,this.setUI(),this.initEventListeners()}get PasswordValue(){return!!this.#K&&this.#K()}get IsPasswordValid(){return!!this.#z&&this.#z()}get IsValid(){return this.#W}setUI(){this.#j={Input:`[data-${this.parentClass}-confirm-input]`,Toggle:`[data-${this.parentClass}-confirm-toggle-button]`},this.UI.Input=this.UI.root.querySelector(this.#j.Input),this.UI.Toggle=this.UI.root.querySelector(this.#j.Toggle)}onInvalid(){this.#W=!1}onKeyUp(){}onInput(){this.#Y&&(clearTimeout(this.#Y),this.#Y=0),this.#Y=setTimeout((()=>this.Validate()),this.#J)}onBlur(){this.Validate()}Validate(){if(this.#W=this.PasswordValue===this.UI.Input.value,this.#W){const e=this.UI.Input._formText;e&&e._reset()}this.setFieldState(this.UI.Input,this.#W,this.UI.Input.dataset.cmpConstraintMessage)}}yt(class extends Pr{Validator;liveRegion=null;liveRegionTemplate="";#X=!1;#Q;#W=!1;parentClass="cmp-form-password";#j={};#Z={};#ee=0;UI={root:null,Input:null,Toggle:null,PasswordValidation:null,ValidationList:[]};constructor(e={}){super(),this.init(e),this.InitConfirmPassword(e)}init({element:e}){this.UI.root=e,this.setUI(),this.#X="password-and-confirm"==this.UI.root.dataset.mode,this.#X&&(this.#Q=this.buildValidationList(),this.liveRegion=oo(e),this.#Q&&(this.Validator=new wr({config:this.#Q})),this.liveRegionTemplate=this.UI.root.dataset.passwordValidationAnouncementTemplate||""),this.initEventListeners()}onInvalid(){this.#W=!1}InitConfirmPassword(e){e.element.querySelector(this.#j.confirm)&&(this.ConfirmPassword=new Nr(e,(()=>this.UI.Input.value),(()=>this.#W)))}setUI(){this.#j={Input:`[data-${this.parentClass}-primary-input]`,Toggle:`[data-${this.parentClass}-primary-toggle-button]`,passwordValidation:`[data-${this.parentClass}-primary-validation-list]`,confirm:`[data-${this.parentClass}-confirm]`},this.#Z={listItemValidClass:`${this.parentClass}__validation-list-item--valid`,listItemInvalidClass:`${this.parentClass}__validation-list-item--invalid`},this.UI.Input=this.UI.root.querySelector(this.#j.Input),this.UI.Toggle=this.UI.root.querySelector(this.#j.Toggle),this.UI.PasswordValidation=this.UI.root.querySelector(this.#j.passwordValidation)}buildValidationList(){const e=this.UI.PasswordValidation,t={};return this.UI.ValidationList=Array.prototype.map.call(e.querySelectorAll("li"),(e=>{const{validationKind:i,validationValue:s}=e.dataset;return t[i]={value:+s},{[i]:e,validationValue:+s}})),t}onKeyUp(){}Validate(e=!1){if(!this.#X)return!0;e&&this.doDatalayerForValidation(this.UI.Input.form);const t=this.Validator.validate(this.UI.Input.value);this.#W=t.passwordIsValid,e&&t.passwordIsValid||this.AnounceStatusForScreenReader(t),this.ConfirmPassword&&this.ConfirmPassword.Validate(),requestAnimationFrame((()=>{this.setFieldState(this.UI.Input,this.#W),this.UpdateValidationList(t)}))}onFormReset(){this.resetUI()}resetUI(){this.resetHints()}resetHints(){if(!this.#X)return;const e=this.#Z.listItemValidClass,t=this.#Z.listItemInvalidClass;this.UI.PasswordValidation.querySelectorAll("li").forEach((i=>{Tr.removeClass({element:i,className:t}),Tr.removeClass({element:i,className:e})}))}doDatalayerForValidation({dataset:{formType:e}}){if("ppcPasswordReset"!==e)return;let t="",i="";this.UI.Input.value&&!this.#W&&(t="|password do not meet password criteria"),this.ConfirmPassword&&this.UI.Input.value&&!this.ConfirmPassword.IsValid&&(i=(t?",":"|")+"passwords entered do not match"),(t||i)&&Ct({event:"cmp:formError",eventInfo:{path:"component.resetPassword-"},component:{"resetPassword-":{"dc:title":"reset password",formInfo:{formError:`${t}${i}`}}}})}AnounceStatusForScreenReader(e){const{totalCount:t=0,failedCount:i}=e,s={successCount:t-i,failedCount:i,totalCount:t};t>0&&(this.#ee&&(clearTimeout(this.#ee),this.#ee=0),this.liveRegion.Update(""),this.#ee=setTimeout((()=>{const e=Lr(this.liveRegionTemplate,s);this.liveRegion.Update(e)}),1e3))}UpdateValidationList(e){const t=e=>this.UI.ValidationList.find((t=>t[e]))[e];if(e.minLength){const i=t(e.minLength.type);this.toggleListItemValidInvalidClass({valid:e.minLength.valid,listItem:i})}if(e.hasNumber){const i=t(e.hasNumber.type);this.toggleListItemValidInvalidClass({valid:e.hasNumber.valid,listItem:i})}if(e.hasUpperCase){const i=t(e.hasUpperCase.type);this.toggleListItemValidInvalidClass({valid:e.hasUpperCase.valid,listItem:i})}if(e.hasLowerCase){const i=t(e.hasLowerCase.type);this.toggleListItemValidInvalidClass({valid:e.hasLowerCase.valid,listItem:i})}}toggleListItemValidInvalidClass({valid:e,listItem:t}){const i=this.#Z.listItemValidClass,s=this.#Z.listItemInvalidClass;e?(Tr.addClass({element:t,className:i}),Tr.removeClass({element:t,className:s})):(Tr.addClass({element:t,className:s}),Tr.removeClass({element:t,className:i}))}},{selectors:{self:"[data-cmp-form-password]"}});yt(class{UI={root:null,fieldset:null,input:null,placeholder:null,ariaLabel:null,name:null,addButton:null};constructor({element:e}){this.init(e),this.initEventListeners()}init(e){this.UI.root=e,this.UI.fieldset=e.querySelector(".cmp-form-text__fieldset"),this.UI.input=e.querySelector("input"),this.UI.placeholder=this.UI.input.getAttribute("placeholder"),this.UI.ariaLabel=this.UI.input.getAttribute("aria-label"),this.UI.name=this.UI.input.getAttribute("name"),this.UI.addButton=e.querySelector(".cmp-form-text__button-add")}initEventListeners(){this.UI.addButton.addEventListener("click",(e=>{e.preventDefault(),this.addField()})),document.addEventListener("custom-field-add",(()=>{this.addField()}))}createInputField(){return`\n    <div class="cmp-form-text__multi-input-container">\n      <input \n          type="text" \n          class="cmp-form-text__text"\n          placeholder="${this.UI.placeholder}"\n          name="${this.UI.name}"\n          aria-label="${this.UI.ariaLabel}"\n      />\n      <span class="cmp-form-text__button-remove material-icons-outlined">close</span>\n    </div>`}addField(){const e=this.createInputField();this.UI.root.querySelectorAll(".cmp-form-text__text").length>9?this.UI.addButton.classList.add("hidden"):(this.UI.fieldset.insertAdjacentHTML("beforeend",e),this.initRemoveBtn())}initRemoveBtn(){this.UI.root.querySelectorAll(".cmp-form-text__button-remove").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const i=e.parentElement,s=this.UI.fieldset.querySelectorAll("input").length;i.remove(),s<=10&&this.UI.addButton.classList.contains("hidden")&&this.UI.addButton.classList.remove("hidden")}))}))}},{selectors:{self:".cmp-form-text__multi-input"}}),yt((function(e){if(localStorage.getItem("RFPRefNo")&&localStorage.getItem("RFPInformation")){const t=e.element,i=t.querySelector(e.selectors.contactSection),s=t.querySelector(e.selectors.requestSection),n=localStorage.getItem("RFPRefNo");try{Lt(t,"rfp",{rfpid:n})}catch(e){console.warn("HandleEventFormSubmit",e)}const o=JSON.parse(localStorage.getItem("RFPInformation"));let r;t.querySelector(e.selectors.refNoContainer).textContent=n,i.innerHTML="",s.innerHTML="",o.forEach((e=>{if(e.Value){if("FirstName"===e.Key&&(r=e.Value),"LastName"===e.Key&&(r+=" "+e.Value),"AlreadyClient"===e.Key&&(e.Value="True"===e.Value?"Yes":"No"),"RFPPageURL"===e.Key)return;const t=document.createElement("div");t.classList.add("cmp-rfp-submission__info");const n=document.createElement("span");if(n.classList.add("label"),n.textContent=e.Text?e.Text+":  ":e.Key+":  ",t.appendChild(n),"Attachments"===e.Key){const i=document.createElement("ul");i.classList.add("cmp-rfp-submission__file-list");e.Value.split(";").map((e=>{const t=e.indexOf("#");return-1!==t?e.substring(0,t):e})).forEach((e=>{const s=document.createElement("li");s.textContent=e,i.appendChild(s),t.appendChild(i)}))}else if("Message"===e.Key){const i=document.createElement("p");i.innerText=e.Value,t.appendChild(i)}else{const i=document.createElement("span");i.textContent=e.Value,t.appendChild(i)}"Message"===e.Key||"Attachments"===e.Key?s.prepend(t):i.appendChild(t)}})),t.querySelector(e.selectors.nameContainer).textContent=r}const t=e.element.querySelector(e.selectors.printButton);t&&t.addEventListener("click",Tt)}),{selectors:{self:".cmp-rfp-submission",contactSection:".cmp-rfp-submission__contact-info",requestSection:".cmp-rfp-submission__request-details",nameContainer:".cmp-rfp-submission__name",refNoContainer:".cmp-rfp-submission__ref-no",printButton:".cmp-rfp-submission__button"}});const Rr="cmp-header",Ur="cmp-search",kr="header-sticky",Dr="header-hidden";var Mr=s(912),Fr=s.n(Mr);const{DebugUtils:qr,DOMUtils:xr}=yn;class Vr{#e;#te;#ie;#j;#se;#ne;#oe;constructor(e){const{parentClass:t}=e.constants,{searchCookie:i}=e.subclasses,{searchElement:s}=e.ui;this.#e=`${this.constructor.name}:`,this.#ne=`${t}__previous-search--active`,this.#oe=`${t}__previous-search-list--active`,this.#te=i,this.#j={previousSearch:`[data-${t}-previous-search]`,previousSearchList:`[data-${t}-previous-search-list]`,previousSearchListItem:`data-${t}-previous-search-item`,previousSearchMessage:`[data-${t}-previous-search-screen-reader-only]`,searchListItemClass:`${t}__previous-search--item`,searchListItemRemoveClass:`${t}__previous-search--remove-cta`,searchListItemTextClass:`${t}__previous-search--text-cta`,searchListItemDataAttr:`[data-${t}-previous-search-item]`,parentClass:t},this.#se={previousSearch:s.querySelector(this.#j.previousSearch),previousSearchList:s.querySelector(this.#j.previousSearchList),previousSearchMessage:s.querySelector(this.#j.previousSearchMessage)},this.outsideClickListener=this.outsideClickListener.bind(this)}outsideClickListener(e){const t=e.target;t?.closest(`.${this.#j.parentClass}`)||this.hide()}setTypeAhead=e=>{this.#ie=e};show=()=>this.showPreviousSearch();hide=()=>this.hidePreviousSearch();showPreviousSearch(){const e=!this.#ie.hasResults();this.getCookieTerms().length>0&&e&&(xr.addClass({element:this.#se.previousSearch,className:this.#ne}),this.buildList()),document.body.addEventListener("click",this.outsideClickListener)}hidePreviousSearch(){xr.removeClass({element:this.#se.previousSearch,className:this.#ne}),this.clearList(),document.body.removeEventListener("click",this.outsideClickListener)}getCookieTerms(){return this.#te.getTerms()}buildList(){const e=this.getCookieTerms(),t=this.#se.previousSearchList.classList,i=this.#se.previousSearchMessage;if(this.clearList(),e.length>0){const{message:s}=i.dataset,n=s.replace("{number}",e.length);i.textContent=n,e.forEach((e=>{const t={classList:this.#j.searchListItemClass};t[`${this.#j.previousSearchListItem}`]=e;const i=xr.createElement("li",t),s=xr.createElement("button",{classList:this.#j.searchListItemRemoveClass,textContent:"close","aria-label":`${this.#se.previousSearch.dataset.remove?this.#se.previousSearch.dataset.remove:"remove"} ${e}`,"data-term":e});s.addEventListener("click",(e=>{this.onCancelButtonClick(e,this)}),!0);const n=xr.createElement("button",{classList:this.#j.searchListItemTextClass,textContent:e});n.addEventListener("click",(e=>this.onPreviousItemClick(e,this)),!0),i.appendChild(s),i.appendChild(n),this.#se.previousSearchList.prepend(i)})),t.add(this.#oe)}else t.remove(this.#oe)}onCancelButtonClick(e,t){const i=e.currentTarget.parentNode,s=e.currentTarget.dataset.term,n=t.#se.previousSearchList;n.removeChild(i),t.#se.previousSearchList=n,this.#te.deleteTerm(s),this.showPreviousSearch(),this.getCookieTerms().length<=0&&this.hidePreviousSearch()}onPreviousItemClick(e){Dt("searchMethod","previous-search"),this.#ie.search(e.currentTarget.textContent),this.hidePreviousSearch()}clearList(){this.#se.previousSearchList.replaceChildren()}}const{URLUtils:$r}=yn,Br=["Acquisition or Disposal Structuring","Acquisition Strategy","Chief Global Strategist","Chief Strategy Officer","Corporate Tax Advisory","Corporate Tax Stuff","Foobat","Foobaz","Foobar"];const Gr=async(e={})=>{let t=[];const{inputValue:i,MS_DISABLED:s}=e,n=function(e={}){const{endpoint:t,countryCode:i,languageCode:s,MS_DISABLED:n}=e;let o=`${i??"ch"}_${s??"en"}`;o=n?`${o}_suggestions`:o;const r=`${t.replace(/["']/g,"")}`;return r.length>0&&`${r}${o}`}({...e,MS_DISABLED:s}),o=$r.isURLValid(n);return t=n&&o?await(async(e={})=>{const{inputValue:t,endpoint:i,MS_DISABLED:s}=e,n={body:s?JSON.stringify({id:"suggestions_template",params:{search_input:t}}):JSON.stringify({demand:t}),method:"POST",headers:{"Content-Type":"application/json"}};try{const e=await fetch(i,n);if(e.ok){const t=await e.json();let i;return i=s?t.hits&&t.hits.hits?t.hits.hits.map((e=>e.highlight.suggestion_text[0])):[]:t.prompt_text??[],Array.isArray(i)?i:[]}return[]}catch{return[]}})({inputValue:i,endpoint:n,MS_DISABLED:s}):((e="",t)=>t.filter((t=>{if(-1!==t.toLowerCase().indexOf(e.toLowerCase()))return t})))(i,Br),t},{DebugUtils:Hr,DOMUtils:jr,FormUtils:Kr,KeyboardUtils:zr,URLUtils:Wr}=yn;class Yr{#e;#re;#ae;#te;#le;#ce;#de;#ue;#he;#me;#pe;#fe;#ge;#ye;#Ee;#ve;#be="";#Se=250;#Ce;#Ie=!1;#_e=!0;#Le;constructor(e){const{autoCompleteID:t,minSearchLength:i,searchData:s,parentClass:n,isHeader:o}=e.constants,{autoComplete:r,autoCompleteMenu:a,searchInput:l,searchInputButton:c,searchResultsComponent:d}=e.ui;this.#me=c,this.#de=r;const{searchCookie:u,previousSearch:h}=e.subclasses;this.#te=u,this.#le=h,this.#ce=e.methods,this.#e=`${this.constructor.name}`,this.#re=new Hr({constructorName:this.#e,origin:n}),this.#ue=t,this.#Le=a,this.#he=l,this.#pe=s,this.#ve=i,this.#ae=d,this.#Ce=o,this.MS_DISABLED="true"===this.#pe.msDisabled,this.#ge=`${this.#ue}__input-clear--active`,this.#ye=`${this.#ue}__input-clear`,this.#Ee=`${this.#ue}__input--focus`,this.#Te(),this.#Ae(),!this.#Ce&&this.#ae&&this.#Oe(),this.#re.log("Init",this)}focus=()=>this.#we();blur=()=>this.#Pe();clear=()=>this.#Ne();hideMenu=()=>this.#Re();showMenu=()=>this.#Ue();search=e=>this.#ke(e);hasResults=()=>this.#Ie;onTypeAhead=async(e={})=>{let t;this.#ce.getAlertVisible()&&this.#ce.hideAlert(),e.term&&this.#De(e.term),e.populateResults&&(t=e.populateResults);const{suggestEndpoint:i,countryCode:s,languageCode:n}=this.#pe;let o=await Gr({inputValue:this.#be,endpoint:i,countryCode:s,languageCode:n,MS_DISABLED:this.MS_DISABLED});const r={params:e,filteredResults:o};o.length>0?(o=this.#Me(o),this.#le.hide(),!this.#_e||this.#Ce?this.#Ue():this.#Re(),t(o),this.#Fe(!0)):(t([]),this.#Fe(!1),this.#Re()),this.#qe(),this.#_e=!1,this.#re.log("onTypeAhead",r)};#Me(e){return e.map((e=>"<i class='cmp-search-input-auto-complete__option__icon' aria-hidden=\"true\"></i>"+e))}#Oe(){const e=Wr.getURL().searchParams.q;e&&this.#De(e),this.#re.log("checkForQueryParams",e)}#we(){Kr.focusInput(this.#he,this.#Ee)}#Pe(){this.#he.blur()}#Te(){const e=jr.createElement("button",{classList:this.#ye,textContent:"cancel","aria-label":this.#de.dataset.clear?this.#de.dataset.clear:"Clear"});this.#de.appendChild(e),e.addEventListener("click",(e=>{e.preventDefault(),this.#Fe(!1),this.#Ne(),setTimeout((()=>{this.#we()}),this.#Se)})),this.#fe=e}#De(e){this.#be=Kr.sanitizeInputValue(e),this.#he.value=this.#be}#Ne(){this.#be="",this.#he.value=this.#be;this.#fe.classList.remove(this.#ge),this.#ce.hideAlert(),this.#le.show()}#xe(){return this.#be.length>=this.#ve}#ke(e){e?e&&this.#De(e.trim()):e=this.#be;const t=this.#xe();this.#Re(),this.#be.length>0&&t?setTimeout(this.#Ve(),this.#Se):t?this.#ce.hideAlert():this.#ce.showAlert()}#Ve(){Dt("searchCount",(Mt("searchCount")||0)+1),this.#te.saveTerm(this.#be);const e=`${this.#pe.searchResultPage}?q=${this.#be.toLowerCase()}`;setTimeout((()=>{const t=this.#re.getDebugMode(),i=this.#ae;if(t)this.#re.log("searchForTerm: navigateToURL",e);else if(t||i&&!this.#Ce){if(i){let e=`?q=${this.#be.toLowerCase()}`;window.history.pushState(null,"",e);const t=new CustomEvent("search-query-updated",{detail:{text:this.#be.toLowerCase()}});document.body.dispatchEvent(t)}}else Wr.navigateToURL(e)}),this.#Se)}#Ue(){setTimeout((()=>this.#Le.classList.add("cmp-search-input-auto-complete__menu--show")))}#Re(){setTimeout((()=>this.#Le.classList.remove("cmp-search-input-auto-complete__menu--show")))}#qe=()=>{const e=this.#fe.classList;0===this.#be.length?e.remove(this.#ge):e.add(this.#ge)};#$e=e=>{this.#ce.hideAlert(),this.#De(e.target.value),this.#qe(),0===this.#be.length&&(this.#Re(),this.#Fe(!1),this.#le.show());const t=zr.getKeyID(e);"ENTER"===t&&(Dt("searchMethod","typed"),this.#ke(this.#be)),"ESCAPE"===t&&(this.#ce.hideAlert(),this.#le.hide())};#Fe=e=>{this.#Ie=e};#Ae(){this.#he.addEventListener("focus",(()=>{this.#we()})),this.#he.onkeyup=e=>this.#$e(e),this.#me.addEventListener("click",(()=>{this.#ke(this.#be)})),this.#Le.addEventListener("click",(()=>{Dt("searchMethod","autocomplete"),this.#ke(this.#he.value)}))}}const{DebugUtils:Jr,DOMUtils:Xr}=yn;class Qr{#e;#re;#Be;#Ge=!1;#He;#je;#Ke;#ze;#We;#Ye;constructor(e){const{parentClass:t}=e.constants,{searchElement:i}=e.ui;this.#e=`${this.constructor.name}`,this.#re=new Jr({flag:t}),this.#He=`[data-${t}-alert]`,this.#je=`[data-${t}-alert-empty]`,this.#We=`${t}__alert--active`,this.#Ye=`${t}__alert-empty--active`,this.#Be=i,this.getElements()}show=(e,t)=>{e&&this.#re.log(`${this.#e}: Message was passed: `,e),t&&this.#re.log(`${this.#e}: Type was passed: `,t),this.showAlertContainer(),t||this.showAlertEmpty()};hide=()=>{this.hideAlertContainer()};async getElements(){this.#Ke=await this.#Be.querySelector(this.#He),this.#ze=await this.#Ke.querySelector(this.#je)}showAlertContainer(){this.#Ge||(Xr.addClass({element:this.#Ke,className:this.#We}),this.#Ge=!0)}showAlertEmpty(){Xr.addClass({element:this.#ze,className:this.#Ye})}hideAlertContainer(){this.#Ge&&(Xr.removeClass({element:this.#Ke,className:this.#We}),Xr.removeClass({element:this.#ze,className:this.#We}),this.#Ge=!1)}}const{CookieUtils:Zr,ArrayUtils:ea,DebugUtils:ta}=yn;class ia{#e;#re;#Je="previous_search_terms";#Xe="";#Qe=10;#Ze;constructor(e={}){this.#e=`${this.constructor.name}:`,this.#re=new ta({flag:"header"}),this.name=()=>this.getCookieName(),this.saveTerm=e=>this.saveTermInCookie(e),this.deleteTerm=e=>this.deleteTermInCookie(e),this.getTerms=()=>this.getCookieTerms(),this.#Xe=this.#Je,e.countryCode&&e.languageCode&&this.updateCookieName(e.countryCode,e.languageCode),this.#Ze=this.getCookie(),this.#Ze?this.#re.log(`${this.#e} Init. Cookie exists: `,this.#Ze):this.#re.log(`${this.#e} Init. Cookie does not exist, creating with the name: `,this.#Xe)}updateCookieName(e,t){this.#Xe+=`_${e}_${t}`}getCookieName(){return this.#Xe}getCookie(){return Zr.getCookie(this.getCookieName())}getCookieTerms(){const e=this.getCookie()??!1;return e.terms?e.terms:[]}deleteTermInCookie(e){const t=ea.remove(this.getCookieTerms(),e);this.setTermsInCookie(t)}setTermsInCookie(e){Zr.setCookie(this.getCookieName(),JSON.stringify({terms:e}),365)}saveTermInCookie(e){let t=[];const i=this.getCookieTerms(),s=i.findIndex((t=>t.toLowerCase()===e.toLowerCase()));return t=-1!==s?[...i.slice(0,s),...i.slice(s+1),e]:[...i,e],t.length>this.#Qe&&(t=ea.removeFirst(t)),this.setTermsInCookie(t),t}}const{DOMUtils:sa,StringUtils:na,DebugUtils:oa,FormUtils:ra}=yn;class aa{#e;#re;#se;#j;#ae;#et;#tt;#it;#st;#Ke;#pe;#Be;#nt=!1;#ue;#ot;#ve;#Ce=!1;constructor(e){const{searchElement:t,parentClass:i,isHeader:s}=e;this.#e=`${this.constructor.name}`,this.#re=new oa({constructorName:this.#e,origin:i}),this.#Ce=s,this.#et=i,this.#ue=`${this.#et}-auto-complete`,this.#ot=`${this.#ue}--active`,this.#j={searchInput:`#${this.#ue}`,searchInputButton:`[data-${this.#ue}-input-button]`,autoComplete:`[data-${this.#ue}]`,autoCompleteMenu:`#${this.#ue}__listbox`,searchResults:"[data-cmp-search-results]"},this.#Be=t,this.#pe={...this.#Be.dataset};const{countryCode:n,languageCode:o,searchTriggerCount:r}=this.#pe;this.#tt=new ia({countryCode:n,languageCode:o}),this.#ve=Number(r),this.#se={searchInputButton:this.#Be.querySelector(this.#j.searchInputButton),autoComplete:this.#Be.querySelector(this.#j.autoComplete)};const a=this.#se.autoComplete.dataset.placeholderText,l={element:this.#se.autoComplete,cssNamespace:this.#ue,id:this.#ue,displayMenu:"overlay",placeholder:a,showNoOptionsFound:!1,minLength:this.#ve,name:this.#ue,source:(e,t)=>this.#st.onTypeAhead({term:e,populateResults:t}),templates:{inputValue:e=>e?ra.sanitizeInputValue(e):null}};Fr()(l),this.initialize()}show=()=>this.showAutoComplete();hide=()=>this.hideAutoComplete();showAlert=()=>{this.#Ke.show(),this.#it.hide(),this.#nt=!0};hideAlert=()=>{this.#Ke.hide(),this.#nt=!1};getAlertVisible=()=>this.#nt;showAutoComplete=()=>{this.#st.clear(),this.#Ce?(sa.addClass({element:this.#se.autoComplete,className:this.#ot}),this.#st.focus()):this.#st.focus()};hideAutoComplete=()=>{this.#st.blur(),this.#st.clear(),this.#it.hide(),this.#Ke.hide(),this.#Ce&&sa.removeClass({element:this.#se.autoComplete,className:this.#ot})};async initialize(){await this.getSearchInput(),await this.initPreviousSearch(),await this.initInputAlert(),await this.initTypeAhead(),this.#it.setTypeAhead(this.#st),this.#re.log("Init",this)}async getSearchInput(){const e=this.#j.searchInput,t=this.#j.autoCompleteMenu;await sa.query(`${e}, ${t}`).then((t=>{Array.from(t).forEach((t=>{na.slice(e)===t.id?this.#se.searchInput=t:this.#se.autoCompleteMenu=t}))}))}async initPreviousSearch(){const e={ui:{searchElement:this.#Be},constants:{parentClass:this.#et,searchData:this.#pe},subclasses:{searchCookie:this.#tt}};this.#it=new Vr(e)}initInputAlert(){const e={ui:{searchElement:this.#Be},constants:{parentClass:this.#et}};this.#Ke=new Qr(e)}initTypeAhead(){const e=sa.docRoot.querySelector(this.#j.searchResults),t={ui:{searchInput:this.#se.searchInput,searchInputButton:this.#se.searchInputButton,autoComplete:this.#se.autoComplete,autoCompleteMenu:this.#se.autoCompleteMenu,searchResultsComponent:e},constants:{parentClass:this.#et,minSearchLength:this.#ve,autoCompleteID:this.#ue,searchData:this.#pe,isHeader:this.#Ce},subclasses:{previousSearch:this.#it,searchCookie:this.#tt},methods:{showAlert:this.showAlert,hideAlert:this.hideAlert,getAlertVisible:this.getAlertVisible}};this.#st=new Yr(t)}}const{DebugUtils:la,DOMUtils:ca,DeviceUtils:da,KeyboardUtils:ua}=yn;yt(class{#e;#re;#rt;#j;#se;#at;#lt;#ct;#dt;#ut;#ht;#mt;#pt;constructor(e){this.#e=`${this.constructor.name}`,this.#re=new la({constructorName:this.#e,origin:Ur}),this.#rt=new da,this.#mt=`${Rr}__main-nav-bar--hide`,this.#ht=`${Ur}__section--active`,this.#pt=`${Ur}__button--hide`,this.#dt=kr,this.#ut=Dr,this.#j={header:`[data-${Rr}]`,headerMainNav:`[data-${Rr}-main-nav]`,searchButton:`[data-${Ur}-button]`,cancelButton:`[data-${Ur}-cancel-button]`,searchSection:`[data-${Ur}-section]`};const t=e.element;this.#se={searchSection:t.querySelector(this.#j.searchSection),searchButton:t.querySelector(this.#j.searchButton),cancelButton:t.querySelector(this.#j.cancelButton)};const i=ca.docRoot.querySelector(this.#j.header);this.#ct=i,this.#lt=i.querySelector(this.#j.headerMainNav),this.initAutoComplete({name:this.#e,searchElement:t,parentClass:Ur}),this.initEventListeners(),this.#re.log("INIT",this)}initAutoComplete(e={}){const{searchElement:t,parentClass:i}=e;t&&i?this.#at=new aa({searchElement:t,parentClass:i,isHeader:!0}):this.#re.error("Missing parameters",e)}isDesktopMedium(){return"DESKTOP_MEDIUM"===this.#rt.getData().currentBreakPoint}expandSearchField(){this.isDesktopMedium()&&(ca.addClass({element:this.#lt,className:this.#mt}),ca.addClass({element:this.#se.searchButton,className:this.#pt}))}contractSearchField(){this.isDesktopMedium()&&(ca.removeClass({element:this.#lt,className:this.#mt}),ca.removeClass({element:this.#se.searchButton,className:this.#pt}))}showSearch(){this.expandSearchField(),ca.addClass({element:this.#se.searchSection,className:this.#ht}),ca.removeClass({element:this.#ct,className:this.#dt}),ca.removeClass({element:this.#ct,className:this.#ut}),ca.stopScroll(),setTimeout((()=>{this.#at.show()}),500)}hideSearch(){this.contractSearchField(),ca.removeClass({element:this.#se.searchSection,className:this.#ht}),ca.resumeScroll(),this.#at.hide()}initEventListeners(){this.#se.searchButton.addEventListener("click",(e=>this.showSearch(e))),this.#se.cancelButton.addEventListener("click",(e=>{this.hideSearch(e),this.#se.searchButton.focus()})),this.#se.searchSection.addEventListener("keyup",(e=>{"ESCAPE"===ua.getKeyID(e)&&(this.hideSearch(e),this.#se.searchButton.focus())}))}},{selectors:{self:`[data-${Ur}]`}});const{DOMUtils:ha,DeviceUtils:ma}=yn;let pa=!1;const fa={id:"get_content_suffix",params:{currentPageUrl:""}},ga={id:"get_lang_copies",params:{contentSuffix:""}},ya="/ecpagerefs";yt((function(e){let t=!0;const i=new ma,s=e.element,n=s.querySelector(e.selectors.toogle_button),o=function(e){let t=/\/([a-zA-Z]{2})\/([a-zA-Z]{2})\.html$/,i=e.match(t);return i?{countryCode:i[1],languageCode:i[2]}:(t=/\/([a-zA-Z]{2})\/([a-zA-Z]{2})\//,i=e.match(t),i?{countryCode:i[1],languageCode:i[2]}:null)}(document.location.pathname),r=`/bin/kpmg/siteSelectorServlet?pagePath=/${o.countryCode}/${o.languageCode}`,a=document.documentElement.getAttribute("lang"),l=s.querySelector(e.selectors.toogle_button).id,c=document.querySelector('[data-cmp-langselector="side-navbar"]'),d=c.querySelector('[data-cmp-langselector="filter-search-input"]'),u=c.querySelector('[data-cmp-langselector="close-btn"]'),h=c.querySelector('[data-cmp-langselector="filter-cancel"]'),m=c.querySelector('[data-cmp-langselector="filter-message"]'),p=c.querySelector('[data-cmp-langselector="language-selector"]'),f=c.querySelector('[data-cmp-langselector="list-of-all-countries"]');async function g(e,t){const i=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}});return await i.json()}async function y(){let e=!1;const t=await async function(){const e=window.location.href;fa.params.currentPageUrl=e;const t=await g(ya,fa);if(0===t.hits.total.value)throw new Error("Suffix API result is zero");return t.hits.hits[0]._source.content_hierarchy_suffix}().catch((()=>{e=!0}));if(!e){const e=await async function(e){return ga.params.contentSuffix=e,(await g(ya,ga)).aggregations.group_by_path.buckets}(t).catch((()=>{}));try{!function(e){pa=!0;const t=function(){const e={};return c.querySelectorAll(".country-list--short a").forEach((t=>{const i=t.innerHTML.split("(")[1].substring(0,2).toLowerCase();e[i]=t})),e}(),i=window.location.pathname.split("/")[1];e.forEach((e=>{const s=e.key,[n,o]=e.locale_id.buckets[0].key.split("_"),r=i===n;t&&t[o]&&r&&(t[o].href=s)}))}(e)}catch{return}}}function E(){c.classList.contains("active")&&(ha.resumeScroll(),c.classList.remove("active"),n.classList.remove("active"),s.classList.remove("active"),v(),i.getData().isMobileDevice&&n.focus())}function v(){h.classList.remove("show"),m.classList.remove("show"),m.innerHTML="",document.querySelector(".country-list--count").innerHTML="",d.value="";let e=f.getElementsByTagName("li");for(let t=0;t<e.length;t++)e[t].removeAttribute("style")}document.addEventListener("keydown",(e=>{"Escape"==e.key&&c.classList.contains("active")&&(E(),n.focus())})),u.addEventListener("click",(()=>{E()})),c.addEventListener("focusout",(e=>{c.contains(e.relatedTarget)||E()})),h.addEventListener("click",(()=>{v()})),d.addEventListener("keyup",(e=>{!function(e){let t,i,s,n,o=0;if(t=d.value.toUpperCase(),i=f.getElementsByTagName("li"),h.classList.add("show"),"Backspace"===e.key||"Delete"===e.key||t.length>=3){document.querySelector(".country-list--count").innerHTML="",m.innerHTML="";for(let e=0;e<i.length;e++)s=i[e].getElementsByTagName("a")[0],n=s.getAttribute("title"),n.toUpperCase().indexOf(t)>-1?(i[e].style.display="",o++):i[e].style.display="none";o<=0?(m.classList.add("show"),m.innerHTML=m.getAttribute("data-message")):(m.classList.remove("show"),m.innerHTML="",document.querySelector(".country-list--count").innerHTML=o+" "+document.querySelector(".country-list--count").getAttribute("data-message"))}t.length<=0&&v()}(e)})),document.addEventListener("click",(function(e){if(t&&(!async function(){const e=await async function(){const e=await fetch(r),t=await e.json();return t}(),t=e.relevantCountryCodes,i=e.siteSelectorItems.sort(((e,t)=>{const i=e.country+e.locale,s=t.country+t.locale;return i.localeCompare(s,a,{sensitivity:"base"})})),s=i.splice(i.map((e=>e.country.toLowerCase())).indexOf("global"),1);i.unshift(s[0]),b(t,p),b(i,f)}(),t=!1),e.stopImmediatePropagation(),n.isSameNode(e.target)||n.contains(e.target)||e.target.classList.contains("cmp-lang-selector__toggle-btn")||e.target.parentNode.classList.contains("cmp-lang-selector__toggle-btn"))return e.preventDefault(),void(c.classList.contains("active")?E():(c.classList.add("active"),n.classList.add("active"),s.classList.add("active"),ha.stopScroll(),i.getData().isMobileDevice&&setTimeout((()=>{u.focus()}),100),!pa&&y()));c.isSameNode(e.target)||c.contains(e.target)||e.target.closest('[data-cmp-langselector="side-navbar"]')||E()})),n.addEventListener("click",(()=>function(e){try{window.adobeDataLayer&&e&&(n.classList.contains("active")?window.adobeDataLayer.push({event:"cmp:hide",eventInfo:{path:`component.${l}`},component:{[e]:{"dc:title":"language selector-close"}}}):window.adobeDataLayer.push({event:"cmp:show",eventInfo:{path:`component.${l}`},component:{[e]:{"dc:title":"language selector-open"}}}))}catch(e){console.log("Analytics error",e)}}(l)));const b=(e,t)=>{e.forEach((e=>{const i=ha.createElement("li"),s=ha.createElement("a",{"x-cq-linkchecker":"skip",href:e.siteLink,title:`${e.country} (${e.locale})`,"data-cmp-clickable":"true","data-cmp-data-layer":JSON.stringify(e.componentDetails[0]),textContent:`${e.country} (${e.locale})`});i.appendChild(s),t.appendChild(i)}))}}),{selectors:{self:".cmp-lang-selector",toogle_button:".cmp-lang-selector__toggle-btn"}}),yt((function(e){const t=e.element;if(t){const e=document.querySelector('[role="banner"]');let i;if(e.hasAttribute("id"))i=e.getAttribute("id");else{const t="skipnav-target";e.setAttribute("id",t),i=t}t.setAttribute("href",`#${i}`)}}),{selectors:{self:".skipnav"}});const{DebugUtils:Ea,DOMUtils:va,DeviceUtils:ba,KeyboardUtils:Sa,URLUtils:Ca}=yn,{addClass:Ia,removeClass:_a}=va;yt(class{#e;#re;#se;#j;#ft;#gt;#yt;#Et;#vt;#bt;#St;#dt;#ut;#rt;#Ct;#It;#_t;#Lt;#Tt;#At;#Ot;#wt;#Pt;constructor(e){const t=Rr,i="cmp-main-nav",s="cmp-sub-menu",n="cmp-menu-item-bar";this.#e=`${this.constructor.name}`,this.#re=new Ea({constructorName:this.#e,origin:t}),this.#ft=e.element,this.#dt=kr,this.#ut=Dr,this.#Ct=`${i}--open`,this.#It=`${n}--open`,this.#_t=`${s}--active`,this.#Lt=`${s}--deactivate`,this.#Tt=`${i}--submenu-opened`,this.#At=`${s}__section-nav--level-three`,this.#Ot=`${s}__section-nav--level-three-active`,this.#wt=`${s}__level-three-close`,this.#Pt="cmp-menu-link__level-3",this.#j={mainNav:`[data-${i}]`,mainNavMainMenu:`[data-${i}-main-menu]`,mainNavListItems:`[data-${i}-list-item]`,mobileToggle:"[data-cmp-mobile-toggle]",mobileHeader:`[data-${i}-mobile-header]`,mobileMenuCloseButton:`[data-${i}-mobile-header-close]`,subMenu:`[data-${s}]`,subMenuBack:`[data-${s}-back]`,mobileMenuItemBar:`[data-${n}-mobile='true']`,subMenuLevel3Back:`[data-${s}-level3-back]`},this.#se={mainNav:this.getElement(this.#j.mainNav),mainNavMainMenu:this.getElement(this.#j.mainNavMainMenu),mainNavListItems:this.getElement(this.#j.mainNavListItems),mobileToggle:this.getElement(this.#j.mobileToggle),mobileHeader:this.getElement(this.#j.mobileHeader),mobileMenuCloseButton:this.getElement(this.#j.mobileMenuCloseButton),subMenu:this.getElement(this.#j.subMenu),subMenuBack:this.getElement(this.#j.subMenuBack),subMenuLevel3Back:this.getElement(this.#j.subMenuLevel3Back),mobileMenuItemBar:this.getElement(this.#j.mobileMenuItemBar)},this.#gt=null,this.#yt=null,this.#Et=null,this.#vt=!1,this.#bt=!1,this.#St=this.#ft.classList.contains("cmp-header-v2"),this.#rt=new ba,this.initEventListeners(),this.#re.log("Init",this)}getElement(e,t=this.#ft){return t.querySelector(e)}isDesktopMedium(){return"DESKTOP_MEDIUM"===this.#rt.getData().currentBreakPoint}toggleMainNav(){this.#vt?this.closeMainNav():this.openMainNav()}openMainNav(){try{Ia({element:this.#se.mainNav,className:this.#Ct}),Ia({element:this.#se.mobileMenuItemBar,className:this.#It}),_a({element:this.#ft,className:this.#dt}),_a({element:this.#ft,className:this.#ut}),this.#se.mobileToggle.setAttribute("aria-expanded","true"),va.stopScroll(),this.#vt=!0,this.#se.mobileMenuCloseButton.focus(),Ro(document.querySelector("[data-cmp-header-main-nav]"))}catch(e){throw new Error(`${this.#e}: openMainNav: `,e)}}closeMainNav(){this.#bt&&this.resetSubMenu(),_a({element:this.#se.mainNav,className:this.#Ct}),_a({element:this.#se.mobileMenuItemBar,className:this.#It}),this.#se.mobileToggle.setAttribute("aria-expanded","false"),va.resumeScroll(),this.#vt=!1,this.#se.mobileToggle.focus()}onMainNavMenuInput(e){e.preventDefault();const t=e.target,i=t.tagName.toLowerCase();let s,n=t.closest("a");if(s="button"===i||"a"===i||n?n||t:t.parentNode,this.#St&&s.classList.contains(this.#Pt))s.classList.contains("active")?this.hideLevel3SubMenu(s):this.showLevel3SubMenu(s);else{let e,i=t.closest("nav");if(e=i&&i.classList.contains("cmp-sub-menu--active")&&!n?i.parentNode:s.parentNode.parentNode,this.#gt=this.getElement(this.#j.subMenu,e),this.#gt)if(this.isDesktopMedium()&&this.#gt.classList.contains(this.#_t)){const e=this.#gt.parentNode.querySelector("button.cmp-menu-link__inner");this.hideSubMenu(),s.setAttribute("aria-expanded","false"),e.focus()}else this.hideAllSubMenu(),this.showSubMenu(s),s.setAttribute("aria-expanded","true");else s.href&&Ca.navigateToURL(s.href)}}onMainNavKey(e){if("ESCAPE"===Sa.getKeyID(e))if(this.#bt){const e=this.#gt.parentNode.querySelector("button.cmp-menu-link__inner");this.hideSubMenu(),e.setAttribute("aria-expanded","false"),e.focus()}else this.#vt&&this.toggleMainNav()}onMobileMenuClose(){this.toggleMainNav()}showSubMenu(e){try{const t=this.#gt;if(Ia({element:t,className:this.#_t}),Ia({element:this.#ft,className:this.#Tt}),document.querySelector(".cmp-ppc-navigation__nav")&&_a({element:document.querySelector(".cmp-ppc-navigation__nav"),className:"open"}),this.#St){if(this.isDesktopMedium()&&t.classList.contains("cmp-sub-menu__has-level-three")){const e=t.querySelector(".cmp-sub-menu__section-nav--level-two"),i=t.querySelector(".cmp-sub-menu__feature-section--items"),s=t.querySelectorAll(".cmp-sub-menu__section-nav--level-three"),n=t.querySelectorAll(".cmp-sub-menu__section-nav--level-three ul"),o=this.getMaxHeight(e,i,n);e.style.height=`${o}px`,i&&(i.style.height=`${o}px`),s&&s.forEach((e=>{e.style.height=`${o}px`,Ia({element:e,className:"hide"})}))}this.hideAllLevel3SubMenu()}this.#yt=null,this.#yt=this.getElement(this.#j.subMenuBack,t),this.#yt.addEventListener("click",(()=>{this.hideSubMenu(),e.focus(),e.setAttribute("aria-expanded","false"),va.stopScroll()})),this.#bt=!0,va.stopScroll(),this.isDesktopMedium()||(this.#yt.focus(),Ro(t))}catch(e){throw new Error(`${this.#e}: showSubMenu: `,e)}}getMaxHeight(e,t,i){let s=0;const n=e=>{if(e){const t=e.offsetHeight;t>s&&(s=t)}};return n(e),n(t),i.forEach(n),s}hideSubMenu(){try{this.#St&&this.hideAllLevel3SubMenu();const e=this.#gt?this.#gt:this.#ft.querySelector(`.${this.#_t}`);_a({element:e,className:this.#_t}),_a({element:this.#ft,className:this.#Tt});e.parentNode.querySelector("button.cmp-menu-link__inner").setAttribute("aria-expanded","false"),this.isDesktopMedium()||(Ia({element:e,className:this.#Lt}),setTimeout((()=>{_a({element:e,className:this.#Lt})}),750)),this.#bt=!1,va.resumeScroll()}catch(e){throw new Error(`${this.#e}: hideSubMenu: `,e)}}hideAllSubMenu(){this.#St&&this.hideAllLevel3SubMenu(),this.#ft.querySelectorAll(`.${this.#_t}`)&&this.#ft.querySelectorAll(`.${this.#_t}`).forEach((function(e){e.parentNode.querySelector("button.cmp-menu-link__inner").setAttribute("aria-expanded","false"),e.classList.remove("cmp-sub-menu--active")})),this.#bt=!1,va.resumeScroll()}hideAllLevel3SubMenu(){this.#ft.querySelectorAll(`.${this.#Ot}`)&&this.#ft.querySelectorAll(`.${this.#Ot}`).forEach((e=>{const t=e.parentNode.querySelector("button.cmp-menu-link__inner");t.setAttribute("aria-expanded","false"),t.classList.remove("active"),t.focus(),e.classList.remove(this.#Ot)})),this.#ft.querySelectorAll(".cmp-sub-menu__feature-section-three-column")&&this.#ft.querySelectorAll(".cmp-sub-menu__feature-section-three-column").forEach((e=>{_a({element:e,className:"hide"})}))}showLevel3SubMenu(e){try{this.hideAllLevel3SubMenu();const t=e.closest("li").querySelector(`.${this.#At}`),i=e.closest(".cmp-sub-menu__container").querySelector(".cmp-sub-menu__feature-section-three-column");Ia({element:t,className:this.#Ot}),Ia({element:e,className:"active"}),i&&Ia({element:i,className:"hide"}),e.setAttribute("aria-expanded","true"),this.#yt=null,this.#yt=this.getElement(this.#j.subMenuBack,t),this.#yt.addEventListener("click",(()=>{this.hideSubMenu(),e.focus(),e.setAttribute("aria-expanded","false"),va.stopScroll()})),this.#Et=null,this.#Et=this.getElement(this.#j.subMenuLevel3Back,t),this.#Et.addEventListener("click",(()=>{this.hideLevel3SubMenu(e),e.focus(),e.setAttribute("aria-expanded","false"),va.stopScroll()})),this.isDesktopMedium()||(this.#yt.focus(),Ro(t))}catch(e){throw new Error(`${this.#e}: showLevel3SubMenu: `,e)}}hideLevel3SubMenu(e){try{const t=e.closest("li").querySelector(`.${this.#At}`),i=e.closest(".cmp-sub-menu__container").querySelector(".cmp-sub-menu__feature-section-three-column");_a({element:t,className:this.#Ot}),_a({element:e,className:"active"}),i&&_a({element:i,className:"hide"}),e.setAttribute("aria-expanded","false")}catch(e){throw new Error(`${this.#e}: hideLevel3SubMenu: `,e)}}resetSubMenu(){this.#St&&this.hideAllLevel3SubMenu();const e=this.#gt?this.#gt:this.#ft.querySelector(`.${this.#_t}`);_a({element:e,className:this.#_t}),_a({element:this.#ft,className:this.#Tt}),this.#bt=!1,this.#gt=null,va.resumeScroll()}initEventListeners(){if(this.#St){function e(e,t){let i=!1;return function(...s){i||(e.apply(this,s),i=!0,setTimeout((()=>i=!1),t))}}let t=0;this.handleScroll=e((()=>{requestAnimationFrame((()=>{const e=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;e<=this.#ft.offsetHeight?(_a({element:this.#ft,className:this.#dt}),_a({element:this.#ft,className:this.#ut})):e<t?(Ia({element:this.#ft,className:this.#dt}),_a({element:this.#ft,className:this.#ut})):(_a({element:this.#ft,className:this.#dt}),Ia({element:this.#ft,className:this.#ut})),t=Math.max(e,0)}))}),10),window.addEventListener("scroll",this.handleScroll),this.#ft.querySelectorAll(`.${this.#wt}`).forEach((e=>{e.addEventListener("click",(()=>this.hideAllLevel3SubMenu()))}))}document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.#vt&&(this.#bt&&(this.hideAllSubMenu(),this.#gt=null),_a({element:this.#se.mainNav,className:this.#Ct}),_a({element:this.#se.mobileMenuItemBar,className:this.#It}),this.#se.mobileToggle.setAttribute("aria-expanded","false"),va.resumeScroll(),this.#vt=!1)})),this.#se.mobileToggle.addEventListener("click",(()=>this.toggleMainNav())),this.#se.mainNavMainMenu.addEventListener("click",(e=>this.onMainNavMenuInput(e))),this.#se.mainNav.addEventListener("keyup",(e=>this.onMainNavKey(e))),this.#se.mobileMenuCloseButton.addEventListener("click",(e=>this.onMobileMenuClose(e))),this.#se.mainNav.addEventListener("focusout",(e=>{e.relatedTarget&&!this.#se.mainNav.contains(e.relatedTarget)&&this.isDesktopMedium()&&!e.relatedTarget.classList.contains(this.#wt)&&this.hideAllSubMenu()}))}},{selectors:{self:`[data-${Rr}]`}});const{DOMUtils:La,KeyboardUtils:Ta}=yn;class Aa{constructor(e){this.element=e}init(){this.articleFilterToggleButton=this.element.querySelector(".cmp-articlelisting__mobile-filters--button"),this.articleFilterCloseButton=this.element.querySelector(".cmp-articlelisting__filter-overlay--close-button"),this.articleFilterOverlay=this.element.querySelector(".cmp-articlelisting__filter-overlay"),this.articleFilterToggleButton.addEventListener("click",(()=>this.toggleArticleFilterOverlay())),this.articleFilterCloseButton.addEventListener("click",(()=>this.closeArticleFilterOverlay())),this.articleFilterOverlay.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeArticleFilterOverlay()}))}toggleArticleFilterOverlay(){this.articleFilterOverlay.classList.contains("active")?this.closeArticleFilterOverlay():this.openArticleFilterOverlay()}closeArticleFilterOverlay(){La.resumeScroll(),La.removeClass({element:this.articleFilterOverlay,className:"visually-active"}),this.articleFilterToggleButton.focus(),setTimeout((()=>{La.removeClass({element:this.articleFilterOverlay,className:"active"})}),900)}openArticleFilterOverlay(){La.addClass({element:this.articleFilterOverlay,className:"active"}),La.stopScroll(),setTimeout((()=>{La.addClass({element:this.articleFilterOverlay,className:"visually-active"}),Ro(this.articleFilterOverlay),this.articleFilterCloseButton.focus()}),100)}}const{DOMUtils:Oa}=yn;class wa{constructor(e){const t=e.element;this.tabsContainerActiveClassName="cmp-articlelisting__tabs--open",this.tabActiveClassName="cmp-articlelisting__tabs-link--active",this.tabPanelActiveClassName="cmp-articlelisting__tabs-content--active",this.filterControlsActiveClassName="cmp-articlelisting__filter-controls--active",this.desktopFilters=t.querySelector(e.selectors.desktopFilters),this.tabsContainer=t.querySelector(e.selectors.tabsContainer),this.tabLinks=t.querySelectorAll(e.selectors.tabLink),this.tabContents=t.querySelectorAll(e.selectors.tabPanel),this.filterControls=t.querySelector(e.selectors.filterControls),this.addEventListeners()}addEventListeners(){this.tabLinks.forEach((e=>{e.addEventListener("click",this.handleTabClick.bind(this))})),document.body.addEventListener("click",(e=>{this.desktopFilters&&!this.desktopFilters.contains(e.target)&&this.hideAllTabs()}))}handleTabClick(e){const t=e.currentTarget.getAttribute("aria-controls"),i=document.getElementById(t);e.currentTarget.classList.contains(this.tabActiveClassName)?this.hideAllTabs():(this.hideAllTabs(),Oa.addClass({element:this.tabsContainer,className:this.tabsContainerActiveClassName}),Oa.addClass({element:i,className:this.tabPanelActiveClassName}),Oa.addClass({element:e.currentTarget,className:this.tabActiveClassName}),i.setAttribute("aria-hidden","false"),e.currentTarget.setAttribute("aria-selected","true"),e.currentTarget.querySelector("i").textContent="remove",Oa.addClass({element:this.filterControls,className:this.filterControlsActiveClassName}))}hideAllTabs(){Oa.removeClass({element:this.tabsContainer,className:this.tabsContainerActiveClassName}),Oa.removeClass({element:this.filterControls,className:this.filterControlsActiveClassName}),this.tabContents.forEach((e=>{Oa.removeClass({element:e,className:this.tabPanelActiveClassName}),e.setAttribute("aria-hidden","true")})),this.tabLinks.forEach((e=>{Oa.removeClass({element:e,className:this.tabActiveClassName}),e.querySelector("i").textContent="add",e.setAttribute("aria-selected","false")}))}}class Pa{constructor(e){this.selector=e,this.accordion=document.querySelector(e),this.items=this.accordion.querySelectorAll(this.selector+"--item"),this.init()}init(){this.items.forEach((e=>{const t=e.querySelector(this.selector+"--button");t.addEventListener("click",(()=>this.toggleAccordion(e))),t.addEventListener("keydown",(t=>this.handleKeyDown(t,e)))}))}toggleAccordion(e){const t=e.querySelector(this.selector+"--content"),i=e.querySelector(".chevron"),s=e.classList.toggle("active");t.setAttribute("aria-hidden",s?"false":"true"),i.textContent=s?"expand_less":"expand_more",e.querySelector(this.selector+"--button").setAttribute("aria-expanded",s.toString())}handleKeyDown(e,t){switch(e.keyCode){case 13:case 32:e.preventDefault(),this.toggleAccordion(t);break;case 38:e.preventDefault();const i=t.previousElementSibling;i&&i.classList.contains("cmp-articlelisting__filter-overlay-accordion--item")&&i.querySelector(this.selector+"--button").focus();break;case 40:e.preventDefault();const s=t.nextElementSibling;s&&s.classList.contains("cmp-articlelisting__filter-overlay-accordion--item")&&s.querySelector(this.selector+"--button").focus()}}}const{DOMUtils:Na,DeviceUtils:Ra}=yn;class Ua{constructor(e){const t=e.element;this.resultsContainer=t.querySelector(e.selectors.resultsContainer),this.elementId=t.getAttribute("id"),this.parentId=document.querySelector("body").getAttribute("id"),this.esEndPoint=t.getAttribute("data-es-endpoint"),this.countryCode=t.getAttribute("data-country-code"),this.languageCode=t.getAttribute("data-lang-code"),this.esEndPointURL=`${this.esEndPoint}/${this.countryCode}_${this.languageCode}`,this.readmoreLabel=t.getAttribute("data-readmore-label"),this.showImage=t.getAttribute("data-showimage"),this.showSeries=t.getAttribute("data-show-series"),this.showSubtitle=t.getAttribute("data-show-subtitle"),this.seriesHideMobile=t.getAttribute("data-series-hide-mobile"),this.subtitleHideMobile=t.getAttribute("data-subtitle-hide-mobile"),this.device=new Ra;const i=this.device.getCurrentBreakPoint();this.isTablet="TABLET"===i,this.isMobile="DEFAULT"===i,this.currentPage=1,this.filterElement=this.isMobile?t.querySelector(e.selectors.mobileFilters):t.querySelector(e.selectors.desktopFilters),this.filterSubmitButton=this.filterElement.querySelector(e.selectors.filterSubmitButton),this.filterOption=e.selectors.filterOption,this.paginationContainer=document.getElementById("cmp-articlelisting__pagination-container"),this.resultsPerPage=this.isTablet||this.isMobile?8:9,this.addEventListeners(),this.fetchData(this.esEndPointURL,this.generateRequestData()),1===this.filterElement.querySelectorAll(this.filterOption).length&&(this.filterElement.style.display="none",document.querySelector(".cmp-articlelisting__header")&&Na.addClass({element:document.querySelector(".cmp-articlelisting__header"),className:"no-filters"}))}addEventListeners(){this.filterSubmitButton.addEventListener("click",(()=>{this.paginationContainer.classList.remove("active"),this.paginationContainer.innerHTML="",this.isMobile?this.filterElement.querySelector(".cmp-articlelisting__filter-overlay--close-button").click():this.filterElement.querySelector(".cmp-articlelisting__tabs-link--active").click();const e=this.currentPage;this.currentPage=1,this.clearResultsContainer(),Na.removeClass({element:document.querySelector(".cmp-articlelisting__loadmore-container"),className:"active"}),this.fetchData(this.esEndPointURL,this.generateRequestData(),!0,e),document.querySelector(".cmp-articlelisting").scrollIntoView({behavior:"smooth",block:"start"})})),document.querySelector(".cmp-articlelisting__loadmore-button").addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.currentPage=this.currentPage+1;const t=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchData(this.esEndPointURL,this.generateRequestData(t))}))}getAnalyticsData(e){let t="";const i=this.filterElement.querySelector(".cmp-articlelisting__filter-list[data-category="+e+"]");if(i){const e=i.querySelectorAll('.cmp-articlelisting__filter-option[aria-selected="true"]');e.length&&e.forEach((function(i,s){t+=i.textContent.trim(),s<e.length-1&&(t+=", ")}))}return t}createArticleTile(e){const t=this.createElement("div","cmp-articlelisting__tile");let i=null,s=null;const n=this.createElement("a","cmp-articlelisting__tile--action-link",{href:e.qualified_url});if("true"===this.showImage){const t=this.createImageContainer(e);n.appendChild(t)}const o=this.createElement("div","cmp-articlelisting__tile--content");if("true"===this.showSeries){const t="true"===this.seriesHideMobile?"cmp-articlelisting__tile--series hidden-mobile":"cmp-articlelisting__tile--series";i=this.createElement("div",`${t}`,{textContent:e.article_series_title,ariaLabel:e.article_series_title})}const r=this.createElement("h2","cmp-articlelisting__tile--title",{textContent:e.title});if("true"===this.showSubtitle){const t="true"===this.subtitleHideMobile?"cmp-articlelisting__tile--subtitle hidden-mobile":"cmp-articlelisting__tile--subtitle";s=this.createElement("div",`${t}`,{textContent:e.article_sub_title,ariaLabel:e.article_sub_title})}const a=this.createElement("div","cmp-articlelisting__tile--description",{textContent:e.description}),l=this.createElement("div","cmp-articlelisting__tile--cta-text",{innerHTML:`<span class="cmp-articlelisting__tile--cta-text-label">${this.readmoreLabel}</span><span class="material-icons-outlined" aria-hidden="true"></span>`});return o.append(null!==i?i:"",r,null!==s?s:"",a,l),n.appendChild(o),t.appendChild(n),t}createElement(e,t,i={}){const s=document.createElement(e);return s.className=t,Object.keys(i).forEach((e=>s[e]=i[e])),s}createImageContainer(e){const t=this.createElement("div","cmp-articlelisting__tile--image"),i=this.createElement("picture");[{media:"(min-width: 1366px)",srcset:`${e.image_url}:cq5dam-web-1120-684?wid=423&hei=238, ${e.image_url}:cq5dam-web-1120-684?wid=846&hei=476 2x`},{media:"(min-width: 1024px)",srcset:`${e.image_url}:cq5dam-web-1120-684?wid=320&hei=180, ${e.image_url}:cq5dam-web-1120-684?wid=640&hei=360 2x`},{media:"(min-width: 768px)",srcset:`${e.image_url}:cq5dam-web-1120-684?wid=360&hei=202, ${e.image_url}:cq5dam-web-1120-684?wid=720&hei=404 2x`},{media:"(min-width: 360px)",srcset:`${e.image_url}:cq5dam-web-1120-684?wid=328&hei=184, ${e.image_url}:cq5dam-web-1120-684?wid=656&hei=368 2x`}].forEach((e=>{const t=this.createElement("source","",{media:e.media,srcset:e.srcset});i.appendChild(t)}));const s=this.createElement("img","",{src:`${e.image_url}:cq5dam-web-1120-684?wid=328&hei=184`,alt:e.image_alt_text||e.title});return i.appendChild(s),t.appendChild(i),t}fetchData=async(e,t,i,s)=>{if(wn()){const n=await Oo(e,t);if(!this.hasValidResponse(n))return void this.displayNoResultsMessage();const o=n.hits.total.value;if(this.hasResults(n.hits.hits,o)){if(this.hideNoResultsMessage(),this.isTablet||this.isMobile){const e=Math.ceil(o/this.resultsPerPage);this.currentPage<e?Na.addClass({element:document.querySelector(".cmp-articlelisting__loadmore-container"),className:"active"}):Na.removeClass({element:document.querySelector(".cmp-articlelisting__loadmore-container"),className:"active"})}this.isTablet||this.isMobile||(this.clearResultsContainer(),o>this.resultsPerPage&&(this.createPagination(o,this.currentPage),this.addPaginationEventListeners())),this.renderResults(n.hits.hits),document.querySelectorAll(".cmp-articlelisting__tile--action-link").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.querySelector(".cmp-articlelisting__tile--title").textContent,i=e.currentTarget.href,s=window.adobeDataLayer.find((e=>e.component&&e.component[this.elementId]));vt("cmp:articlelistingClick","component."+this.elementId,{},{[this.elementId]:{"dc:title":t,"xdm:linkURL":i,"@type":s.component[this.elementId]["@type"],parentId:this.parentId,"repo:modifyDate":s.component[this.elementId]["repo:modifyDate"],cardInfo:{cardsSelectedTopics:this.getAnalyticsData("topics"),cardsSelectedInsights:this.getAnalyticsData("insights"),cardsSelectedIndusties:this.getAnalyticsData("industries"),cardsSelectedServices:this.getAnalyticsData("services")}}})}))}))}else this.displayNoResultsMessage();if(i){const e=window.adobeDataLayer.find((e=>e.component&&e.component[this.elementId]));vt("cmp:showResultsclick","component."+this.elementId,{},{[this.elementId]:{"dc:title":"Article Listing - Show Results","@type":e.component[this.elementId]["@type"],parentId:this.parentId,"repo:modifyDate":e.component[this.elementId]["repo:modifyDate"],cardInfo:{cardsSelectedTopics:this.getAnalyticsData("topics"),cardsSelectedInsights:this.getAnalyticsData("insights"),cardsSelectedIndusties:this.getAnalyticsData("industries"),cardsSelectedServices:this.getAnalyticsData("services"),numResults:o.toString(),pageCount:s}}})}}};createPagination(e,t){(!t||t<=0)&&(t=1);let i=5;const s=Math.ceil(e/this.resultsPerPage);let n,o;s<i&&(i=s),s<=i?(n=1,o=i):7==s?(n=1,o=7):t<=i?(n=1,o=i):t+2>=s?(n=s-i+1,o=s):(n=t-2,o=t);const r=this.paginationContainer.dataset.labelPagePrefix,a=this.paginationContainer.dataset.labelTotalPagePrefix,l=this.paginationContainer.dataset.labelNextPagePrefix,c=this.paginationContainer.dataset.labelPrevPagePrefix;let d="";d+=1==t?`<button class='cmp-articlelisting__pagination--previous-button'\n        aria-label="${c}"\n        disabled></button>`:`<button class='cmp-articlelisting__pagination--previous-button'\n        aria-label="${c}"></button>`,n>1&&(d+='<button class="cmp-articlelisting__pagination--number-button">1</button>',n>2&&(d+="<span>...</span>"));for(let e=n;e<=o;e++)d+=e==t?`<button class="active cmp-articlelisting__pagination--number-button"\n        aria-label="${r} ${e}"\n        aria-current="true">${e}</button>`:`<button class="cmp-articlelisting__pagination--number-button"\n        aria-label="${r} ${e}">${e}</button>`;o<s&&(o<s-1&&(d+="<span>...</span>"),d+=`<button class="cmp-articlelisting__pagination--number-button"\n      aria-label="${a} ${s}"\n      >${s}</button>`),d+=t==s?`<button class='cmp-articlelisting__pagination--next-button'\n        aria-label="${l}" disabled></button>`:`<button class='cmp-articlelisting__pagination--next-button'\n        aria-label="${l}" ></button>`,t<=s&&(this.paginationContainer.classList.add("active"),this.paginationContainer.innerHTML=d)}addPaginationEventListeners(){document.querySelector(".cmp-articlelisting__pagination--previous-button").addEventListener("click",(()=>{this.currentPage=this.currentPage-1;const e=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchData(this.esEndPointURL,this.generateRequestData(e)),document.querySelector(".cmp-articlelisting").scrollIntoView({behavior:"smooth",block:"start"})})),document.querySelector(".cmp-articlelisting__pagination--next-button").addEventListener("click",(()=>{this.currentPage=this.currentPage+1;const e=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchData(this.esEndPointURL,this.generateRequestData(e)),document.querySelector(".cmp-articlelisting").scrollIntoView({behavior:"smooth",block:"start"})})),document.querySelectorAll(".cmp-articlelisting__pagination--number-button").forEach((e=>{e.addEventListener("click",(e=>{this.currentPage=parseInt(e.currentTarget.textContent,0);const t=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchData(this.esEndPointURL,this.generateRequestData(t)),document.querySelector(".cmp-articlelisting").scrollIntoView({behavior:"smooth",block:"start"})}))}))}hasValidResponse(e){return e&&0!==e.length}displayNoResultsMessage(){this.paginationContainer.classList.remove("active"),this.paginationContainer.innerHTML="",this.clearResultsContainer(),Na.removeClass({element:document.querySelector(".cmp-articlelisting__loadmore-container"),className:"active"}),Na.addClass({element:document.querySelector(".cmp-articlelisting__no-results"),className:"active"})}hideNoResultsMessage(){Na.removeClass({element:document.querySelector(".cmp-articlelisting__no-results"),className:"active"})}hasResults(e,t){return e&&Object.keys(e).length>0&&t>0}clearResultsContainer(){this.resultsContainer.innerHTML=""}renderResults(e){for(let t of e){const e=t._source,i=this.createArticleTile(e);this.resultsContainer.appendChild(i)}}generateRequestData(e){const t={};let i=this.filterElement.querySelectorAll(this.filterOption+'[aria-selected="true"]').length,s=i?this.filterOption+'[aria-selected="true"]':this.filterOption,n=i?"article_filter_template":"article_listing_template";["insights","industries","services","topics"].forEach((e=>{let i=this.filterElement.querySelector(`[data-category="${e}"]`);t[`${e}IDs`]=i?Array.from(i.querySelectorAll(s)).map((e=>e.getAttribute("data-zthesid"))):[]}));return{id:n,params:{insight_ids:t.insightsIDs,industry_ids:t.industriesIDs,service_ids:t.servicesIDs,topic_vals:t.topicsIDs,document_type:"INSIGHT",from:e||0,size:this.resultsPerPage,sort:"desc"}}}}const{DOMUtils:ka,KeyboardUtils:Da}=yn;yt((function(e){const t=e.element,i=t.getAttribute("id"),s="cmp-articlelisting__filter-option--selected";function n(){t.querySelectorAll(e.selectors.filterOption).forEach((e=>{ka.removeClass({element:e,className:s}),e.setAttribute("aria-selected",!1)})),t.querySelectorAll(".selected-count").forEach((e=>{e.textContent=""}));const n=window.adobeDataLayer.find((e=>e.component&&e.component[i]));vt("cmp:click","component."+i,{},{[i]:{"dc:title":"Article Listing - Clear Allâ","@type":n.component[i]["@type"]}})}function o(e){const i=e.currentTarget,n=i.classList.toggle(s);i.setAttribute("aria-selected",n);!function(e){const i=e.getAttribute("data-count-class"),n=e.querySelectorAll(`.${s}`).length,o=n?`(${n})`:"";t.querySelector(`.${i}`).textContent=o}(i.closest(".cmp-articlelisting__filter-list"))}new Aa(t).init(),new wa(e),new Ua(e),new Pa(e.selectors.accordion),t.querySelectorAll(e.selectors.clearAllbutton).forEach((e=>{e.addEventListener("click",n)})),t.querySelectorAll(e.selectors.filterOption).forEach((e=>{e.addEventListener("click",o)}))}),{selectors:{self:".cmp-articlelisting",tabsContainer:".cmp-articlelisting__tabs",tabLink:".cmp-articlelisting__tabs-link",tabPanel:".cmp-articlelisting__tabs-content",filterOption:".cmp-articlelisting__filter-option",clearAllbutton:".cmp-articlelisting__filter-clear",filterControls:".cmp-articlelisting__filter-controls",accordion:".cmp-articlelisting__filter-overlay-accordion",desktopFilters:".cmp-articlelisting__desktop-filters",mobileFilters:".cmp-articlelisting__mobile-filters",filterSubmitButton:".cmp-articlelisting__filter-submit",resultsContainer:".cmp-articlelisting__results-container"}});const{DOMUtils:Ma,KeyboardUtils:Fa}=yn;class qa{constructor(e){const t=e.element;this.tabActiveClassName="cmp-event-listing__tabs--content-active",this.tabList=t,this.tabLinks=this.tabList.querySelectorAll(e.selectors.tabLink),this.tabContents=this.tabList.querySelectorAll(e.selectors.tabPanel),this.componentID=t.getAttribute("id"),this.addEventListeners()}addEventListeners(){this.tabLinks.forEach((e=>{e.addEventListener("click",this.handleTabClick.bind(this)),e.addEventListener("keydown",this.handleKeyDown.bind(this))}))}handleTabClick(e){const t=e.currentTarget.getAttribute("aria-controls"),i=document.getElementById(t);this.hideAllTabs(),Ma.addClass({element:i,className:this.tabActiveClassName}),i.setAttribute("aria-hidden","false"),e.currentTarget.setAttribute("aria-selected","true"),e.currentTarget.setAttribute("tabindex","0");const s=window.adobeDataLayer.find((e=>e.component&&e.component[this.componentID]));vt("cmp:show","component."+this.componentID,{},{[this.componentID]:{"dc:title":e.currentTarget.textContent.trim(),"@type":s.component[this.componentID]["@type"],"repo:modifyDate":s.component[this.componentID]["repo:modifyDate"],parentId:s.component[this.componentID].parentId}})}handleTabFocus(e){this.handleTabClick(e)}handleKeyDown(e){const t=Array.from(this.tabLinks).indexOf(e.currentTarget);switch(Fa.getKeyID(e)){case"ARROWRIGHT":this.tabLinks[(t+1)%this.tabLinks.length].focus(),e.preventDefault();break;case"ARROWLEFT":this.tabLinks[(t-1+this.tabLinks.length)%this.tabLinks.length].focus(),e.preventDefault();break;case"HOME":this.tabLinks[0].focus(),e.preventDefault();break;case"END":this.tabLinks[this.tabLinks.length-1].focus(),e.preventDefault();break;case"ENTER":case" ":this.handleTabClick(e)}}hideAllTabs(){this.tabContents.forEach((e=>{Ma.removeClass({element:e,className:this.tabActiveClassName}),e.setAttribute("aria-hidden","true")})),this.tabLinks.forEach((e=>{e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1")}))}}class xa{constructor(e){this.resultsPerPage=e}generateRequestData(e=0){const t={};return["event_hierarchy","industry_hierarchy","service_hierarchy","insights_hierarchy"].forEach((e=>{const i=document.querySelector(`#${e}`);if(i){const s=Array.from(i.querySelectorAll("input[type='checkbox']:checked")).map((e=>e.getAttribute("value"))).filter((e=>null!==e&&""!==e));s.length>0&&(t[`${e}`]=s)}})),{insight_ids:t.insights_hierarchy?t.insights_hierarchy:"",industry_ids:t.industry_hierarchy?t.industry_hierarchy:"",service_ids:t.service_hierarchy?t.service_hierarchy:"",event_type_vals:t.event_hierarchy?t.event_hierarchy:"",from:e,size:this.resultsPerPage}}}var Va=class{constructor(e,t,i,s,n,o){this.containerID=e,this.paginationClassName=e+"__pagination",this.totalResults=t,this.currentPage=o||1,this.resultsPerPage=i,this.url=s,this.errorContainerClass=n,this.maxNumbers=5,this.minPages=7,this.totalPages=Math.ceil(this.totalResults/this.resultsPerPage),this.dataAttributes=document.querySelector(".cmp-event-listing").dataset,this.requestDataGenerator=new xa(i)}fetchEvents=(e,t,i)=>{let s;s=e.classList.contains("cmp-event-listing__past-content__pagination--previous-button")||e.classList.contains("cmp-event-listing__past-content__pagination--number-button")||e.classList.contains("cmp-event-listing__past-content__pagination--next-button")?"event_listing_template_past_events":"event_listing_template_upcoming_events";const n={id:s,params:this.requestDataGenerator.generateRequestData(i)};new Ha(this.url,n,this.containerID,this.errorContainerClass,this.resultsPerPage,t).fetchEvents(),document.querySelector(".cmp-event-listing").scrollIntoView({behavior:"smooth",block:"start"})};handlePreviousButtonClick=e=>{this.currentPage=this.currentPage-1;const t=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchEvents(e.target,this.currentPage,t)};handleNextButtonClick=e=>{this.currentPage=this.currentPage+1;const t=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchEvents(e.target,this.currentPage,t)};handleNumberButtonClick=(e,t)=>{this.currentPage=e;const i=this.currentPage*this.resultsPerPage-this.resultsPerPage;this.fetchEvents(t,this.currentPage,i)};calculatePages(){let e,t;return this.totalPages<this.maxNumbers&&(this.maxNumbers=this.totalPages),this.totalPages<=this.maxNumbers?(e=1,t=this.maxNumbers):this.totalPages===this.minPages?(e=1,t=this.minPages):this.currentPage<=this.maxNumbers?(e=1,t=this.maxNumbers):this.currentPage+2>=this.totalPages?(e=this.totalPages-this.maxNumbers+1,t=this.totalPages):(e=this.currentPage-2,t=this.currentPage),{startPage:e,endPage:t}}generatePaginationHTML(){const{startPage:e,endPage:t}=this.calculatePages(),i=this.dataAttributes.paginationLabel,s=this.dataAttributes.paginationPageLabel,n=this.dataAttributes.paginationTotalPageLabel,o=this.dataAttributes.paginationNextPageLabel,r=this.dataAttributes.paginationPrevPageLabel;let a=`<div class="${this.paginationClassName}" role="navigation" aria-label="${i}">`;1==this.currentPage?a+=`<button class='${this.paginationClassName}--previous-button' aria-label="${r}" disabled></button>`:a+=`<button class='${this.paginationClassName}--previous-button' aria-label="${r}"></button>`,e>1&&(a+=`<button class="${this.paginationClassName}--number-button">1</button>`,e>2&&(a+="<span>...</span>"));for(let i=e;i<=t;i++)i==this.currentPage?a+=`<button class="active ${this.paginationClassName}--number-button" aria-label="${s} ${i}" aria-current="true">${i}</button>`:a+=`<button class="${this.paginationClassName}--number-button" aria-label="${s} ${i}">${i}</button>`;return t<this.totalPages&&(t<this.totalPages-1&&(a+="<span>...</span>"),a+=`<button class="${this.paginationClassName}--number-button" aria-label="${n} ${this.totalPages}">${this.totalPages}</button>`),this.currentPage==this.totalPages?a+=`<button class='${this.paginationClassName}--next-button' aria-label="${o}" disabled></button>`:a+=`<button class='${this.paginationClassName}--next-button' aria-label="${o}"></button>`,a+="</div>",a}renderPagination(){const e=this.generatePaginationHTML(),t=document.querySelector(`#${this.containerID}`);if(t){t.insertAdjacentHTML("afterend",e);const i=document.querySelector(`.${this.paginationClassName}--previous-button`),s=document.querySelector(`.${this.paginationClassName}--next-button`),n=document.querySelectorAll(`.${this.paginationClassName}--number-button`);i.addEventListener("click",this.handlePreviousButtonClick),s.addEventListener("click",this.handleNextButtonClick),n.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.textContent,0);this.handleNumberButtonClick(t,e)}))}))}}};const{DOMUtils:$a,DeviceUtils:Ba}=yn;class Ga{constructor(e){this.dataAttributes=document.querySelector(".cmp-event-listing").dataset,this.languageCode=this.dataAttributes.langCode,this.seriesTitle=e.event_series_title||"",this.subTitle=e.event_sub_title||"",this.title=e.title||"",this.description=e.description||"",this.startDate=e.formatted_event_start_time?e.formatted_event_start_time.replace(/\./g,""):"",this.endDate=e.formatted_event_end_time?e.formatted_event_end_time.replace(/\./g,""):"",this.eventType=e.event_type||"",this.eventLocation=e.event_location||"",this.ctaText=this.dataAttributes.ctaText,this.showSubTitle=this.dataAttributes.showSubtitle,this.showSeriesTitle=this.dataAttributes.showSeriestitle,this.hideSeriesTitleMobile=this.dataAttributes.hideMobileSeriestitle,this.hideSubTitleMobile=this.dataAttributes.hideMobileSubtitle,this.hideAddress=this.dataAttributes.hideAddress,this.eventURL=e.qualified_url||"",this.eventDate=e.event_start_time?new Date(e.event_start_time):"",this.month=this.eventDate?new Intl.DateTimeFormat(this.languageCode,{month:"short"}).format(this.eventDate):"",this.date=this.eventDate?new Intl.DateTimeFormat(this.languageCode,{day:"2-digit"}).format(this.eventDate):"",this.timeZone=e.event_time_zone?e.event_time_zone:"",this.startTime=e.event_start_time?new Date(e.event_start_time):"",this.endTime=e.event_end_time?new Date(e.event_end_time):""}formatTime(e){return isNaN(e)?"":e.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"})}render(){const e=$a.createElement("li",{classList:"cmp-event-listing__tile"}),t=$a.createElement("div",{classList:"cmp-event-listing__event-start-container"}),i=yn.DOMUtils.createElement("div",{classList:"cmp-event-listing__start-details"}),s=yn.DOMUtils.createElement("div",{classList:"cmp-event-listing__event-start-month",textContent:this.month.replace(/\./g,"")}),n=yn.DOMUtils.createElement("div",{classList:"cmp-event-listing__event-start-day",textContent:this.date});i.appendChild(s),i.appendChild(n),t.appendChild(i);const o=$a.createElement("div",{classList:"cmp-event-listing__event-details"}),r=$a.createElement("div",{classList:"cmp-event-listing__event-series-title",textContent:this.seriesTitle,"aria-label":this.seriesTitle});"true"===this.hideSeriesTitleMobile&&r.classList.add("hide-in-mobile");const a=$a.createElement("h5",{classList:"cmp-event-listing__event-title",textContent:this.title,"aria-label":this.title}),l=$a.createElement("div",{classList:"cmp-event-listing__event-sub-title",textContent:this.subTitle,"aria-label":this.subTitle});"true"===this.hideSubTitleMobile&&l.classList.add("hide-in-mobile");const c=$a.createElement("div",{classList:"cmp-event-listing__event-description",textContent:this.description,"aria-label":this.description}),d=$a.createElement("div",{classList:"hide-tablet"}),u=$a.createElement("a",{href:this.eventURL,classList:["cmp-event-listing__event-link"],"data-title":this.title+" - "+this.ctaText});u.innerHTML=`\n    <span class="cmp-event-listing-link-label">${this.ctaText}</span>\n    <span class="material-icons-outlined" aria-hidden="true"></span>`,d.appendChild(u),"true"===this.showSeriesTitle&&this.seriesTitle&&o.appendChild(r),o.appendChild(a),"true"===this.showSubTitle&&this.subTitle&&o.appendChild(l),o.appendChild(c),o.appendChild(d);const h=$a.createElement("div",{classList:"cmp-event-listing__event-info"}),m=$a.createElement("div",{classList:"cmp-event-listing__event-type",textContent:this.eventType.toUpperCase(),"aria-label":this.eventType});h.appendChild(m);const p=$a.createElement("div"),f=$a.createElement("span",{classList:"material-icons-outlined","aria-hidden":"true",textContent:"date_range"});p.appendChild(f),p.innerHTML+=this.startDate,this.startDate!==this.endDate&&(p.innerHTML+=" - "+this.endDate);const g=$a.createElement("div"),y=$a.createElement("span",{classList:"material-icons-outlined","aria-hidden":"true",textContent:"schedule"});g.appendChild(y),g.innerHTML+=`${this.formatTime(this.startTime)} - ${this.formatTime(this.endTime)} ${this.timeZone}`;const E=$a.createElement("div",{classList:"cmp-event-listing__event-location"}),v=$a.createElement("span",{classList:"material-icons-outlined","aria-hidden":"true",textContent:"location_on"});E.appendChild(v),E.innerHTML+=this.eventLocation;const b=$a.createElement("div",{classList:"show-tablet"}),S=$a.createElement("a",{href:this.eventURL,classList:["cmp-event-listing__event-link"]});return S.innerHTML=`\n    <span class="cmp-event-listing-link-label">${this.ctaText}</span>\n    <span class="material-icons-outlined" aria-hidden="true"></span>`,h.appendChild(p),this.startDate!==this.endDate||this.eventType&&this.eventType.includes("demand")||h.appendChild(g),"true"!==this.hideAddress&&this.eventLocation&&h.appendChild(E),h.appendChild(b),b.appendChild(S),e.appendChild(t),e.appendChild(o),e.appendChild(h),e}}var Ha=class{constructor(e,t,i,s,n,o){this.url=e,this.targetElementId=i,this.tabText=document.getElementById(this.targetElementId).getAttribute("data-text"),this.bodyData=t,this.errorContainerClass=s,this.errorContainerElement=document.querySelector("."+this.errorContainerClass),this.resultsPerPage=n,this.currentPage=o||1,this.device=new Ba,this.currentBreakPoint=this.device.getCurrentBreakPoint(),this.requestDataGenerator=new xa(this.resultsPerPage),this.componentID=document.querySelector(".cmp-event-listing").getAttribute("id");document.querySelector(`.${this.targetElementId}--loadmore`).addEventListener("click",(e=>{this.currentPage=this.currentPage+1;const t=this.currentPage*this.resultsPerPage-this.resultsPerPage;let i;i=e.target.classList.contains("cmp-event-listing__past-content--loadmore")?"event_listing_template_past_events":"event_listing_template_upcoming_events";const s=this.requestDataGenerator.generateRequestData(t);this.bodyData={id:i,params:s},this.fetchEvents()}))}async fetchEvents(){try{const e=await Oo(this.url,this.bodyData);if(document.querySelector(`.${this.targetElementId}__pagination`)&&document.querySelector(`.${this.targetElementId}__pagination`).remove(),e.hits){const t=e.hits.total.value;if(t){document.getElementById(this.targetElementId).setAttribute("data-total-results",t);const i=Math.ceil(t/this.resultsPerPage);if(this.currentPage<i?$a.addClass({element:document.querySelector(`.${this.targetElementId}--loadmore-container`),className:"active"}):$a.removeClass({element:document.querySelector(`.${this.targetElementId}--loadmore-container`),className:"active"}),this.displayEvents(e.hits),this.initListeners(this.componentID),t>this.resultsPerPage){let e;e||(e=new Va(this.targetElementId,t,this.resultsPerPage,this.url,this.errorContainerClass,this.currentPage)),e.renderPagination()}this.hideErrorContainer(),this.triggerDataLoadAnalytics(this.currentPage,t,this.tabText)}else this.triggerDataLoadAnalytics(this.currentPage,0,this.tabText),this.showErrorContainer()}}catch{this.triggerDataLoadAnalytics(this.currentPage,0,this.tabText),this.showErrorContainer()}}initListeners(e){document.querySelectorAll(`#${e} .cmp-event-listing__event-link`).forEach((t=>{t.getAttribute("data-listener-added")||(t.addEventListener("click",(t=>{const i=window.adobeDataLayer.find((t=>t.component&&t.component[e]));let s="cmp:pasteventsclicks";"cmp-event-listing__upcoming-content"===this.targetElementId&&(s="cmp:upcomingclicks"),vt(s,"component."+e,{},{[e]:{"dc:title":this.tabText+" | "+t.currentTarget.getAttribute("data-title"),"xdm:linkURL":t.currentTarget.getAttribute("href"),"@type":i.component[e]["@type"],parentId:i.component[e].parentId,"repo:modifyDate":i.component[e]["repo:modifyDate"],filterInfo:{EventTypeFilter:this.getAnalyticsData("event_hierarchy"),IndustriesFilter:this.getAnalyticsData("industry_hierarchy"),ServicesFilter:this.getAnalyticsData("service_hierarchy"),InsightsFilter:this.getAnalyticsData("insights_hierarchy"),numResults:document.getElementById(this.targetElementId).getAttribute("data-total-results").toString(),pageCount:this.currentPage.toString(),searchInstance:"result update",searchPage:"Event Listing"}}})})),t.setAttribute("data-listener-added","true"))}))}getAnalyticsData(e){const t=document.getElementById(e);if(!t)return"";const i=t.querySelectorAll("input[type='checkbox']:checked");if(!i.length)return"";const s=e=>Array.from(e).map((e=>e.getAttribute("data-text"))).join(", ");let n="";if("event_hierarchy"===e){n=`${t.querySelector(".cmp-event-listing__filter-accordion--button").getAttribute("data-text")} > ${s(i)}`}else{const e=t.querySelectorAll(".cmp-event-listing__filter-accordion--nested-accordion .cmp-event-listing__filter-accordion--item");n=Array.from(e).map((e=>{const t=e.querySelectorAll("input[type='checkbox']:checked");if(!t.length)return"";return`${e.querySelector(".cmp-event-listing__filter-accordion--button").getAttribute("data-text")} > ${s(t)}`})).filter((e=>e)).join(" | ")}return n}triggerDataLoadAnalytics(e,t,i){const s=window.adobeDataLayer.find((e=>e.component&&e.component[this.componentID]));let n="cmp:pasteventsshow";"cmp-event-listing__upcoming-content"===this.targetElementId&&(n="cmp:upcomingshow"),vt(n,"component."+this.componentID,{},{[this.componentID]:{"dc:title":`Event Listing | ${i} - Filter apply`,"@type":s.component[this.componentID]["@type"],parentId:s.component[this.componentID].parentId,"repo:modifyDate":s.component[this.componentID]["repo:modifyDate"],filterInfo:{EventTypeFilter:this.getAnalyticsData("event_hierarchy"),IndustriesFilter:this.getAnalyticsData("industry_hierarchy"),ServicesFilter:this.getAnalyticsData("service_hierarchy"),InsightsFilter:this.getAnalyticsData("insights_hierarchy"),numResults:t.toString(),pageCount:e.toString(),searchInstance:"result update",searchPage:"Event Listing"}}})}showErrorContainer(){document.querySelector(`#${this.targetElementId} ul`).innerHTML="";document.querySelectorAll(".cmp-event-listing__filter-overlay--content input[type='checkbox']:checked").length?(this.errorContainerElement.querySelector(".cmp-event-listing__error-title").innerHTML=this.errorContainerElement.querySelector(".cmp-event-listing__error-title").getAttribute("data-noresultstitle"),this.errorContainerElement.querySelector(".cmp-event-listing__error-description").innerHTML=this.errorContainerElement.querySelector(".cmp-event-listing__error-description").getAttribute("data-noresultsdesc")):(this.errorContainerElement.querySelector(".cmp-event-listing__error-title").innerHTML=this.errorContainerElement.querySelector(".cmp-event-listing__error-title").getAttribute("data-errortitle"),this.errorContainerElement.querySelector(".cmp-event-listing__error-description").innerHTML=this.errorContainerElement.querySelector(".cmp-event-listing__error-description").getAttribute("data-errordesc")),$a.addClass({element:this.errorContainerElement,className:this.errorContainerClass+"--active"})}hideErrorContainer(){$a.removeClass({element:this.errorContainerElement,className:this.errorContainerClass+"--active"})}displayEvents(e){const t=document.querySelector(`#${this.targetElementId} ul`);"DESKTOP_SMALL"!==this.currentBreakPoint&&"DESKTOP_MEDIUM"!==this.currentBreakPoint||(t.innerHTML="");for(let i of e.hits){const e=i._source,s=new Ga(e);t.appendChild(s.render())}}};class ja{constructor(e,t){this.data=e,this.modalHirarchy=t}generateMultiLevelHTML(e,t,i,s){if(!e||0===Object.keys(e).length)return"";const n=Object.keys(e)[0],{sl_locale_category:o,sl_category:r}=e[n],a=i||o||n,l="accordion-"+Math.random().toString(8).slice(2);return`\n        <div class="cmp-event-listing__filter-accordion--item ${s?"active":""}" role="presentation" id="${t}">\n            <button\n                class="cmp-event-listing__filter-accordion--button"\n                aria-expanded="${s?"true":"false"}"\n                aria-controls="${l}"\n                data-category="${a}"\n                data-locale-category="${r}"\n                data-text="${a}"\n            >\n                ${a}\n                <span class="chevron material-icons-outlined" aria-hidden="true">${s?"expand_less":"expand_more"}</span>\n            </button>\n            <div\n                id="${l}"\n                class="cmp-event-listing__filter-accordion--content cmp-event-listing__filter-accordion--nested-accordion"\n                aria-hidden="${s?"false":"true"}"\n            >\n                ${this.generateChildHTML(e[n],a)}\n            </div>\n        </div>`}sortObject(e){const t=Object.keys(e).sort(((e,t)=>e.localeCompare(t))),i={};return t.forEach((t=>{i[t]=e[t]})),i}generateChildHTML(e,t){const i=this.sortObject(e);let s="";for(const[e,n]of Object.entries(i)){const i="accordion-"+Math.random().toString(8).slice(2);if("sl_category"!==e&&"sl_locale_category"!==e){const{children:o={},id:r}=n;if(r){const n=document.querySelector(".cmp-event-listing").getAttribute("data-all-text")?document.querySelector(".cmp-event-listing").getAttribute("data-all-text"):"All";if(s+=`\n                <div class="cmp-event-listing__filter-accordion--item" role="presentation">\n                    <button\n                        class="cmp-event-listing__filter-accordion--button"\n                        aria-expanded="false"\n                        aria-controls="${i}"\n                        data-text="${t} > ${e}"\n                    >\n                        ${e} <span class="filter-count"></span>\n                        <span class="chevron material-icons-outlined" aria-hidden="true">expand_more</span>\n                    </button>\n                    <div\n                        id="${i}"\n                        class="cmp-event-listing__filter-accordion--content"\n                        aria-hidden="true"\n                    >\n                        <ul class="cmp-event-listing__filter--items-container">\n                            <li class="cmp-event-listing__filter--item">\n                                <input\n                                    class="cmp-event-listing__filter--item-input cmp-event-listing__filter--item-input-all"\n                                    type="checkbox"\n                                    id="${r}"\n                                    value="${r}"\n                                    data-text="${n}"\n                                />\n                                <label for="${r}" class="cmp-event-listing__filter--item-label">${n}</label>\n                            </li>`,0!==Object.keys(o).length){const e=this.sortObject(o);for(const[t,i]of Object.entries(e))i.id&&(s+=`\n                    <li class="cmp-event-listing__filter--item">\n                        <input\n                            class="cmp-event-listing__filter--item-input"\n                            type="checkbox"\n                            id="${i.id}"\n                            value="${i.id}"\n                            data-text="${t}"\n                        />\n                        <label for="${i.id}" class="cmp-event-listing__filter--item-label">${t}</label>\n                    </li>`)}s+="\n                        </ul>\n                    </div>\n                </div>"}}}return s}eventHTML(e,t,i,s){if(!e||0===Object.keys(e).length)return"";let n=`\n        <div class="cmp-event-listing__filter-accordion--item ${s?"active":""}" role="presentation" id="${t}">\n            <button\n                class="cmp-event-listing__filter-accordion--button"\n                aria-expanded="${s?"true":"false"}"\n                aria-controls="eventsSection"\n                data-text="${i||"Events"}"\n            >\n                ${i||"Events"}\n                <span class="chevron material-icons-outlined" aria-hidden="true">${s?"expand_less":"expand_more"}</span>\n            </button>\n            <div\n                id="eventsSection"\n                class="cmp-event-listing__filter-accordion--content"\n                aria-hidden="${s?"false":"true"}"\n            >\n                <ul class="cmp-event-listing__filter--items-container">`;const o=this.sortObject(e);for(const e of Object.keys(o))n+=`\n            <li class="cmp-event-listing__filter--item">\n                <input\n                    class="cmp-event-listing__filter--item-input"\n                    type="checkbox"\n                    id="${e}"\n                    value="${e}"\n                    data-text="${e}"\n                />\n                <label for="${e}" class="cmp-event-listing__filter--item-label">${e}</label>\n            </li>`;return n+="\n                </ul>\n            </div>\n        </div>",n}generateEventHTML(){const e=this.data.event_hierarchy;return this.eventHTML(e,"event_hierarchy",this.modalHirarchy.Events?this.modalHirarchy.Events.title:"",this.modalHirarchy.Events?this.modalHirarchy.Events.expand:"")}generateIndustryHTML(){const e=this.data.industry_hierarchy;return this.generateMultiLevelHTML(e,"industry_hierarchy",this.modalHirarchy.Industries?this.modalHirarchy.Industries.title:"",this.modalHirarchy.Industries?this.modalHirarchy.Industries.expand:"")}generateServiceHTML(){const e=this.data.service_hierarchy;return this.generateMultiLevelHTML(e,"service_hierarchy",this.modalHirarchy.Services?this.modalHirarchy.Services.title:"",this.modalHirarchy.Services?this.modalHirarchy.Services.expand:"")}generateInsightsHTML(){const e=this.data.insights_hierarchy;return this.generateMultiLevelHTML(e,"insights_hierarchy",this.modalHirarchy.Insights?this.modalHirarchy.Insights.title:"",this.modalHirarchy.Insights?this.modalHirarchy.Insights.expand:"")}generateHierarchyHTML(){return{event_hierarchy:this.generateEventHTML(),industry_hierarchy:this.generateIndustryHTML(),service_hierarchy:this.generateServiceHTML(),insights_hierarchy:this.generateInsightsHTML()}}}class Ka{constructor(e){this.selector=e,this.accordion=document.querySelector(e),this.items=this.accordion.querySelectorAll(this.selector+"--item"),this.componentID=document.querySelector(".cmp-event-listing").getAttribute("id"),this.init()}init(){this.items.forEach((e=>{const t=e.querySelector(this.selector+"--button");t.addEventListener("click",(()=>this.toggleAccordion(e))),t.addEventListener("keydown",(t=>this.handleKeyDown(t,e)))}))}toggleAccordion(e){const t=window.adobeDataLayer.find((e=>e.component&&e.component[this.componentID])),i=e.querySelector(this.selector+"--content"),s=e.querySelector(".chevron"),n=e.classList.toggle("active");i.setAttribute("aria-hidden",n?"false":"true"),s.textContent=n?"expand_less":"expand_more",e.querySelector(this.selector+"--button").setAttribute("aria-expanded",n.toString()),n?vt("cmp:show","component."+this.componentID,{},{[this.componentID]:{"dc:title":e.querySelector(this.selector+"--button").getAttribute("data-text"),"@type":t.component[this.componentID]["@type"]}}):vt("cmp:hide","component."+this.componentID,{},{[this.componentID]:{"dc:title":e.querySelector(this.selector+"--button").getAttribute("data-text"),"@type":t.component[this.componentID]["@type"]}})}handleKeyDown(e,t){switch(e.keyCode){case 13:case 32:e.preventDefault(),this.toggleAccordion(t);break;case 38:e.preventDefault();const i=t.previousElementSibling;i&&i.classList.contains("cmp-event-listing__filter-accordion--item")&&i.querySelector(this.selector+"--button").focus();break;case 40:e.preventDefault();const s=t.nextElementSibling;s&&s.classList.contains("cmp-event-listing__filter-accordion--item")&&s.querySelector(this.selector+"--button").focus()}}}class za{constructor(e){this.checkboxes=e.querySelectorAll(".cmp-event-listing__filter--item-input"),this.allCheckbox=e.querySelector(".cmp-event-listing__filter--item-input-all"),this.allCheckbox&&this.init()}init(){this.allCheckbox.addEventListener("change",(()=>this.handleAllCheckboxChange())),this.checkboxes.forEach((e=>{e.addEventListener("change",(()=>this.handleCheckboxChange(e)))}))}handleAllCheckboxChange(){this.checkboxes.forEach((e=>{e.checked=this.allCheckbox.checked,e.indeterminate=!1}))}handleCheckboxChange=e=>{if(!this.allCheckbox)return;const t=e.closest(".cmp-event-listing__filter-accordion--item").querySelector(".filter-count");let i=!0,s=!1;1===this.checkboxes.length?i=e.checked:this.checkboxes.forEach((e=>{e!==this.allCheckbox&&(e.checked?s=!0:i=!1)})),this.allCheckbox.checked=i;const n=e.closest(".cmp-event-listing__filter--items-container").querySelectorAll("input[type='checkbox']:checked");t.innerHTML=n.length?n.length:""}}const{DOMUtils:Wa,KeyboardUtils:Ya,DeviceUtils:Ja}=yn;class Xa{constructor(e){this.element=e}init(){this.apiURL=this.element.dataset.eventsEndpoint+this.element.dataset.countryCode+"_"+this.element.dataset.langCode,this.device=new Ja,this.componentID=this.element.getAttribute("id");const e=this.device.getCurrentBreakPoint();this.filterToggleButton=this.element.querySelector(".cmp-event-listing__filter-toggle-button.desktop-button"),"DEFAULT"!==e&&"TABLET"!==e||(this.filterToggleButton=this.element.querySelector(".cmp-event-listing__filter-toggle-button.mobile-button")),this.filterCloseButton=this.element.querySelector(".cmp-event-listing__filter-close-button"),this.filterOverlay=this.element.querySelector(".cmp-event-listing__filter-overlay"),this.filterCategoriesModalHirarchy=this.filterOverlay.getAttribute("data-list-items"),this.filterCategoriesModalHirarchy&&(this.filterCategoriesModalHirarchy=JSON.parse(this.filterCategoriesModalHirarchy).reduce(((e,t)=>{const i=Object.keys(t)[0];return e[i]=t[i],e}),{})),this.filterToggleButton.addEventListener("click",(()=>this.toggleEventFilterOverlay())),this.filterCloseButton.addEventListener("click",(()=>this.toggleEventFilterOverlay())),this.filterCloseButton.addEventListener("keyup",(e=>{const t=Ya.getKeyID(e);"ENTER"!==t&&"ESCAPE"!==t||this.toggleEventFilterOverlay()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeEventFilterOverlay()})),this.fetchFilterTagsData(this.apiURL)}decodeHtmlEntities(e){const t=document.createElement("textarea");t.innerHTML=e;const i=t.value;return t.remove(),i}fetchFilterTagsData=async e=>{try{const t=document.getElementById("accordion"),i=e+"_suggestions",s={id:"filter_default_template",params:{categories:["Services","Insights","Industries"],levels:["1","2"]}},n=e+"/_search/template",o={id:"event_filter_template"},r=await Oo(i,s),a=await Oo(n,o),l=r.hits.hits.reduce(((e,t)=>{const{sl_category:i,sl_locale_category:s,suggestion_identifier:n,suggestion_text:o}=t._source;return e[n]={id:n,sl_category:i,sl_locale_category:s,suggestion_text:o},e}),{}),c=e=>{const t={};if(e&&e.buckets){e.buckets.forEach((e=>{const i=e.key.split("/");let s=t;i.forEach(((e,n)=>{if(!s[e])if(s[e]={},0===n){const t=Object.values(l).find((t=>t.sl_locale_category===e));t&&(s[e].sl_category=t.sl_category,s[e].sl_locale_category=t.sl_locale_category)}else if(1===n){s[e].children={};const n=t[i[0]].sl_category,o=Object.values(l).find((t=>t.sl_category===n&&t.suggestion_text===this.decodeHtmlEntities(e)));s[e].id=o?o.id:""}if(s=s[e],1===n&&3===i.length){const e=t[i[0]].sl_category,n=i[2],o=Object.values(l).find((t=>t.sl_category===e&&t.suggestion_text===this.decodeHtmlEntities(n)));s.children[n]={id:o?o.id:""}}}))}))}return t},d={service_hierarchy:c(a.aggregations.service_hierarchy),event_hierarchy:c(a.aggregations.event_hierarchy),industry_hierarchy:c(a.aggregations.industry_hierarchy),insights_hierarchy:c(a.aggregations.insights_hierarchy)},u=new ja(d,this.filterCategoriesModalHirarchy).generateHierarchyHTML(),h=u.industry_hierarchy,m=u.service_hierarchy,p=u.insights_hierarchy,f={Events:u.event_hierarchy,Industries:h,Services:m,Insights:p};this.filterCategoriesModalHirarchy?Object.keys(this.filterCategoriesModalHirarchy).forEach((e=>{f[e]&&t.insertAdjacentHTML("beforeend",f[e])})):Object.keys(f).forEach((e=>{t.insertAdjacentHTML("beforeend",f[e])})),new Ka(".cmp-event-listing__filter-accordion");document.querySelectorAll(".cmp-event-listing__filter--items-container").forEach((e=>new za(e)))}catch{}};toggleEventFilterOverlay(){this.filterOverlay.classList.contains("active")?this.closeEventFilterOverlay():this.openEventFilterOverlay()}closeEventFilterOverlay(){Wa.resumeScroll(),document.documentElement.classList.remove("cmp-event-listing__overlay-active"),Wa.removeClass({element:this.filterOverlay,className:"visually-active"}),this.filterToggleButton.focus(),setTimeout((()=>{Wa.removeClass({element:this.filterOverlay,className:"active"})}),900);const e=window.adobeDataLayer.find((e=>e.component&&e.component[this.componentID]));vt("cmp:hide","component."+this.componentID,{},{[this.componentID]:{"dc:title":"Event Listing - Filter Close","@type":e.component[this.componentID]["@type"]}})}openEventFilterOverlay(){Wa.addClass({element:this.filterOverlay,className:"active"}),document.documentElement.classList.add("cmp-event-listing__overlay-active"),Wa.stopScroll(),setTimeout((()=>{Wa.addClass({element:this.filterOverlay,className:"visually-active"}),Ro(this.filterOverlay),this.filterCloseButton.focus()}),100);const e=window.adobeDataLayer.find((e=>e.component&&e.component[this.componentID]));vt("cmp:show","component."+this.componentID,{},{[this.componentID]:{"dc:title":"Event Listing - Filter Open","@type":e.component[this.componentID]["@type"]}})}}const{DOMUtils:Qa}=yn;yt((function(e){const t=e.element,i=t.getAttribute("id"),s=t.dataset.eventsEndpoint+t.dataset.countryCode+"_"+t.dataset.langCode+"/_search/template",n=t.querySelector(e.selectors.clearAllbutton),o=t.querySelector(e.selectors.applyFilterButton);function r(){t.querySelector(`#${e.selectors.upcomingEvents} ul`).innerHTML="",t.querySelector(`#${e.selectors.pastEvents} ul`).innerHTML="",Qa.removeClass({element:document.querySelector(`.${e.selectors.upcomingEvents}--loadmore-container`),className:"active"}),Qa.removeClass({element:document.querySelector(`.${e.selectors.pastEvents}--loadmore-container`),className:"active"});const i=new xa(5).generateRequestData(0),n={id:"event_listing_template_past_events",params:i},o=new Ha(s,{id:"event_listing_template_upcoming_events",params:i},e.selectors.upcomingEvents,e.selectors.upcomingError,5),r=new Ha(s,n,e.selectors.pastEvents,e.selectors.pastError,5);o.fetchEvents(),r.fetchEvents()}if(n.addEventListener("click",(function(){t.querySelectorAll(".cmp-event-listing__filter--item-input").forEach((e=>{e.checked=!1,e.indeterminate=!1})),t.querySelectorAll(".filter-count").forEach((e=>{e.innerHTML=""}));const e=window.adobeDataLayer.find((e=>e.component&&e.component[i]));vt("cmp:click","component."+i,{},{[i]:{"dc:title":"Event Listing - Clear All","@type":e.component[i]["@type"]}})})),o.addEventListener("click",(function(){t.querySelector(".cmp-event-listing__filter-close-button").click(),r();const e=t.querySelectorAll("input[type='checkbox']:checked").length;e?(t.querySelector(".cmp-event-listing__filter-count").innerHTML=e,Qa.addClass({element:document.querySelector(".cmp-event-listing__filter-label"),className:"active"})):Qa.removeClass({element:document.querySelector(".cmp-event-listing__filter-label"),className:"active"}),t.querySelectorAll(".count-badge").forEach((t=>{t.innerHTML=e||""}))})),new qa(e),wn()){r();new Xa(t).init()}}),{selectors:{self:".cmp-event-listing",tabLink:".cmp-event-listing__tabs--link",tabPanel:".cmp-event-listing__tabs--content",upcomingEvents:"cmp-event-listing__upcoming-content",pastEvents:"cmp-event-listing__past-content",pastError:"cmp-event-listing__past-error",upcomingError:"cmp-event-listing__upcoming-error",clearAllbutton:".cmp-event-listing__filter-overlay--clear-all",applyFilterButton:".cmp-event-listing__filter-overlay--apply-filter"}});const{DebugUtils:Za,DOMUtils:el,DeviceUtils:tl}=yn;yt(class{#re;#Nt;#Rt;#Ut;#kt;#Dt;#Mt="cmp-search-input--sticky";constructor(e){const t="cmp-search-input";this.#re=new Za({constructorName:`${this.constructor.name}`,origin:t}),this.#Ut=e.element,this.initAutoComplete({name:this.constructor.name,searchElement:this.#Ut,parentClass:t}),this.#Nt=new tl,this.#Rt=this.#Nt.getData().rootSize,this.#kt=3*this.#Rt,this.#Dt=6*this.#Rt,this.initEventListeners(),this.#re.log("Init",this)}initAutoComplete(e={}){const{searchElement:t,parentClass:i}=e;t&&i?new aa({searchElement:t,parentClass:i}):this.#re.error("Missing parameters",e)}stickSearchInput(e){const{addClass:t,removeClass:i,getMaxZIndex:s}=el,n=this.#Ut,o={element:n,className:this.#Mt},r=this.#Nt.getData(),{currentBreakPoint:a}=r,l="default"===a?this.#kt:this.#Dt,c=s();e>l?(n.dataset.customZIndex||(n.dataset.customZIndex=c+1),n.style.zIndex=n.dataset.customZIndex,t(o)):(n.style.zIndex="",i(o))}initEventListeners(){let e=0,t=!1;document.addEventListener("scroll",(()=>{e=window.scrollY,t||(window.requestAnimationFrame((()=>{this.stickSearchInput(e),t=!1})),t=!0)}))}},{selectors:{self:"[data-cmp-search-input]"}});var il=JSON.parse('{"callId":"4bfe6271db9d8bdbb1215f55583dd9ff","errorCode":0,"apiVersion":2,"statusCode":200,"statusReason":"OK","time":"2024-06-21T13:54:50.420Z","registeredTimestamp":1717686674000,"UID":"2156dfb26b4d46108bc5fa123bf411c1","UIDSignature":"ox4mSvl5ttdGC+Q/8JSAsjAy4ys=","signatureTimestamp":"1718978090","created":"2024-06-06T15:11:12.105Z","createdTimestamp":1717686672000,"data":{"termsone":true,"terms":true,"organizations":["Participant Company","Participant Company 2","Participant Company 3"],"kpmg":{"registeredLocale":"ch/en","client":false,"employee":true},"loginCount":1,"websiteURL":"https://kpmg.com","linkedInProfile":"https://www.linkedin.com/in/1234","twitterProfile":"https://twitter.com/1234","feedbackOptOut":true},"subscriptions":{"ch":{"en":{"communication_opt_in":{"email":{"isSubscribed":true}},"subscription_7":{"email":{"isSubscribed":true,"lastUpdatedSubscriptionState":"2024-04-29T14:47:23.134Z","tags":null,"doubleOptIn":{"doiConditionallyConfirmed":null,"confirmTime":null,"emailSentTime":null,"status":"NotConfirmed"}}}}}},"requestParams":{"APIKey":"mock-api-key-for-gigya"},"isActive":true,"isRegistered":true,"isVerified":true,"lastLogin":"2024-06-21T13:43:29.247Z","lastLoginTimestamp":1718977409000,"lastUpdated":"2024-06-21T13:49:54.308Z","lastUpdatedTimestamp":1718977794308,"loginProvider":"site","oldestDataUpdated":"2024-06-06T15:11:12.105Z","oldestDataUpdatedTimestamp":1717686672105,"profile":{"firstName":"Dave","lastName":"Boyle","profileURL":"https://qa.kpmg.com/content/dam/kpmg/images/platform/KPMG.png","city":"Toronto","country":"CA","phones":[{"number":"123-456-7890","type":"work"}],"email":"daveboyle+10@kpmg.ca","photoURL":"https://qa.kpmg.com/content/dam/kpmg/images/platform/KPMG.png","state":"ON","thumbnailURL":"https://qa.kpmg.com/content/dam/kpmg/images/platform/KPMG.png","work":[{"company":"KPMG","title":"Senior Front End Engineer","companySize":500}]},"registered":"2024-06-06T15:11:14.017Z","socialProviders":"site","verified":"2024-06-06T15:12:16.482Z","verifiedTimestamp":1717686736482}');var sl={PPC_SELECTORS:{dashboard:"cmp-ppc-dashboard",preferenceManagement:{parent:"cmp-ppc-preference-management",submitButton:"cmp-ppc-preference-management-submit-button",confirmDialogTemplate:"cmp-ppc-preference-management-confirm-dialog"},subscriptions:{parent:"cmp-ppc-subscriptions",accordion:"cmp-ppc-subscriptions-accordion",accordionForm:"cmp-ppc-subscriptions-accordion-form",accordionFieldset:"cmp-ppc-subscriptions-accordion-fieldset",accordionItem:"cmp-ppc-subscriptions-accordion-item"},exclusiveContent:{parent:"cmp-ppc-exclusive-content",mainContainer:"cmp-ppc-exclusive-content-main-container",tabLinksContainer:"cmp-ppc-exclusive-content-tab-links-container",tabContentContainer:"cmp-ppc-exclusive-content-tab-content-container",tabLink:"cmp-ppc-exclusive-content-tab-link",tabContentPanel:"cmp-ppc-exclusive-content-tab-content-panel",checkbox:"cmp-ppc-exclusive-content-checkbox",form:"cmp-ppc-exclusive-content-form"}},ACCOUNT_INFO_STORAGE_KEY:"accountInfo",USER_ACCOUNT_INCLUDES:["identities-active","identities-all","loginIDs","emails","subscriptions","preferences","profile","data","irank","regSource"],IPG_FILTER:["nickname","photoURL","thumbnailURL","profileURL","hometown","zip","languages","address","phones","education","honors","publications","patents","certifications","professionalHeadline","bio","industry","specialties","skills","religion","politicalView","interestedIn","relationshipStatus","hometown","favorites","likes","followersCount","followingCount","iRank","timezone","work","companyID","description","endDate","industry","isCurrent","location","startDate","gender","educationLevel","degree","endYear","fieldOfStudy","school","schoolType","startYear"],SAP_ERROR_ACCOUNT_PENDING_VERIFICATION:206002,SAP_ERROR_ACCOUNT_PENDING_REGISTRATION:206001,EMAIL_VALUE_LOCAL_STORAGE_KEY:"login-form-email-value",SESSION_VALID_EVENT_NAME:"onload-valid-session",SESSION_INVALID_EVENT_NAME:"onload-invalid-session",SESSION_LOGOUT_EVENT_NAME:"session-logout",PPC_PREFERENCES_CATEGORY_TO_ES_CATEGORY_MAP:{Industries:"industry",Insights:"insight",Services:"service"},EXCLUSIVE_COTNTENT_CATEGORIES:["Industries","Insights","Services"],PPC_USER_NAVIGATION_URLS:"navUtils",LOGOUT_CHECK_STORAGE_KEY:"userlogout",PPC_PAGE_NAMES:{LOGIN:"login",HOME:"home",PROFILE:"profile",REGISTRATION:"registration",PREFERENCEMANAGEMENT:"preferenceManagement"},OTP_VALIDITY_CHANGE_EVENT:"otp-validity-change",IGNORE_FORM_FIELDS:["confirm-password"],CUSTOM_FORM_FIELD_NAMES:["customField1","customField2","customField3","customField4","customField5"],SAP_ERROR_PENDING_AUTOLOGIN_FINALIZATION:206005,PPC_USER_STICKYDISABLED_SITES:"stickyDisabledSites",SAP_ERROR_MAX_OTP_TRIES:403e3,SIGNUP_JOURNEY_PAGENAME:"previousPageName",SAP_ERROR_SESSION_EXPIRED:403011,PPC_LOGIN_BANNER_KEY:"displayPrefLink",PPC_LOGIN_BANNER_KEY_CLOSED:"displayPrefLinkClosed"};const{URLUtils:nl}=yn,ol="local"==nl.getInstance().instance;function rl(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"errorCode")}async function al({url:e,body:t,method:i="POST",headers:s={"Content-Type":"application/json"}}){return async function({url:e,method:t,body:i,headers:s}){try{const n=await fetch(e,{method:t,body:i,headers:s,redirect:"follow"});return await n.json()}catch(e){throw e}}({url:e,body:JSON.stringify(t),method:i,headers:s})}const{DebugUtils:ll,EventUtils:cl,DOMUtils:dl,CookieUtils:ul,URLUtils:hl}=yn,ml=new ll({constructorName:"ppc",origin:"ppc"});const pl=window.SessionManager=new class{#Ft;#qt=!1;#xt;#Vt={CountryCode:"",LanguageCode:""};#$t;#Bt=null;#Gt=!1;#Ht=!1;get isFirstLogin(){return this.#Ht}constructor(){this.#$t=new cl.EventEmitter,this.Init()}Init(){this.#Vt.CountryCode=document.querySelector(".cmp-search")?.dataset.countryCode,this.#Vt.LanguageCode=document.querySelector(".cmp-search")?.dataset.languageCode;const e=hl.getURL().searchParams.errorCode;this.#Gt=e==sl.SAP_ERROR_PENDING_AUTOLOGIN_FINALIZATION}get HomePageURL(){return`${location.origin}/${this.CountryCode}/${this.LanguageCode}.html`}get LoggedIn(){return this.#qt}get CountryCode(){const e=this.#xt?.data?.kpmg?.registeredLocale?.split("/");return e&&e[0]?e[0]:this.#Vt.CountryCode}get LanguageCode(){const e=this.#xt?.data?.kpmg?.registeredLocale?.split("/");return e&&e[1]?e[1]:this.#Vt.LanguageCode}get SiteCountryCode(){return this.#Vt?.CountryCode}get SiteLanguageCode(){return this.#Vt?.LanguageCode}#jt(e){this.#xt=e}async checkSession(){if(this.#Ft=window?.gigya,this.#Kt(),ml.log("checkSession","gigya",this.#Ft),this.#Gt&&!this.isLoggedIn()&&this.#Ft){const e=await new Promise((e=>this.getAccountInfo({callback:e})));0==e?.errorCode?(this.#qt=!0,this.#xt=e,await this.#zt(e),this.#$t.dispatch(sl.SESSION_VALID_EVENT_NAME,e)):(this.#qt=!1,this.#$t.dispatch(sl.SESSION_INVALID_EVENT_NAME))}else if(this.isLoggedIn()){this.#qt=!0;const e=this.getStoredInfoIfActive();this.#xt=e,await this.#zt(e),this.#$t.dispatch(sl.SESSION_VALID_EVENT_NAME,e)}else this.#qt=!1,this.#$t.dispatch(sl.SESSION_INVALID_EVENT_NAME)}#Wt(e){this.#jt(e),this.#qt=!0,ml.log("gigya~onLogin",e,"provder",e?.provider,"remember-me",e?.mremember)}_isActiveUserData(e){return!!(e&&e.requestParams.APIKey&&ul.getCookie("glt_"+e.requestParams.APIKey))}#Yt(){const e="local"===hl.getInstance().instance,t=!!hl.getURL().searchParams.loggedin;if(e&&t){const e=cl.getLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY+"_localhost-debug");let t;return e?t=JSON.parse(e):(cl.saveLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY+"_localhost-debug",JSON.stringify(il)),t=il),t}}getStoredInfoIfActive(){const e=this.#Yt();if(e)return e;const t=cl.getLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY),i=!!t&&JSON.parse(t);return i&&this._isActiveUserData(i)?i:null}#Jt(){const e="local"===hl.getInstance().instance,t=!!hl.getURL().searchParams.loggedin;return e&&t}isLoggedIn(){return this.#Jt()||!!this.getStoredInfoIfActive()}async setAccountInfo(e){return new Promise(((t,i)=>{(async function(e){let t;return e?.callback&&(t=e.callback,delete e.callback),new Promise(((i,s)=>{if(ol){let e=0;if("number"==typeof e){if("function"==typeof t)try{t({errorCode:e})}catch(e){console.error(e)}i({errorCode:e})}else{if("function"==typeof t)try{t(e)}catch(e){console.error(e)}s(e)}}else window.gigya?.accounts?.setAccountInfo?window.gigya.accounts.setAccountInfo({...e,callback:e=>{if("function"==typeof t)try{t(e)}catch(e){console.error(e)}i(e)}}):s(new Error("gigya.accounts.setAccountInfo is not available"))}))})(e).then((e=>{this.getAccountInfo({callback:()=>{t(e)}})})).catch(i)}))}getAccountInfo(e){return new Promise(((t,i)=>{const s=e&&"function"==typeof e.callback?e.callback:null;this.#Ft.accounts.getAccountInfo({...e,extraProfileFields:sl.IPG_FILTER.join(","),include:sl.USER_ACCOUNT_INCLUDES.join(","),callback:e=>{0==e?.errorCode&&this.haveAccountInfo(e);try{s&&s(e)}catch(e){console.warn(e)}"object"==typeof e?t(e):i(new Error(e))}})}))}haveAccountInfo(e){e&&!e.requestParams&&(e.requestParams={}),e.requestParams.APIKey||(e.requestParams.APIKey=this.#Ft.apiKey),this.#xt=e,cl.saveLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY,JSON.stringify(e))}doSocialLogin(e={}){return new Promise(((t,i)=>{this.#Ft||i(),this.#Ft.accounts.socialLogin({...e,regSource:window.location.origin+window.location.pathname,callback:e=>{this.fetchPPCPageUrls().finally((()=>{if(!e)return i(e);0==e.errorCode&&pl.haveAccountInfo(e),t(e)}))}})}))}doSocialRegistration(e,t=!1){return new Promise(((i,s)=>{this.setAccountInfo({...e,callback:n=>{const{errorCode:o}=n;0==o?async function(e){let t;e?.callback&&(t=e.callback,delete e.callback),new Promise(((i,s)=>{ol?al({url:"/bin/kpmg/f-r",body:e}).then((e=>{try{t(e)}catch(e){console.warn(e)}i(e)}),(e=>{try{t(e)}catch(e){console.warn(e)}s(e)})):window.gigya?.accounts?.finalizeRegistration({...e,callback:e=>{try{t(e)}catch(e){console.error(e)}i(e)}})}))}({regToken:e.regToken,callback:e=>{this.fetchPPCPageUrls().finally((()=>{e&&0==e.errorCode?this.getAccountInfo({callback:s=>{if(s&&0==s.errorCode){this.haveAccountInfo(s);try{t&&this.#$t.dispatch(sl.SESSION_VALID_EVENT_NAME,s)}catch(e){console.error(e)}}i(e)}}):s(e)}))}}):s(n)}})}))}async#zt(e){let t=!1;const i=e?.data?.loginCount||1;if(this.#Ht=i<=1,this.#Ht)try{await pl.setAccountInfo({data:{loginCount:2}}),t=!0}catch(e){console.error(e)}else e&&this.haveAccountInfo(e);return t}doLogin(e={}){return new Promise(((t,i)=>{if(!this.#Ft||!this.#Ft.accounts)return i();this.#Ft.accounts.login({...e,callback:async e=>{if(e&&0==e.errorCode)return await this.#zt(e),void this.fetchPPCPageUrls().finally((()=>{t(e)}));i(e)}})}))}async OTPLogin({code:e,vToken:t},i=!1){let s;try{s=await async function({code:e,vToken:t}){return new Promise(((i,s)=>{ol?al({url:"/bin/kpmg/mock/otp-login",body:{code:e,vToken:t}}).then(i,s):window.gigya?.accounts?.otp?.login?.({vToken:t,code:e,regSource:window.location.origin+window.location.pathname,extraProfileFields:sl.IPG_FILTER.join(","),include:sl.USER_ACCOUNT_INCLUDES.join(","),callback:e=>rl(e)?i(e):s(e)})}))}({code:e,vToken:t})}catch(e){throw e}const n=s?.errorCode;if(0!==n)return s;await this.#zt(s);try{await this.fetchPPCPageUrls()}catch(e){console.error(e)}if(i)try{this.#$t.dispatch(sl.SESSION_VALID_EVENT_NAME,s)}catch(e){console.error(e)}return s}redirectToPPCPage(e){const t=JSON.parse(cl.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS)),i=t&&t[e];i?hl.navigateToURL(i):ml.warn("no url to redirect to for page : "+e)}async fetchPPCPageUrls(){const e="/bin/kpmg/accounts/pagereferences?locale="+pl.LanguageCode+"&country="+pl.CountryCode;let t,i;try{t=await fetch(e)}catch(e){return void console.error(e)}if(t||200===t.status)try{return i=this.#Bt=await t.json(),cl.saveLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS,JSON.stringify(i)),i}catch(e){return void console.error(e)}}subscriptionStatus(){const e=this.getStoredInfoIfActive()?.subscriptions;for(const t in e)for(const i in e[t])for(const s in e[t][i])if("subscription_opt_in"!==s&&"terms"!==s&&"communication_opt_in"!==s&&e[t][i][s]?.email?.isSubscribed)return!0;return!1}onLogout(e){this.#qt=!1,ml.log("onLogout",e),cl.removeLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY),cl.removeLocalStorageValue(sl.PPC_USER_STICKYDISABLED_SITES)}#Xt(e){ml.error("onError",e)}#Kt(){this.#Ft?.accounts?.addEventHandlers({onLogin:(...e)=>this.#Wt(...e),onLogout:(...e)=>this.onLogout(...e),onError:(...e)=>this.#Xt(...e)})}on(e,t){this.#$t.on(e,t);const i=[];switch(!0){case e===sl.SESSION_VALID_EVENT_NAME&&this.isLoggedIn():i.push(this.getStoredInfoIfActive());case e===sl.SESSION_INVALID_EVENT_NAME&&!this.isLoggedIn():requestAnimationFrame((()=>t&&t(...i)))}}off(e,t){this.#$t.off(e,t)}async redirectOnUnAuthorisedAccess(e){if(!this.#Gt&&!cl.getLocalStorageValue(sl.ACCOUNT_INFO_STORAGE_KEY)){cl.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS)||await pl.fetchPPCPageUrls(),pl.redirectToPPCPage(e)}}redirectOnCrossSite(e){pl.CountryCode+pl.LanguageCode!==pl.SiteCountryCode+pl.SiteLanguageCode&&pl.redirectToPPCPage(e)}};dl.onDocumentReady((()=>{("local"==hl.getInstance().instance||wn())&&pl.checkSession()})),window.addEventListener("pageshow",(function(e){if(e.persisted||"back_forward"===performance.getEntriesByType("navigation")[0].type){"true"===document.querySelector(".cmp-ppc-navigation")?.dataset.wasLoggedOut&&location.reload()}}),!1);var fl=pl;let gl=null;function yl(e){gl||(gl=oo(document.body)),gl.Update(""),e&&setTimeout((()=>{gl.Update(e)}),2e3)}class El{#se={PARENT:null,ROOT:null,CONTENT:null};Init(e){if(this.#se.PARENT=e,e){if(this.#se.ROOT=e.querySelector(".ppc-loading-spinner-container"),this.#se.ROOT)return this.#se.ROOT=document.body.appendChild(this.#se.ROOT),this.#se.CONTENT=this.#se.ROOT.querySelector(".loading-spinner"),console.log("LoadingSpinner","this.#UI.CONTENT",typeof this.#se.CONTENT?.tagName),this;console.log("LoadingSpinner","no element found")}else console.log("LoadingSpinner","no root provided")}show(){return this.#se.ROOT?.classList.add("show"),document.body.classList.add("utils-no-scroll"),console.log("debug","AnnounceLiveContent~this.#UI.CONTENT",typeof this.#se.CONTENT?.tagName),yl(this.#se.CONTENT.innerHTML),this}hide(){return oi.removeClass({element:this.#se.ROOT,className:"show"}),document.body.classList.remove("utils-no-scroll"),console.log("debug","AnnounceLiveContent~this.#UI.CONTENT",typeof this.#se.CONTENT?.tagName),yl(""),this}}const{EventUtils:vl}=yn,{SESSION_VALID_EVENT_NAME:bl,PPC_USER_NAVIGATION_URLS:Sl}=sl;class Cl{#Qt;#Zt;#ei;api;#ti;#ii={userloginCta:".cmp-ppc-navigation__userlogin",loggedInCta:".cmp-ppc-navigation__loggedin",menuParent:".cmp-ppc-navigation__nav",close:".cmp-ppc-navigation__nav-close",logout:"[data-link-type='logout'] button",preferencemanagementLink:"[data-link-type='preferenceManagement'] a",profileLink:"[data-link-type='profile'] a"};constructor({element:e}){this.#Qt=e,this.init()}init(){fl.on(bl,((...e)=>this.onValidSession(...e))),this._outsideClickHandler=this._outsideClickHandler.bind(this)}onValidSession(e){this.#Zt=e,this.#Qt.querySelector(this.#ii.userloginCta)?.classList.add("hide"),this.#Qt.querySelector(this.#ii.preferencemanagementLink)&&(this.#Qt.querySelector(this.#ii.loggedInCta)?.classList.add("active"),this.#ei=e.profile?.firstName+" "+e.profile?.lastName,this.#Qt.querySelector(this.#ii.loggedInCta+" .cmp-menu-item__label")&&(this.#Qt.querySelector(this.#ii.loggedInCta+" .cmp-menu-item__label").innerText=this.#ei),this.addListeners())}addListeners(){this.#Qt.querySelector(this.#ii.loggedInCta)?.addEventListener("click",(()=>this.toggleMenu())),this.#Qt.querySelector(this.#ii.close)?.addEventListener("click",(()=>this.toggleMenu())),this.#Qt.querySelector(this.#ii.logout)?.addEventListener("click",(e=>this.logout(e))),this.crossSiteCheck(),document.addEventListener("keyup",(e=>{"Escape"===e.key&&this.#Qt.querySelector(this.#ii.menuParent).classList.contains("open")&&this.toggleMenu()}))}crossSiteCheck(){const e=document.querySelector(".cmp-search")?.dataset.countryCode,t=document.querySelector(".cmp-search")?.dataset.languageCode;this.#Zt?.data?.kpmg.registeredLocale!==e+"/"+t&&(vl.getLocalStorageValue(Sl)?this.appendCrossSiteLinks():fl.fetchPPCPageUrls().finally((()=>{this.appendCrossSiteLinks()})))}appendCrossSiteLinks(){if(vl.getLocalStorageValue(Sl)&&this.#Qt.querySelector("[data-link-type='preferenceManagement'] a")&&this.#Qt.querySelector("[data-link-type='profile'] a")){const e=JSON.parse(vl.getLocalStorageValue(Sl));e.preferenceManagement&&this.#Qt.querySelector("[data-link-type='preferenceManagement'] a").setAttribute("href",e.preferenceManagement),e.profile&&this.#Qt.querySelector("[data-link-type='profile'] a").setAttribute("href",e.profile)}}toggleMenu(){const e=this.#Qt.querySelector(this.#ii.menuParent),t=this.#Qt.querySelector(this.#ii.loggedInCta);if(e.classList.contains("open"))e.classList.remove("open"),e.classList.remove("overflow"),t?.setAttribute("aria-expanded","false"),document.removeEventListener("mousedown",this._outsideClickHandler);else{e.classList.add("open"),t?.setAttribute("aria-expanded","true");e.getBoundingClientRect().right-window.innerWidth>0?e.classList.add("overflow"):e.classList.remove("overflow"),document.addEventListener("mousedown",this._outsideClickHandler)}}_outsideClickHandler(e){const t=this.#Qt.querySelector(this.#ii.menuParent);this.#Qt.querySelector(this.#ii.loggedInCta).contains(e.target)||t.contains(e.target)||this.toggleMenu()}logout(e){const t=new El;t.Init(this.#Qt).show(),e.preventDefault(),window?.gigya?.accounts.logout({callback:()=>{this.#Qt.dataset.wasLoggedOut=!0,t.hide(),this.toggleMenu(),vl.saveLocalStorageValue(sl.LOGOUT_CHECK_STORAGE_KEY,"true"),vl.getLocalStorageValue(Sl)?fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.HOME):fl.fetchPPCPageUrls().finally((()=>{fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.HOME)}))}})}}yt(Cl,{selectors:{self:".cmp-ppc-navigation"}});const{EventUtils:Il}=yn,{SESSION_VALID_EVENT_NAME:_l,PPC_LOGIN_BANNER_KEY_CLOSED:Ll,PPC_LOGIN_BANNER_KEY:Tl,PPC_USER_STICKYDISABLED_SITES:Al}=sl;class Ol{#Qt;#ii={cancelCta:".close-icon"};#si=fl.SiteCountryCode;#ni=[];constructor({element:e}){this.#Qt=e,this.init()}init(){fl.on(_l,(()=>this.onValidSession()))}onValidSession(){const{UID:e}=fl.getStoredInfoIfActive(),t=`${Tl}_${e}`,i=`${Ll}_${e}`,s="1"===Il.getSessionStorageValue(i),n="1"===Il.getLocalStorageValue(t)&&!s;try{const e=JSON.parse(Il.getLocalStorageValue(Al)||"[]");this.#ni=Array.isArray(e)?e:[]}catch(e){console.warn("[PPCSticky] Invalid stickyDisabledSites JSON, resetting.",e),this.#ni=[]}const o=this.IsCrossCountry()&&!this.#ni.includes(this.#si);console.log(`\n      ==PPCSticky==\n      IsCrossCountry = ${this.IsCrossCountry()}\n      stickyDisabledSites = ${this.#ni}\n      displayCrossSiteBanner = ${o}\n      isClosedForSession = ${s}\n      displayLoginBanner = ${n}`),o?this.showCrossSiteBanner():n&&this.showLoginBanner()}showCrossSiteBanner(){this.#Qt.classList.add("open"),this.addListeners()}showLoginBanner(){const e=document.querySelector("body > .cmp-ppc-sticky--login-banner");if(!e)return;const t=e.querySelector("[data-msg]");if(t){const e=fl.getStoredInfoIfActive(),i={firstName:e?.profile?.firstName||"",lastName:e?.profile?.lastName||""};t.textContent=Lr(t.textContent,i)}const i=document.querySelector(".cmp-experiencefragment--header")?.parentElement;i&&i.parentNode&&i.insertAdjacentElement("afterend",e),e.classList.add("open");const s=e.querySelector("[data-close-button]");s?.addEventListener("click",(()=>{e.remove();const{UID:t}=fl.getStoredInfoIfActive(),i=`${Ll}_${t}`;Il.saveSessionStorageValue(i,"1")}))}IsCrossCountry(){return!!fl.CountryCode&&this.#si!==fl.CountryCode}addListeners(){const e=this.#Qt.querySelector(this.#ii.cancelCta);e&&"true"!==e.dataset.listenerAttached&&(e.addEventListener("click",(()=>this.closeSticky())),e.addEventListener("keyup",(e=>{"Enter"===e.key&&this.closeSticky()})),e.dataset.listenerAttached="true")}closeSticky(){this.#Qt.classList.remove("open"),this.#ni.push(this.#si),Il.saveLocalStorageValue(Al,JSON.stringify(this.#ni))}}yt(Ol,{selectors:{self:"[data-cmp-ppc-alert-banner]"}});function wl(e){const{pattern:t,required:i,minLength:s,maxLength:n,value:o}=e;return!(!o.length||i&&!o.length)&&(!(t&&!new RegExp(t).test(o))&&(!(null!=typeof s&&s>-1&&o.length<s)&&!(null!=typeof n&&n>-1&&o.length>n)))}function Pl(e,t,i,s=500){let n=0,o=new AbortController;e.addEventListener("input",(e=>{n&&(clearTimeout(n),o.abort(),n=0);const r=e.target.value.trim();if(!wl(e.target))return;o=new AbortController;const a=o.signal;n=setTimeout((()=>{!function(e,t,i,s){const n=e,o={method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({loginId:n,locale:fl.LanguageCode,country:fl.CountryCode}),signal:s};fetch(t,o).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{isAvailable:t,isVerified:s,errorCode:n,isOTPEnabled:o}=e;i&&i(null,t,s,n,o)})).catch((e=>{"AbortError"!==e.name&&i&&i(e)}))}(r,i,t,a)}),s)}))}class Nl{CountryCode;LanguageCode;constructor(e,t){this.CountryCode=e,this.LanguageCode=t}build(e,t){const i=yn.FormUtils.buildFormDataForGIGYA(t,[sl.IGNORE_FORM_FIELDS,...sl.CUSTOM_FORM_FIELD_NAMES]);i.profile&&(i.profile.photoURL=window.location.origin+"/content/dam/kpmg/images/platform/KPMG.png",i.profile.profileURL=window.location.origin+"/content/dam/kpmg/images/platform/KPMG.png",i.profile.thumbnailURL=window.location.origin+"/content/dam/kpmg/images/platform/KPMG.png"),i.data||(i.data={}),i.data.kpmg||(i.data.kpmg={}),i.data.kpmg.registeredLocale=`${this.CountryCode}/${this.LanguageCode}`;let s=t.querySelector(".multi-input"),n=s?.querySelectorAll("input");n&&n.forEach((e=>{i.data.organizations&&Array.isArray(i.data.organizations)||(i.data.organizations=[]),i.data.organizations.push(e.value)}));const o=new Dl;return"boolean"==typeof i.data.termsone&&o.addCountry(this.CountryCode).addLocale(this.LanguageCode).addItem("subscription_opt_in",i.data.termsone),"boolean"==typeof i.data.termstwo&&o.addCountry(this.CountryCode).addLocale(this.LanguageCode).addItem("communication_opt_in",i.data.termstwo),!0===i.data.terms&&o.addCountry(this.CountryCode).addLocale(this.LanguageCode).addItem("terms",!0),o.Countries.size&&(i.subscriptions=o.getJSON()),i}}class Rl{email;tags;name;constructor(e,t,i){this.email=!!t,this.name=e,this.tags=i}getValue(){return this.email}addTags(e){return this.tags||(this.tags=[]),this.tags.push(e)}clearTags(){this.tags?.length&&(this.tags=[])}setValue(e){this.email=!!e}getJSON(){return{email:{isSubscribed:this.email,tags:this.tags?.length>0?this.tags:void 0}}}}class Ul{Items;constructor(e,t){this.Country=e,this.LangCode=t,this.Items=new Map}addItem(e,t,i){this.Items.set(e,new Rl(e,t,i))}getItem(e){return this.Items.get(e)}getItemValue(e){return this.Items.get(e)?.getValue()}setItemValue(e,t){this.Items.get(e)?.setValue(t)}}class kl{Locales;constructor(e){this.countryCode=e,this.Locales=new Map}addLocale(e){if(!this.Locales.has(e)){const t=new Ul(this.countryCode,e);return this.Locales.set(e,t),t}return this.Locales.get(e)}getLocale(e){return this.Locales.get(e)}}class Dl{Countries;constructor(e=null){this.Countries=new Map,e&&this.Load(e)}updateFlags(e=!1){const t={};this.Countries.forEach(((i,s)=>{t[s]={},i.Locales.forEach((t=>{let i=!1;for(const e of t.Items.values())if(!0===e.getValue()){i=!0;break}(i||e)&&(t.addItem("terms",i),t.addItem("subscription_opt_in",i),t.addItem("communication_opt_in",i))}))}))}Load(e){for(const t in e)if(Object.hasOwnProperty.call(e,t)){const i=e[t],s=this.addCountry(t);for(const e in i)if(Object.hasOwnProperty.call(i,e)){const t=s.addLocale(e),n=i[e];for(const e in n)if(Object.hasOwnProperty.call(n,e)){const i=n[e],{isSubscribed:s,tags:o}=i?.email||{};t.addItem(e,s,o??void 0)}}}}addCountry(e){if(!this.Countries.has(e)){const t=new kl(e);return this.Countries.set(e,t),t}return this.Countries.get(e)}getCountry(e){return this.Countries.get(e)}setSubscriptionEmailValue(e,t,i,s){this.Countries.get(e)?.getLocale(t)?.getItem(i)?.setValue(s)}getSubscriptionEmailValue(e,t,i){return this.Countries.get(e)?.getLocale(t)?.getItem(i)?.getValue()}toJSON(){throw"stringify/toJSON forbidden for this class, use getJSON() instead"}findSubscriptionItem(e,t,i){return this.getCountry(e)?.getLocale(t)?.getItem(i)}getJSON(){const e={};return this.Countries.forEach(((t,i)=>{e[i]={},t.Locales.forEach(((t,s)=>{e[i][s]={},t.Items.forEach((t=>{e[i][s][t.name]=t.getJSON()}))}))})),e}getLocaleJSON(e){const t={};return e.forEach((e=>{const[i,s]=e,n=this.Countries.get(i)?.Locales.get(s);n?.Items.forEach((e=>{t[i]||(t[i]={}),t[i][s]||(t[i][s]={}),t[i][s][e.name]=e.getJSON()}))})),t}getSubscriptionItem(e,t,i){return this.Countries.get(e)?.Locales.get(t).getItem(i)}}let Ml=null;function Fl(e){Ml||(Ml=oo(document.body)),Ml.Update("");const t=Lr(e);setTimeout((()=>{Ml.Element.ariaLive="assertive",Ml.Element.role="alert",Ml.Update(t)}),2e3)}class ql{static Selectors={COMPONENT_ROOT:".cmp-form-error",ERROR_ITEM:".cmp-form-error_list",ERROR_ITEM_MESSAGE:".error_message"};static ShowClsName="show";static getErrorCodeSelector(e,t=""){return`[data-error="${e}"]${t?"."+t:""}`}static hideAll(e=document){e.querySelectorAll(this.Selectors.ERROR_ITEM).forEach((e=>e.classList.remove(this.ShowClsName))),Fl("")}static show({form:e,errorcode:t,response:i,hide:s=!0,root:n=document}){s&&this.hideAll(n);const o=n.querySelector(this.getErrorCodeSelector(t));if(o){o.classList.add(this.ShowClsName);const e=o.querySelector(ql.Selectors.ERROR_ITEM_MESSAGE)?.innerHTML;e&&Fl(e)}else e&&io(e,i?.errorMessage)}static ShowInfo({errorCode:e="0",hide:t=!1,variant:i="information",root:s=document}){t&&this.hideAll();const n=s.querySelector(this.getErrorCodeSelector(e,i));if(!n)return;const o=n.parentElement,r=n.cloneNode(!0);o.appendChild(r,n),r.classList.add(this.ShowClsName);const a=r.querySelector("[data-close-button]");a&&a.addEventListener("click",(()=>o.removeChild(r)));const l=r.querySelector(ql.Selectors.ERROR_ITEM_MESSAGE)?.innerHTML;l&&Fl(l)}}window.ErrorNotifications=ql;var xl=ql;const Vl=new gn({origin:"ppc-form",flag:"ppc-form"});class $l extends ri{FormValueChangeListener;SubmitHost;#oi;Validator;form;EmailField=null;#ri={};#ai=!1;#li=!1;#ci=!0;domainBlocklistCheck=!1;loadingOverlay=new El;get IsEmailIdFresh(){return this.#ai}#di;get actionName(){return this.#di?this.#di():this.form.dataset?.formType||""}get captchaType(){const e=this.form.dataset;return"V2"==e.captchaVersion?"invisible"!=e.captchaSize?"reCaptchaV2":"invisible":"V3"==e.captchaVersion?"reCaptchaV3":""}#ui={InitConfirmationOverlay:!1,CaptchaEnabled:!0};constructor(e,{onSubmit:t,CheckEmail:i=!1,getFormActionName:s,InitConfirmationOverlay:n=!0,captchaEnabled:o=!0,autoCountrySelection:r=!0,domainBlocklistCheck:a=!1}){super(),Vl.log("init",e?.dataset?.formType),this.#li=i,this.#di=s,this.#ci=r,this.domainBlocklistCheck=a,this.form=e,this.#oi={ValuesChanged:!1},"function"==typeof t&&(this.#ri.doSubmit=t),this.#ui.InitConfirmationOverlay=n,this.#ui.CaptchaEnabled=o,this.Init()}Init(){this.loadingOverlay.Init(this.form),this.FormValueChangeListener=Bn.Watch(this.form),this.SubmitHost=new Bl(this,{callbacks:{doSubmit:this.#hi.bind(this),canSubmit:this.#mi.bind(this),BeforeCaptcha:e=>this.#pi(e),AfterCaptchaSuccess:e=>this.#fi(e),AfterCaptchErrorOrExpire:()=>this.#gi(),captchaChallengeClosed:(...e)=>this.#yi(...e)},captchaEnabled:this.#ui.CaptchaEnabled}),this.Validator=new Gl(this.SubmitHost,this),this.#ui.InitConfirmationOverlay&&_o(this.form),this.attachEvents(),this.#ci&&this.form["profile.country"]&&Xn(this.form["profile.country"]),this.#Ei(),this.#vi()}#fi(e){if(document.body.classList.remove("no-scroll"),this.#ri?.AfterCaptchaSuccess)return this.#ri.AfterCaptchaSuccess(e)}#gi(){if(document.body.classList.remove("no-scroll"),this.#ri?.AfterCaptchErrorOrExpire)return this.#ri.AfterCaptchErrorOrExpire(token)}#pi(e){return e&&document.body.classList.add("no-scroll"),!this.#ri?.BeforeCaptcha||this.#ri.BeforeCaptcha(flag)}#yi(e){Vl.log("onCaptchaClosed",e?.length),document.body.classList.remove("no-scroll"),this.SetSubmitButtonState(!0)}#vi(){this.form.addEventListener("reset",(()=>xl.hideAll()))}attachEvents(){Zn(this.form),Qn(this.form),this.FormValueChangeListener.addChangeListener(this.#bi.bind(this)),setTimeout((()=>this.form.dispatchEvent(new CustomEvent("custom-event-form-start"))))}#bi(e){this.#oi.ValuesChanged=e}#mi(e,t){this.SetSubmitButtonState(!1);const{BeforeSubmit:i}=this.#ri;return!i||(this.SetSubmitButtonState(!0),i(e,t))}#hi(e,t,i=""){return this.#ri.doSubmit(e,t,i)}OnSubmitSuccess(e){this.SetSubmitButtonState(!0),this.form.dispatchEvent(new CustomEvent("form-submit-success",{detail:{success:e}}))}OnSubmitError(e){this.SetSubmitButtonState(!0),this.form.dispatchEvent(new CustomEvent("form-submit-error",{detail:{error:e}}))}isValid(){return this.Validator.Valid}SetSubmitButtonState(e){const t=this.form.querySelector('[type="SUBMIT"]');t&&(t.disabled=!e)}#Ei(){this.#li&&this.emailIdExistsValidation()}emailIdExistsValidation(){const e=this.EmailField=this.form.querySelector('[name="email"]');if(!e)return;const{emailcheckDelay:t=500,emailcheckApi:i}=this.form.dataset;Pl(e,((...e)=>this.dispatch("email-validation",...e)),i,+t)}showLoadingOverlay(){this.loadingOverlay.show()}hideLoadingOverlay(){this.loadingOverlay.hide()}get formFields(){return Array.from(this.form.querySelectorAll(".cmp-form-text input,.cmp-form-privacy input,.cmp-form-ppc-privacy input,.cmp-form-options select"))}}class Bl{FormCaptcha;#Si=!1;get submitInProgress(){return this.#Si}#Ci=!1;get captchInProgress(){return this.#Ci}PPCForm;#Ii;#_i=!0;get CaptchaEnabled(){return this.#_i&&this.FormCaptcha?.IsCaptchaEnabled}constructor(e,{callbacks:t,captchaEnabled:i=!0}){this.PPCForm=e,this.#_i=!!i,this.#Ii=t,this.Init(e?.form)}#Li(e){e.preventDefault();const t=this.PPCForm.form,i=this.PPCForm.Validator.Validate();if(Vl.log("FormSubmitHost~#onSubmit"),!i)return!1;const s={...t.dataset},n=this.#Ti();return Vl.log("FormSubmitHost~#formData"),!!this.#Ai(n,s)&&this.submitWithCaptcha(n,s)}#Ai(e,t){let i=!1;return!this.#Ii.canSubmit||(i=!1===this.#Ii.canSubmit(e,t),!i)}submitWithCaptcha(e,t){const{BeforeCaptcha:i,AfterCaptchErrorOrExpire:s,AfterCaptchaSuccess:n,doSubmit:o}=this.#Ii;return(!i||!1!==i(this.CaptchaEnabled))&&(this.#Si=!0,this.CaptchaEnabled?(this.#Ci=!0,this.FormCaptcha.Execute((i=>{this.#Ci=!1,i||!s?n&&!1===n(i)||o(e,t,i):s()}),this.PPCForm.actionName)):o(e,t))}Init(e){this.#_i&&(this.FormCaptcha=new nr(e)),this.attachEvents(e)}attachEvents(e){e.addEventListener("submit",this.#Li.bind(this)),this.FormCaptcha?.on("challenge-closed",((...e)=>this.#Ii.captchaChallengeClosed&&this.#Ii.captchaChallengeClosed(...e)))}#Ti(){const e=new FormData(this.PPCForm.form),t={};return e.forEach(((e,i)=>{const s=this.PPCForm.form.elements[i];s&&"checkbox"===s.type?t[i]=s.checked:t[i]=e})),[":formstart","_charset_",":redirect",":cq_csrf_token","g-recaptcha-response",":formstartpage"].forEach((e=>t[e]&&delete t[e])),t}}class Gl{#Oi=[];#wi=!1;#Pi;SubmitHost;constructor(e,t){this.SubmitHost=e,this.#Pi=t,this.#Ni()}get Valid(){return this.#wi}#Ni(){const{form:e}=this.#Pi;vr(e),Wn(e),Yn(e),this.AddNewValidator(new tr(e)),this.#Pi.domainBlocklistCheck&&this.AddNewValidator(new ir(e)),this.AddNewValidator(new sr(e));const t=e.querySelector('[type="submit"]');t&&t.addEventListener("click",((...e)=>{this.#Ri(...e)}))}#Ri(){this.Validate(),this.#Ui(),Ot(this.#Pi.form)}#Ui(){setTimeout((()=>{this.#Pi.form.dispatchEvent(new CustomEvent("focus-invalid-elements"))}),100)}AddNewValidator(e){return this.#Oi.push(e),e}Validate(e){let t=!0;for(const i of this.#Oi)t=i.Validate(e),Vl.log("FormValidator~Validate~"+i.constructor.name,t);return this.#wi=t,t}}const{EventUtils:Hl,URLUtils:jl,DebugUtils:Kl}=yn;class zl{#ki;get PPCForm(){return this.#ki}#e;#y;#ai=!1;get EmailIdField(){return this.#ki.EmailField}#re;constructor({element:e,...t}){this.#e=`${this.constructor.name}`,this.#re=new Kl({constructorName:this.#e,origin:"registration"}),this.#y=e,this.#ki=new $l(this.#y,{onSubmit:(...e)=>this.haveSubmitEvent(...e),CheckEmail:!0,domainBlocklistCheck:!0}),this.init(),this.#re.log("init",e.id,t)}init(){this.InitEmailIdExistsValidation(),this.#ki.EmailField&&(this.#ki.EmailField.autocomplete="username"),fl.on(sl.SESSION_VALID_EVENT_NAME,((...e)=>this.onAlreadyLoggedIn(...e))),this.datalayer()}datalayer(){}async onAlreadyLoggedIn(e){if(this.#re.getDebugMode(),e.isVerified)if(Hl.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS)){const e=JSON.parse(Hl.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS)).preferenceManagement;e&&jl.navigateToURL(e)}else{const e=await fl.onPageReferenceUrls();if(e?.preferenceManagement)return jl.navigateToURL(e.preferenceManagement)}else window?.gigya?.accounts.logout({callback:()=>{fl.fetchPPCPageUrls().finally((()=>{fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.LOGIN)}))}})}InitEmailIdExistsValidation(){this.#ki.on("email-validation",((...e)=>this.#Di(...e)))}#Di(e,t,i,s){if(this.#re.log("onEmailIdValidation","isAvailable",t,"isVerified",i,"errorcode",s),this.dataLayerEmailExists(e,t,i),!e){if(this.#ai=t,xl.hideAll(),!0===t)return this.EmailIdField.setCustomValidity(""),void this.EmailIdField.reportValidity();this.EmailIdField.setCustomValidity(" "),this.EmailIdField.reportValidity(),xl.show({form:this.#y,errorcode:s})}}dataLayerEmailExists(e,t,i){e||!0===t||Ct({event:"cmp:formError",eventInfo:{path:"component.registration-"},component:{"registration-":{formInfo:{formError:"|email exists-"+(i?"verified":"unverified")}}}})}haveSubmitEvent(e,t,i=""){return this.#re.log("haveSubmitEvent","IsEmailIdFresh="+this.#ai),window.gigya&&window.gigya.accounts?this.startRegistration(e,t,i):(console.error("sap platform not available"),this.afterRegistrationError())}async startRegistration(e,t,i=""){this.#ki.showLoadingOverlay();const{isValid:s,response:n}=await async function({form:e,password:t,locale:i,hide:s}){let n;try{n=await al({url:e.dataset.urlPasswordValidate,body:{password:t,locale:i}})}catch{}return(0!==n?.errorCode||n.is)&&xl.show({errorcode:n?.errorCode,form:e,response:n,hide:s}),{isValid:0===n?.errorCode,response:n}}({form:this.#y,locale:`${fl.SiteCountryCode}/${fl.SiteLanguageCode}`,password:e.password});if(!s)return this.#ki.hideLoadingOverlay(),this.#ki.OnSubmitError(n),void xl.show({form:this.#y,response:n,errorcode:n?.errorCode});return window.gigya.accounts.initRegistration({callback:s=>{const{regToken:n,errorCode:o}=s;this.#re.log("initRegistration~callback",s),0!==o&&this.afterRegistrationError(s),this.finishRegistration(e,t,n,i)}})}finishRegistration(e,t,i,s){const n=window.gigya,o=new Nl(fl.CountryCode,fl.LanguageCode),r=this.PPCForm.captchaType;this.#re.log("captchaType",r);const a=e.email,l=e.password,c=o.build(e,this.#y);return c.data.loginCount=1,n.accounts.register({...c,email:a,password:l,captchaToken:s,captchaType:r,regSource:window.location.origin+window.location.pathname,regToken:i,finalizeRegistration:!0,callback:e=>this.afterRegistration(e)})}SaveDataForResendEmailVerification(){const e=this.#y.parentElement.querySelector('.ppc-form-cta[data-link-type="resendEmailVerification"]');e&&(e._form=this.#y)}afterRegistration(e){if(this.#re.log("afterRegistration",e),0!==e?.errorCode)return this.afterRegistrationError(e);this.SaveDataForResendEmailVerification(e),this.afterRegistrationSuccess(e)}afterRegistrationSuccess(e){this.doLogout();const t=this.#y;this.#ki.hideLoadingOverlay(),to(t),Ct({event:"cmp:formComplete",eventInfo:{path:"component.registration-"},component:{"registration-":{"dc:title":"registration success",registrationStatus:"registered-unverified",gigyaId:e?.UID,registrationMethod:"Form Registration",formInfo:{formStep:3}}}}),this.#ki.OnSubmitSuccess()}doLogout(){const e=window.gigya;e?.accounts?.logout({callback:()=>{}})}afterRegistrationError(e){this.#ki.hideLoadingOverlay();const t=this.#y;this.#ki.OnSubmitError(e),xl.show({form:t,response:e,errorcode:e?.errorCode})}}yt(zl,{selectors:{self:'.general-xf form.cmp-digital-form[data-form-type="ppcRegistration"]'}}),async function(){const e=window.location.href;let t;try{const e=Hl.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS);t=e?JSON.parse(e):await fl.fetchPPCPageUrls()}catch{return}const i=e.includes(t[sl.PPC_PAGE_NAMES.REGISTRATION]),s=e.includes(t[sl.PPC_PAGE_NAMES.LOGIN]);i||s||Hl.saveLocalStorageValue(sl.SIGNUP_JOURNEY_PAGENAME,e)}();const{FormUtils:Wl}=yn;class Yl{static selectorConfig={selectors:{self:"[data-cmp-form-otp]"}};inputs=[];form;root;#Mi=4;constructor({element:e}){this.root=e,this.#Mi=e.dataset.otpLength?+e.dataset.otpLength:6,this.cacheElements(this.#Mi),this.attachEvents(),this.root._Handler=this}cacheElements(){this.inputs=Array.from(this.root.querySelectorAll(".cmp-form-otp-input-wrapper .cmp-form-otp--input"))}destory(){this.inputs.forEach((e=>{e.removeEventListener("beforeinput",this.onBeforeinput),e.removeEventListener("keydown",this.keydown),e.removeEventListener("invalid",this.onInvalid)})),this.inputs.forEach((e=>e.remove())),this.inputs=[],this.form=null}attachEvents(){this.onInvalid=this.onInvalid.bind(this),this.keydown=this.keydown.bind(this),this.onBeforeinput=this.onBeforeinput.bind(this),this.inputs.forEach((e=>{e.addEventListener("beforeinput",this.onBeforeinput),e.addEventListener("keydown",this.keydown),e.addEventListener("invalid",this.onInvalid)})),this.inputs.length&&(this.form=this.inputs[0].form,this.form.addEventListener("reset",(()=>requestAnimationFrame((()=>this.checkValidity())))))}#Fi(e){return String(e).replace(/\D/g,"")}onBeforeinput(e){const{inputType:t,data:i,target:s}=e,n=this.#Fi(i);let o=!1;switch(t){case"insertLineBreak":case"deleteContentBackward":case"historyUndo":break;case"insertFromPaste":o=!0;default:e.preventDefault()}if(n){const e=this.fillValue(s,n),t=this.inputs[e];o?Wl.focusInput(t):this.focusNextInput(t)}requestAnimationFrame((()=>this.checkValidity()))}keydown(e){const{key:t,target:i}=e,s=t.toUpperCase(),{value:n}=i;if("ENTER"!==s)if("TAB"!==s)e.ctrlKey||e.metaKey||(this.isBackspace(t)||this.isNumberKey(t)?this.isBackspace(t)&&(0==n.length?(e.preventDefault(),this.focusPreviousInput(i)):requestAnimationFrame((()=>this.checkValidity()))):e.preventDefault());else{const t=this.inputs.indexOf(i);if(e.shiftKey&&0==t)return;if(t==this.inputs.length-1)return;if(0==n.length);else if(e.shiftKey){if(t>0&&this.inputs[t-1].value.length>0)return}else if(t<this.inputs.length-1&&this.inputs[t+1].value.length>0)return;e.preventDefault()}}focusPreviousInput(e){const t=this.inputs.indexOf(e);if(t>0)return requestAnimationFrame((()=>{Wl.focusInput(this.inputs[t-1])})),!0}focusNextInput(e){const t=this.inputs.indexOf(e);if(t>-1&&t<this.inputs.length-1)return requestAnimationFrame((()=>{Wl.focusInput(this.inputs[t+1])})),!0}isNumberKey(e){return void 0!==e&&e>=0&&e<=9}isBackspace(e){return"Backspace"==e}onInvalid(e){e.preventDefault()}fillValue(e,t=""){const i=t.split("").filter((e=>e>="0"&&e<="9")).slice(0,this.#Mi),s=this.inputs.indexOf(e);let n=s;if(-1!==s)return this.inputs.forEach(((e,t)=>{if(t>=s){const o=t-s;void 0!==i[o]&&(e.value=i[o],n=t)}})),n}checkValidity(e=!0){const t=this.inputs.every((e=>1===e.value.length));return e&&this.dispatch(t),t}dispatch(e){this.form?.dispatchEvent(new CustomEvent(sl.OTP_VALIDITY_CHANGE_EVENT,{detail:{isValid:e,instance:this}}))}getValue(){return this.inputs.map((e=>e.value)).join("")}clearValue(){this.inputs.forEach((e=>{e.value=""}))}focusFirstElement(){Wl.focusInput(this.inputs[0])}}var Jl=Yl;yt(Yl,Yl.selectorConfig);const{DebugUtils:Xl,EventUtils:Ql}=yn;class Zl{static SELECTORS={ROOT:'form.cmp-digital-form[data-form-type="fgeOtp"]',OTP_SUBMIT_BTN:'[type="submit"]',RESEND_CODE_BTN:".button .cmp-button"};UI={};#qi=new Ql.EventEmitter;get Events(){return this.#qi}debug;PPCForm;get otpField(){return this.PPCForm.form.querySelector(Jl.selectorConfig.selectors.self)?._Handler}OTPInfo={GenOTPResponse:null,OTPLoginResponse:null};Info={Email:"",Country:"",Locale:""};#xi=!0;OTPBButtonManager;constructor(e,t=!0){this.#xi=!!t,this.cacheUIElements(e),this.Init(e.element),this.UI.ROOT._Handler=this}get CountryCode(){return fl.CountryCode}get LanguageCode(){return fl.LanguageCode}cacheUIElements({element:e}){const t=Zl.SELECTORS;this.UI.ROOT=e;for(const e in t)if("ROOT"!=e&&Object.hasOwnProperty.call(t,e)){const i=this.UI.ROOT.querySelectorAll(t[e]);i.length?this.UI[e]=1==i.length?i[0]:i:this.UI[e]=null}}Init(e){this.OTPBButtonManager=new ec({submitOtpButton:this.UI.OTP_SUBMIT_BTN,resendButton:this.UI.RESEND_CODE_BTN}),this.UI.RESEND_CODE_BTN&&(this.UI.RESEND_CODE_BTN.role="button",this.UI.RESEND_CODE_BTN.tabIndex="0",this.UI.RESEND_CODE_BTN.addEventListener("click",(e=>this._onResendOTPClick(e)))),this.UI.OTP_SUBMIT_BTN.disabled=!0,e.addEventListener(sl.OTP_VALIDITY_CHANGE_EVENT,(({detail:{isValid:e}})=>{this.OTPBButtonManager.IsLimitReached||(this.UI.OTP_SUBMIT_BTN.disabled=!e)})),this.debug=new Xl({constructorName:"otp-form",origin:"otp-form"}),this.debug.log("init start",this.UI.ROOT.dataset.formType),this.PPCForm=new $l(this.UI.ROOT,{onSubmit:(...e)=>this.doSubmit(...e),InitConfirmationOverlay:!1,CaptchaEnabled:!1}),this.debug.log("init finish",this.UI.ROOT.dataset.formType)}doSubmit(){const e=this.otpField.getValue();this.PPCForm.showLoadingOverlay(),this.debug.log("doSubmit","code",e,"Token Length",this.OTPInfo.GenOTPResponse?.vToken?.length),fl.OTPLogin({code:e,vToken:this.OTPInfo?.GenOTPResponse?.vToken},this.#xi).then(((...e)=>{try{this.haveSuccessResponse(...e)}catch{}})).catch(((...e)=>this.haveErrorResponse(...e))).finally((()=>this.PPCForm.hideLoadingOverlay()))}haveSuccessResponse(e){if(0!=e.errorCode)return this.haveErrorResponse(e);this.OTPInfo.OTPLoginResponse=e,this.debug.log("haveSuccessResponse","resp",e),this.PPCForm.OnSubmitSuccess(e)}haveErrorResponse(e){this.OTPInfo.OTPLoginResponse=e,this.PPCForm.OnSubmitError(e);const t=e&&e.errorCode;if(t!==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION){const e={"dc:title":"otp form",formInfo:{formError:"|OTP not valid"}};this.UI.ROOT.dataset?.datalayerformType&&(e.formType="Fast Subscription");try{Ct({event:"cmp:formError",eventInfo:{path:"component.otpform-"},component:{"otpform-":e}})}catch{}xl.show({errorcode:t||"GENERIC",form:this.PPCForm.form}),requestAnimationFrame((()=>this.otpField.focusFirstElement()))}}async _onResendOTPClick(e){if(e.preventDefault(),e.stopPropagation(),!this.Info.Locale||!this.Info.Email)return;let t;this.UI.OTP_SUBMIT_BTN.disabled=!0,xl.hideAll(this.UI.ROOT),this.otpField.clearValue();try{const e=await this.GenerateOTP(this.Info.Email,this.Info.Country,this.Info.Locale);this.#qi.dispatch("regen-otp-success",e),this._regenOTPSuccess(e)}catch(e){t=e,this.#qi.dispatch("regen-otp-error",e),this._otpResponseError(e)}finally{requestAnimationFrame((()=>this.otpField.focusFirstElement()))}return t}haveGenOTPResponse(e){this._regenOTPSuccess(e)}_regenOTPSuccess(e){const t=e&&e.errorCode;0!=t?this._otpResponseError(e):xl.ShowInfo({errorCode:t,root:this.UI.ROOT})}_otpResponseError(e){const t=e&&e.errorCode;if(0!=t&&(xl.show({root:this.UI.ROOT,response:e,errorcode:t??"GENERIC"}),403e3==t)){Ct({event:"cmp:formError",eventInfo:{path:"component.resentpasscode-"},component:{"resendpasscode-":{"dc:title":"login-validate-otp"===this.UI.ROOT.getAttribute("id")?"general login":"subscription",formInfo:{formError:"|resend is clicked more than 5 times"}}}})}}onOTPResponseReady(e){this.OTPInfo.GenOTPResponse=e}async GenerateOTP(e,t,i){let s;this.Info.Email&&this.Info.Email!=e&&this.OTPBButtonManager.onSubmitNewEmail(),this.OTPBButtonManager.onBeforeOTPGenRegen(),this.Info.Email=e,this.Info.Country=t,this.Info.Locale=i;try{s=await async function(e,t,i){let s;try{s=await al({url:"/bin/kpmg/accounts/sendotpemail",body:{email:e,country:t,locale:i}})}catch(e){throw e}return s}(e,t,i),this.OTPBButtonManager.onAfterOTPGenRegen(s)}catch(e){throw this.OTPBButtonManager.onAfterOTPGenRegen(e),this.onOTPResponseReady({}),e}return this.onOTPResponseReady(s),s}}class ec{#Vi;#$i;#Bi;#Gi;#Hi;#ji;#Ki;constructor({resendButton:e,submitOtpButton:t,cooldownDurationResend:i=10,cooldownDurationLockout:s=300}){this.#Bi=e,this.#Gi=t,this.#ji=i,this.#Ki=s}#zi(e){this.#Vi=setTimeout((()=>{this.#Wi(this.#Bi,this.IsLimitReached),this.#Vi=0,clearTimeout(this.#Vi)}),1e3*e)}#Yi(){this.#Wi(this.#Gi,!0),this.#$i=setTimeout((()=>{this.#Hi=!1,this.#Ji(),this.#$i=0,clearTimeout(this.#$i)}),1e3*this.#Ki)}#Xi(){this.#Wi(this.#Bi,!0)}#Qi(){this.#Wi(this.#Gi,!0)}#Wi(e,t){e instanceof HTMLButtonElement?e.disabled=t:e instanceof HTMLAnchorElement&&(t?this.#Zi(e):this.#es(e))}#ts(e){e?.errorCode==sl.SAP_ERROR_MAX_OTP_TRIES&&(this.#Hi=!0)}#Ji(){this.#Hi&&this.#Qi()}#Zi(e){e.setAttribute("disabled",!0),e.setAttribute("aria-disabled",!0),e.removeAttribute("tabindex"),e.style.pointerEvents="none"}#es(e){e.removeAttribute("disabled"),e.removeAttribute("aria-disabled"),e.setAttribute("tabindex",0),e.style.pointerEvents="auto"}get IsLimitReached(){return this.#Hi}onSubmitNewEmail(){clearTimeout(this.#Vi),this.#Vi=0,clearTimeout(this.#$i),this.#$i=0,this.#Hi=!1}formShow(){this.#Xi(),this.#Ji();let e=this.IsLimitReached?this.#Ki:this.#ji;this.#Vi||this.#zi(e),this.IsLimitReached&&!this.#$i&&this.#Yi()}onBeforeOTPGenRegen(){this.#Xi(),this.#zi(this.#ji)}onAfterOTPGenRegen(e){this.#ts(e),this.IsLimitReached&&(this.#$i&&(this.#$i=0,clearTimeout(this.#$i)),this.#Yi(),this.#Vi&&(this.#Vi=0,clearTimeout(this.#Vi)),this.#zi(this.#Ki))}}yt(Zl,{selectors:{self:Zl.SELECTORS.ROOT}});const{EMAIL_VALUE_LOCAL_STORAGE_KEY:tc,SESSION_VALID_EVENT_NAME:ic,USER_ACCOUNT_INCLUDES:sc,SAP_ERROR_ACCOUNT_PENDING_REGISTRATION:nc,PPC_PAGE_NAMES:oc,PPC_LOGIN_BANNER_KEY:rc}=sl,ac={ROOT:"#ppc-login",PPC_LOGIN_PROVIDER:".cmp-ppc-login-provider",LOGINOTPEMAIL_FIELD:"#register-with-otp .cmp-form-text__text",LOGINPWDEMAIL_FIELD:"#register-with-password .cmp-form-text__text",REGWITHPASSWORD_PWDFIELD:"#register-with-password .cmp-form-password__input",REGWITHOTPFORM:"#register-with-otp",REGWITHOTPFORMCTA:"#register-with-otp .cmp-form-button",XF:"#login-validate-otp",OTP_FORM:`.cmp-login-otp__xf ${Zl.SELECTORS.ROOT}`,OVERLAY_DIALOG_ROOT:"#cmp-custom-dialog--otp-login",CONFIRM_DIALOG_ROOT:"#cmp-custom-dialog--confirm"};class lc{static selectorsConfig={selectors:{self:'form.cmp-digital-form[data-form-type="ppcLogin"]'}};UI={};api;FormElement;PPCForm;passwordField;emailField;#is;get OTP_FORM(){return this.UI.OTP_FORM._Handler}constructor(e){this.FormElement=e.element,this.Init()}Init(){if(this.mainform=!1,this.grandparent=document.querySelector("#ppc-login"),this.#ss(this.grandparent),this.api=window.gigya,this.passwordField=this.FormElement.querySelector('input[name="password"]'),this.passwordField)this.registerWithPassword=!0;else if(this.FormElement.matches("form#register-with-otp"))this.registerWithOtp=!0,this.initDialog(),this.UI.OTP_FORM.addEventListener("form-submit-success",(({detail:{success:e}})=>this.haveLoginResponse(e))),this.UI.OTP_FORM.addEventListener("form-submit-error",(({detail:{error:e}})=>this.haveLoginResponse(e)));else{this.mainform=!0;const e=this.UI.ROOT.querySelector(".cmp-login-otp__xf"),t=this.UI.ROOT.querySelector("#login-validate-otp").parentNode;e.appendChild(t),this.mainlogin=!0,this.FormElement.querySelector("button").classList.add("disabled"),this.FormElement.querySelector("button").setAttribute("disabled",!0)}this.emailField=this.FormElement.querySelector('input[name="email"]'),this.emailField&&(this.emailField.autocomplete="username"),this.onloadValidSession=this.onloadValidSession.bind(this),fl.on(ic,this.onloadValidSession),this.PPCForm=new $l(this.FormElement,{onSubmit:(...e)=>this.doLogin(...e),CheckEmail:!0,InitConfirmationOverlay:this.mainform}),this.InitEmailValidations(),this.mainform&&this.datalayerComponentLoad()}#ss(e){this.UI.ROOT=e;for(const t in ac)Object.hasOwnProperty.call(ac,t)&&"ROOT"!=t&&(this.UI[t]=e.querySelector(ac[t]))}async onloadValidSession(){this.PPCForm.hideLoadingOverlay(),this.redirectAfterLogin()}InitEmailValidations(){li.removeLocalStorageValue(tc),this.PPCForm.EmailField&&(this.PPCForm.EmailField.addEventListener("change",(e=>{wl(e.target)&&li.saveLocalStorageValue(tc,e.target.value)})),this.PPCForm.EmailField.addEventListener("input",(()=>{this.mainform&&(this.FormElement.querySelector("button").classList.add("disabled"),this.FormElement.querySelector("button").setAttribute("disabled","true"))}))),this.PPCForm.on("email-validation",((...e)=>this.#Di(...e)))}#Di(e,t,i,s,n){if(xl.hideAll(),this.FormElement.querySelector("button").classList.add("disabled"),this.FormElement.querySelector("button").setAttribute("disabled","true"),this.enableLoginOtp=!1,t&&xl.show({form:this.FormElement,errorcode:"403042",root:this.mainform?document:this.FormElement}),!1===i)return this.emailField.setCustomValidity(" "),this.emailField.reportValidity(),xl.show({form:this.FormElement,errorcode:s,root:this.mainform?document:this.FormElement}),void this.dataLayerEmailExists();!0===i&&(n&&(this.enableLoginOtp=!0),this.FormElement.querySelector("button").classList.remove("disabled"),this.FormElement.querySelector("button").removeAttribute("disabled")),this.emailField.setCustomValidity(""),this.emailField.reportValidity()}dataLayerEmailExists(){Ct({event:"cmp:formError",eventInfo:{path:"component.login-"},component:{"login-":{formInfo:{formError:"|email exists-unverified"}}}})}datalayerComponentLoad(){Ct({event:"cmp:formStart",eventInfo:{path:"component.login-"},component:{"login-":{"dc:title":"login form",formInfo:{formReferrer:document.referrer,formStep:1}}}})}canLogin(e){return window.gigya&&window.gigya.accounts?e?.email.length>0&&e?.password.length>0:(io(this.FormElement,"sap api not loaded"),this.onLoginError(),!1)}onError(e){this.PPCForm.hideLoadingOverlay(),io(this.FormElement,e),this.onLoginError()}doLogin(e,t,i=""){if(this.mainlogin)return void this.loginOTPPasswordForm();if(this.registerWithOtp)return this.PPCForm.showLoadingOverlay(),void this.OTP_FORM.GenerateOTP(this.UI.LOGINOTPEMAIL_FIELD.value,fl.CountryCode,fl.LanguageCode).then((e=>this.onGenerateOTPSuccess(e))).catch(((...e)=>{this.onGenerateOTPError(...e)})).finally((()=>this.PPCForm.hideLoadingOverlay()));this.PPCForm.showLoadingOverlay(),xl.hideAll();if(!!!this.canLogin(e))return void this.clearPasswordField();const s={loginID:e.email,password:e.password,include:sc.join(",")};i&&(s.captchaToken=i,s.captchaType=this.PPCForm.captchaType),"on"===e.remember_me&&(s.remember=!0),fl.doLogin(s).then((e=>this.afterLogin(e)),(e=>this.afterLogin(e)))}onGenerateOTPSuccess(e){0!=e.errorCode?this.onGenerateOTPError(e):(this.PPCForm.OnSubmitSuccess(e),this.#is.dialog.open({data:e,focusBackToElement:this.UI.REGWITHOTPFORMCTA}),this.OTP_FORM.otpField.focusFirstElement())}onGenerateOTPError(e){this.PPCForm.OnSubmitError(e);const t=e&&e.errorCode;xl.show({root:this.UI.REGWITHOTPFORM,response:e,errorcode:t??"GENERIC"})}initDialog(){this.#is=new er(this.UI.OVERLAY_DIALOG_ROOT,this.UI.CONFIRM_DIALOG_ROOT,"loginotp-overlay-dailog");const e=this.#is.confirm.UI.ROOT.querySelector(".confirm-dialog-content"),t=this.#is.dialog.UI.ROOT.querySelector("form .warning-overlay-msg .text");e.appendChild(t.querySelector(".cmp-text").cloneNode(!0));const[i,s]=Array.from(this.#is.confirm.UI.ROOT.querySelectorAll("button[value]"));i&&(i.textContent=t.dataset.buttonTextContinue),s&&(s.textContent=t.dataset.buttonTextCancel),this.UI.XF.removeAttribute("hidden"),this.#is.dialog.on("dialog-opening",(()=>this._onDialogBeforeOpen()))}_onDialogBeforeOpen(){this.UI.OTP_FORM?.reset(),this.showForm()}showForm(){let e,t=this.#is.dialog.UI.CLOSE_BUTTON;this.UI.OTP_FORM.classList.remove("hide"),this.UI.OVERLAY_DIALOG_ROOT.querySelector(".cmp-custom-dialog__content-container")?.classList.add("otp-overlay-view"),e=this.UI.OTP_FORM._Handler.UI.RESEND_CODE_BTN,this.#is.dialog.firstElement=t,this.#is.dialog.lastElement=e}loginOTPPasswordForm(){document.querySelector("#ppc-login .text").classList.add("hide"),document.querySelector("#ppc-login .title").classList.add("hide"),document.querySelector("form.cmp-digital-form[data-form-type='ppcLogin']").classList.add("hide"),document.querySelector("#ppc-login .main:last-child")?.classList.add("hide"),document.querySelector(".social-content").classList.add("hide"),document.querySelector(".social-divider-login").classList.add("hide"),document.querySelector(".dynamic-xf-login").classList.remove("hide"),document.querySelector(".ppc-login-provider").classList.add("center"),this.enableLoginOtp?(this.UI.LOGINOTPEMAIL_FIELD.value=this.emailField.value,document.querySelector("#register-with-otp").classList.add("show"),this.UI.REGWITHOTPFORMCTA.focus()):(this.UI.LOGINPWDEMAIL_FIELD.value=this.emailField.value,document.querySelector("#register-with-password").classList.add("show"),this.UI.REGWITHPASSWORD_PWDFIELD.focus())}async haveLoginResponse(e){const t=e?.errorCode;0!=t&&t!=nc||(0==t?(await fl.fetchPPCPageUrls(),this.onLoginSuccess(e,"OTP")):xl.show({errorcode:t??"GENERIC",root:this.UI.OTP_FORM}))}afterLogin(e){return this.clearPasswordField(),e&&e.profile?e&&!0!==e?.isVerified?(this.onLoginError(e),this.emailNotVerified(e)):this.onLoginSuccess(e,"Password"):e&&0!==e?.errorCode?(this.onLoginError(e),this.handlerErrors(e)):void 0}clearPasswordField(){this.passwordField.value=""}handlerErrors(e){switch(e?.errorCode){case 403042:this.invalidCredentials(e);break;case 403120:this.maxAttempts(e)}this.errorDisplay(e,e.errorCode)}invalidCredentials(){this.datalayerLoginError("|invalid login credential")}maxAttempts(){this.datalayerLoginError("|max login attempts")}datalayerLoginError(e){Ct({event:"cmp:formError",eventInfo:{path:"component.login-"},component:{"login-":{formInfo:{formError:e}}}})}emailNotVerified(e){this.datalayerLoginError("|unverified email"),this.api.accounts.logout(),this.errorDisplay(e,206002)}errorDisplay(e,t){xl.show({form:this.FormElement,errorcode:t,response:e,root:this.mainform?document:this.FormElement})}onLoginError(e){this.PPCForm.hideLoadingOverlay(),this.PPCForm.OnSubmitError(e)}async onLoginSuccess(e,t){Ct({event:"cmp:formComplete",eventInfo:{path:"component.login-"},component:{"login-":{"dc:title":"login success",loginStatus:"logged-in",gigyaId:e?.UID,loginMethod:t,formInfo:{formStep:2}}}}),li.removeLocalStorageValue(tc),this.PPCForm.hideLoadingOverlay(),this.PPCForm.OnSubmitSuccess(e),this.redirectAfterLogin()}redirectAfterLogin(){const e=!!fl.isFirstLogin,t=!!fl.subscriptionStatus();let i,s=!1;i=e||!t?oc.PREFERENCEMANAGEMENT:oc.HOME,s=i===oc.HOME,console.log(`\n      ==Login==\n      hasSubscription = ${t}\n      isFirstLogin = ${e}\n      useNewRedirectLogic = true\n      displayBanner = ${s}\n      pageNameToRedirect = ${i}\n      `);setTimeout((()=>fl.redirectToPPCPage(i)),0);const{UID:n}=fl.getStoredInfoIfActive(),o=`${rc}_${n}`;s?localStorage.setItem(o,"1"):localStorage.removeItem(o)}}yt(lc,lc.selectorsConfig);class cc{debug;static SelectorConfig={selectors:{self:".ppc-form-cta"}};CTA;ROOT;CTA_TYPE="";get CountryCode(){return document.querySelector(".cmp-search")?.dataset.countryCode}get LanugageCode(){return document.querySelector(".cmp-search")?.dataset.languageCode}constructor({element:e}){this.debug=new gn({constructorName:"PPCFormCTA",origin:"ppc-form-cta"}),this.Init(e),this.debug.log("init",this.CTA_TYPE)}Init(e){if(this.ROOT=e,this.CTA=this.ROOT?.querySelector("[data-cmp-ppc-form-cta]"),this.CTA){if(this.CTA_TYPE=this.ROOT.dataset.linkType||"",this.CTA_TYPE&&" "!=this.CTA_TYPE)return this.CTA.addEventListener("click",(e=>{this.debug.log("cta-clicked",e.target),this.handleAction(this.CTA_TYPE)})),!0;this.debug.log("blank linkType not required to handle")}else this.debug.warn("missing CTA element")}handleAction(e){let t=null;switch(e){case"resendEmailVerification":case"verifyEmailAddress":t=this.doVerifyEmailAddress;break;default:this.debug.log(`action [${e}] is not supported`)}t&&(this.debug.log("supported action",e),this.performSupportedAction(t))}performSupportedAction(e){e.call(this)}doVerifyEmailAddress(){let{method:e,action:t}=this.CTA.dataset;const i=document.querySelector('form[data-form-type="ppcRegistration"] input[name="email"],form[data-form-type="ppcLogin"] input[name="email"]');if(e||(this.debug.warn("doVerifyEmailAddress","mothod not provided, using GET"),e="GET"),!t)return void this.debug.error("doVerifyEmailAddress","url not provided");if(!i)return void this.debug.warn("doVerifyEmailAddress","email field not found");const{value:s}=i,n=JSON.stringify({loginId:s,country:this.CountryCode,locale:this.LanugageCode,verify:"true"});fetch(t,{method:e,body:n,headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.showSuccessMessage(e,document)}))}doResendEmailVerification(){this.debug.log("doResendEmailVerification","start");let{method:e,action:t}=this.CTA.dataset;const i=this.ROOT.dataset.userData;if(e||(this.debug.warn("doResendEmailVerification","mothod not provided, using GET"),e="GET"),!t)return void this.debug.error("doResendEmailVerification","url not provided");if(!i)return void this.debug.error("doResendEmailVerification","userData not available");let s;e=e.toUpperCase();try{s=JSON.parse(i)}catch(e){return void this.debug.error("doResendEmailVerification",e)}const{UID:n,UIDSignature:o,signatureTimestamp:r}=s,a=JSON.stringify({UID:n,UIDSignature:o,signatureTimestamp:r,country:this.CountryCode,locale:this.LanugageCode});fetch(t,{method:"POST",body:a,headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.debug.log("doResendEmailVerification","success",e);const t=this.ROOT._form;let i;t&&(i=t.parentElement.querySelector(".form-result-container")),this.showSuccessMessage(e,i||document)})).catch((e=>{this.debug.log("doResendEmailVerification","error",e)}))}showSuccessMessage({errorCode:e},t){if("resendEmailVerification"==this.CTA_TYPE){const e=this.ROOT._form;e&&(t=e.parentElement.querySelector(".form-result-container"))}const i=0!=e?"error":"information";0==e?xl.ShowInfo({errorCode:e,root:t,variant:i}):xl.show({errorcode:e,root:t,hide:!1})}}yt(cc,cc.SelectorConfig);const{EMAIL_VALUE_LOCAL_STORAGE_KEY:dc}=sl;class uc{static selectorsConfig={selectors:{self:'form.cmp-digital-form[data-form-type="ppcForgotPassword"]'}};debug;api;FormElement;PPCForm;emailField;constructor({element:e}){this.FormElement=e,this.Init()}get CountryCode(){return fl.CountryCode}get LanguageCode(){return fl.LanguageCode}Init(){this.debug=new gn({constructorName:this.constructor.name,origin:"forgot-password"}),this.debug.log("init start",this.FormElement?.className),this.emailField=this.FormElement.querySelector('input[name="email"]'),this.fillEmail(this.emailField),this.PPCForm=new $l(this.FormElement,{onSubmit:(...e)=>this.doSubmit(...e)}),this.api=window.gigya,fl.on(sl.SESSION_VALID_EVENT_NAME,((...e)=>this.onAlreadyLoggedIn(...e))),this.debug.log("init finish",this.FormElement?.className)}onAlreadyLoggedIn(e){this.debug.getDebugMode(),!0===e?.isVerified?fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.PROFILE):this.api?.accounts.logout({callback:()=>{fl.fetchPPCPageUrls().finally((()=>{fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.LOGIN)}))}})}doSubmit(e,t){if(this.debug.log("doSubmit"),!this.canSubmit(e))return this.PPCForm.OnSubmitError(),void this.debug.warn("can not submit");this.PPCForm.showLoadingOverlay();const{email:i}=e,{resetpasswordApi:s}=t,n={loginId:i,country:this.CountryCode,locale:this.LanguageCode};return this.debug.log("doSubmit~makeAPICall",n,s),this.makeAPICall(n,s).catch((e=>{this.haveResetPasswordResponse(e)})).then((e=>this.haveResetPasswordResponse(e))),!0}haveResetPasswordResponse(e){return Ct({event:"cmp:formComplete",eventInfo:{path:"component.forgotPassword-"},component:{"forgotPassword-":{"dc:title":"verification email sent",formInfo:{formStep:2}}}}),this.debug.log("haveResetPasswordResponse",e),this.PPCForm.OnSubmitSuccess(e),this.PPCForm.hideLoadingOverlay(),to(this.FormElement)}canSubmit(e){return!!e.email}async makeAPICall(e,t){const i={method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)},s=await fetch(t,i);if(!s.ok)throw new Error("Network Error");return await s.json()}fillEmail(e){const t=li.getLocalStorageValue(dc);t&&(e.value=t)}}yt(uc,uc.selectorsConfig);class hc{static selectorsConfig={selectors:{self:'form.cmp-digital-form[data-form-type="ppcPasswordReset"]'}};#ns="";debug;api;FormElement;PPCForm;static URLKEY="pwrt";constructor({element:e}){this.FormElement=e,this.Init()}Init(){const e=pn.getURL().searchParams;this.#ns=e[hc.URLKEY],this.createUserNameField(e.email||""),this.debug=new gn({constructorName:this.constructor.name,origin:"session-manager"}),this.debug.log("init start",this.FormElement?.className),this.PPCForm=new $l(this.FormElement,{onSubmit:(...e)=>this.doSubmit(...e)}),this.api=window.gigya,this.debug.log("init end",this.FormElement?.className)}doSubmit(e){if(this.debug.log("doSubmit"),xl.hideAll(),!this.canSubmit(e))return this.PPCForm.OnSubmitError(resp);this.PPCForm.showLoadingOverlay();const{password:t}=e;this.api.accounts.resetPassword({passwordResetToken:this.#ns,newPassword:t,callback:(...e)=>{this.haveResetPasswordResponse(...e)}})}haveResetPasswordResponse(e){return this.debug.log("haveResetPasswordResponse",e),this.PPCForm.hideLoadingOverlay(),0===e.errorCode?this.OnSubmitSuccess(e):this.OnSubmitError(e)}OnSubmitError(e){switch(this.PPCForm.OnSubmitError(e),e?.errorCode){case 401030:this.handleOldPasswordUsed(e);break;case 403025:this.handleInvalidToken(e)}xl.show({form:this.FormElement,errorcode:e?.errorCode,response:e}),this.clearPasswordFields()}OnSubmitSuccess(e){this.PPCForm.OnSubmitSuccess(e),to(this.FormElement),Ct({event:"cmp:formComplete",eventInfo:{path:"component.resetPassword-"},component:{"resetPassword-":{"dc:title":"password reset success",formInfo:{formStep:2}}}})}clearPasswordFields(){this.FormElement.querySelectorAll("[data-cmp-form-password-confirm-input],[data-cmp-form-password-primary-input]").forEach((e=>e.value=""))}handleOldPasswordUsed(){Ct({event:"cmp:formError",eventInfo:{path:"component.resetPassword-"},component:{"resetPassword-":{"dc:title":"reset password",formInfo:{formError:"|cannot use 5 most recent passwords"}}}})}handleInvalidToken(){Ct({event:"cmp:formError",eventInfo:{path:"component.resetPassword-"},component:{"resetPassword-":{"dc:title":"reset password",formInfo:{formError:"|password token has expired"}}}})}canSubmit(e){return this.isPasswordValid(e)}isPasswordValid(){return!0}createUserNameField(e=""){const t=oi.createElement("input",{autocomplete:"username email",name:"username",hidden:!0,type:"text",style:"display: none;",value:e});this.FormElement.appendChild(t)}}yt(hc,hc.selectorsConfig);class mc{#os;#rs=null;#as="";#ls="";#j={siteRegistrationShowCTA:".generalregistrationcta",cancelButtonSiteRegistration:'.general-xf .cmp-form-button[type="button"]',siteRegistrationForm:".general-xf .cmp-digital-form__ppcRegistration",cancelButtonSocialRegistration:'.social-xf .cmp-form-button[type="button"]',socialRegistration:{XF:".social-xf",Form:".social-xf form"},socialProviders:'.social-container button[id^="social-"]',socialFormDesc:".social-xf form > .text"};constructor({element:e}){this.#os=e,this.init()}get IsRegistrationPage(){return this.#os.classList.contains("registrationprovider")}init(){this.attachEvents(),this.IsRegistrationPage&&this.datalayerComponentLoad()}attachEvents(){let e;this.IsRegistrationPage&&(e=this.#os.querySelector(this.#j.siteRegistrationShowCTA),e&&e.addEventListener("click",(()=>this.onClickShowSiteRegistration())),e=this.#os.querySelector(this.#j.cancelButtonSiteRegistration),e&&e.addEventListener("click",(()=>this.onClickCancelFormSite()))),this.#os.querySelectorAll(this.#j.socialProviders).forEach((e=>{e.addEventListener("click",(()=>this.handleSocialLoginClick(e)))})),e=this.#os.querySelector(this.#j.cancelButtonSocialRegistration),e&&e.addEventListener("click",(()=>this.onClickCancelFormSocial()))}onClickShowSiteRegistration(){this.#os.querySelector(".general-xf").classList.remove("hide"),this.#os.querySelector(".social-content").classList.add("hide"),this.#os.querySelector(this.#j.siteRegistrationShowCTA).classList.add("hide"),document.querySelector(".ppc-login-provider").nextElementSibling.classList.add("hide"),document.querySelector("#ppc-registration .text").classList.add("hide"),document.querySelector("#ppc-registration .title").classList.add("hide");this.#os.querySelector(this.#j.siteRegistrationForm).dispatchEvent(new CustomEvent("custom-event-form-start")),this.dataLayerSiteRegistrationFormLoad()}onClickCancelFormSite(){this.#os.querySelector(".general-xf").classList.add("hide"),this.#os.querySelector(".social-content").classList.remove("hide"),document.querySelector(".ppc-login-provider").nextElementSibling.classList.remove("hide"),document.querySelector("#ppc-registration .text").classList.remove("hide"),document.querySelector("#ppc-registration .title").classList.remove("hide"),this.#os.querySelector(this.#j.siteRegistrationShowCTA).classList.remove("hide"),this.resetForm(this.#os.querySelector(".general-xf")),window.scrollTo({top:0,behavior:"smooth"}),this.datalayerComponentLoad()}handleSocialLoginClick(e){const t=e.dataset.id;this.#as=e.dataset.provider,this.#ls=e.dataset.id,fl.doSocialLogin({provider:t,extraProfileFields:sl.IPG_FILTER.join(","),include:sl.USER_ACCOUNT_INCLUDES.join(",")}).catch((e=>{io(this.#os,e?.errorMessage)})).then((e=>{this.handleSocialLoginCallback(e)}))}async handleSocialLoginCallback(e){if("0"===e.errorCode)Ct({event:"cmp:formComplete",eventInfo:{path:"component.login-"},component:{"login-":{"dc:title":"login success",loginStatus:"logged-in",gigyaId:e?.UID,loginMethod:e.loginProvider,formInfo:{formStep:2}}}}),fl.subscriptionStatus()?fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.HOME):fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.PREFERENCEMANAGEMENT);else if(e.errorCode==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION){const t=this.#os.querySelector(this.#j.socialRegistration.Form);this.#rs||(this.#rs=new pc(t,e)),this.createSocialBadge();const i=await fl.getAccountInfo({regToken:e.regToken});this.#rs.autoFill(i),this.showSocialRegistrationCompletionForm(e)}else io(this.#os,e?.errorMessage)}createSocialBadge(){document.querySelector(".provider-info")?.remove();const e="icon-social-"+this.#ls,t=document.createElement("div");t.classList.add("provider-info");const i=document.createElement("i");i.classList.add(e),i.classList.add("social-icon");const s=document.createElement("span");s.classList.add("providername"),s.textContent=this.#as,t.appendChild(i),t.appendChild(s),this.#os.querySelector(this.#j.socialFormDesc)?.appendChild(t)}showSocialRegistrationCompletionForm(e){const t=e?.loginProvider;this.dataLayerCompletionFormLoad(t,!this.IsRegistrationPage),this.IsRegistrationPage?(document.querySelector(".ppc-login-provider").nextElementSibling.classList.add("hide"),document.querySelector("#ppc-registration .text").classList.add("hide"),document.querySelector("#ppc-registration .title").classList.add("hide"),this.#os.querySelector(this.#j.siteRegistrationShowCTA).classList.add("hide")):(document.querySelector(".ppc-login-provider").classList.add("center"),document.querySelector("#ppc-login .text").classList.add("hide"),document.querySelector("#ppc-login .title").classList.add("hide"),document.querySelector("form.cmp-digital-form[data-form-type='ppcLogin']").classList.add("hide"),document.querySelector("#ppc-login .main:last-child").classList.add("hide")),this.#os.querySelector(".social-xf").classList.remove("hide"),this.#os.querySelectorAll("[class^=social-divider]").forEach((e=>e.classList.add("hide"))),this.#os.querySelector(".social-container").classList.add("hide")}onClickCancelFormSocial(){this.IsRegistrationPage?(document.querySelector(".ppc-login-provider").nextElementSibling.classList.remove("hide"),document.querySelector("#ppc-registration .text").classList.remove("hide"),document.querySelector("#ppc-registration .title").classList.remove("hide"),this.#os.querySelector(this.#j.siteRegistrationShowCTA).classList.remove("hide")):(document.querySelector(".ppc-login-provider").classList.remove("center"),document.querySelector("#ppc-login .text").classList.remove("hide"),document.querySelector("#ppc-login .title").classList.remove("hide"),document.querySelector("form.cmp-digital-form[data-form-type='ppcLogin']").classList.remove("hide"),document.querySelector("#ppc-login .main:last-child").classList.remove("hide")),this.resetForm(this.#os.querySelector(".social-xf")),this.#os.querySelector(".social-xf").classList.add("hide"),this.#os.querySelectorAll("[class^=social-divider]").forEach((e=>e.classList.remove("hide"))),this.#os.querySelector(".social-container").classList.remove("hide"),window.scrollTo({top:0,behavior:"smooth"})}resetForm(e){const t=e?.querySelector("form");t&&(t.reset(),Xn(t.country))}datalayerComponentLoad(){Ct({event:"cmp:formStart",eventInfo:{path:"component.registration-"},component:{"registration-":{"dc:title":"registration landing page",registrationStatus:"landing page abandonded",formInfo:{formReferrer:yn.EventUtils.getLocalStorageValue(sl.SIGNUP_JOURNEY_PAGENAME)||"",formStep:1}}}})}dataLayerCompletionFormLoad(e,t=!1){const i={event:"cmp:formStep",eventInfo:{path:"component.registration-"},component:{"registration-":{"dc:title":"social completion form",registrationStatus:"form abandonded",registrationMethod:e,formInfo:{formStep:3}}}};t&&(i.component["registration-"].socialLoginFailed="social login failed"),Ct(i)}dataLayerSiteRegistrationFormLoad(){Ct({event:"cmp:formStep",eventInfo:{path:"component.registration-"},component:{"registration-":{"dc:title":"registration form",registrationStatus:"form abandonded",registrationMethod:"Form Registration",formInfo:{formStep:2}}}})}}yt(mc,{selectors:{self:".cmp-ppc-login-provider"}});class pc{#cs;#y;#ki;get PPCForm(){return this.#ki}constructor(e,t){this.#y=e,this.#cs=t,this.#ki=new $l(this.#y,{onSubmit:(...e)=>this.haveSubmitEvent(...e)})}haveSubmitEvent(e){this.#ki.showLoadingOverlay();const t=new Nl(fl.CountryCode,fl.LanguageCode).build(e,this.#y);t.data.loginCount=1;const i={UID:this.#cs.UID,regToken:this.#cs.regToken,isRegistered:!0,...t};fl.doSocialRegistration(i).then((e=>this.SocialRegistrationComplete(e))).catch((e=>this.afterRegistrationError(e)))}SocialRegistrationComplete(e){this.#cs=e,this.dataLayerRegistrationCompleted(this.#cs?.loginProvider,this.#cs?.UID),this.#ki.OnSubmitSuccess(),fl.subscriptionStatus()?fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.HOME):fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.PREFERENCEMANAGEMENT)}afterRegistrationError(e){this.#ki.hideLoadingOverlay(),this.#ki.OnSubmitError(e),io(this.#y,e?.errorMessage)}autoFill(e){const{profile:t}=e;yn.FormUtils.fillFormFields({profile:t},this.#y),t.email&&this.#y.querySelector("[name='email']")&&(this.#y.querySelector('[name="email"]').value=t.email),window.scrollTo({top:0,behavior:"smooth"})}dataLayerRegistrationCompleted(e,t){Ct({event:"cmp:formComplete",eventInfo:{path:"component.registration-"},component:{"registration-":{registrationStatus:"registered-verified","dc:title":"registration success",gigyaId:t,registrationMethod:e,formInfo:{formStep:4}}}})}}class fc extends ri{savedItemAttrName;newSelectedItems=new Map;unSelectedItems=new Map;allSelectedItems=new Map;modifiedItems=new Map;constructor(e="isSaved"){super(),this.savedItemAttrName=e}clearSelectionState(){this.newSelectedItems.clear(),this.allSelectedItems.clear(),this.unSelectedItems.clear(),this.modifiedItems.clear()}onSelectionChange(e){const t=e.currentTarget,i=t.name,s="true"===t.dataset[this.savedItemAttrName];this.modifiedItems.set(i,t),t.checked?(this.allSelectedItems.set(i,t),this.unSelectedItems.delete(i),s?this.modifiedItems.delete(i):this.newSelectedItems.set(i,t)):(this.allSelectedItems.delete(i),this.newSelectedItems.delete(i),s?this.unSelectedItems.set(i,t):this.modifiedItems.delete(i)),ml.log(`selected:${this.allSelectedItems.size} | unselected: ${this.unSelectedItems.size}       | new selected: ${this.newSelectedItems.size} | modified : ${this.modifiedItems.size}`)}}const{PPC_SELECTORS:gc}=sl,{KeyboardUtils:yc}=yn;class Ec extends fc{static EVENT_NAMES={ACCORDION_SHOW:"accordion-item-show",ACCORDION_HIDE:"accordion-item-hide",ITEMSELECTION_CHANGE:"item-change"};#e;#ds="#accordion-item-template";#us;#hs;#ms=[];constructor(e={}){if(super(),this.#e="PPC: Accordion",!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);if(!e.parentElement)throw new Error(`${this.#e}: parentElement could not be found in config object`);this.#us=e.parentElement,this.init()}init(){if(this.#hs=this.#us.querySelector(`[data-${gc.subscriptions.accordionForm}]`),!this.#hs)throw new Error(`${this.#e}: form container element could not be found in parent element`);this.#ms=Array.from(this.#hs.querySelectorAll(`[data-${gc.subscriptions.parent}-value]`)),this.initEventListeners()}initEventListeners(){this.#ms.forEach((e=>e.addEventListener("toggle",(e=>this.#ps(e)))))}clearItems(){this.#us.querySelectorAll(`[data-${gc.subscriptions.accordionItem}]`).forEach((e=>e.remove())),this.clearSelectedItems()}createNewItem(e){const{_id:t,_source:i}=e,s=this.#us.querySelector(this.#ds),n=this.findAccordion(i.category);if(!n)return;const o=n.querySelector(`[data-${gc.subscriptions.accordionFieldset}]`);o.appendChild(s.content.cloneNode(!0));const r=o.lastElementChild,a=r.querySelector("input");a.value=a.name=t,a._itemData=e,a.addEventListener("change",(e=>this.#fs(e)));r.querySelector("span").textContent=i.title;r.querySelector("p").textContent=i.description,r.addEventListener("keydown",this.onAccordionItemKey)}#fs(e){this.onSelectionChange(e),this.dispatch(Ec.EVENT_NAMES.ITEMSELECTION_CHANGE,e)}#ps(e){e.currentTarget.open?this.dispatch(Ec.EVENT_NAMES.ACCORDION_SHOW,e):this.dispatch(Ec.EVENT_NAMES.ACCORDION_HIDE,e)}setSelectedItems(e=[]){e.forEach((e=>{const t=this.#hs.querySelector(`input[value="${e}"]`);t&&(this.allSelectedItems.set(e,t),t.dataset[this.savedItemAttrName]=!0,t.checked=!0)}))}clearSelectedItems(){this.clearSelectionState(),this.#hs.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=!1,delete e.dataset[this.savedItemAttrName]}))}getModifiedItems(){const e=[];return this.modifiedItems.forEach((t=>{e.push({selected:t.checked,data:t._itemData})})),e}findAccordion(e){return this.#ms.find((t=>t.dataset.cmpPpcSubscriptionsValue===e))}onAccordionItemKey(e){const t=e.target,{getKeyID:i}=yc;"ENTER"===i(e)&&(e.preventDefault(),t.checked=!t.checked)}}var vc=Ec;async function bc({url:e,body:t,method:i="POST",headers:s={"Content-Type":"application/json"}}){return async function({url:e,method:t,body:i,headers:s}){try{const n=await fetch(e,{method:t,body:i,headers:s,redirect:"follow"});if(n.ok)return await n.json();{const e=await n.text();return Promise.reject(e)}}catch(e){throw e}}({url:e,body:t,method:i,headers:s})}async function Sc(e){return bc({url:"/bin/kpmg/accounts/promo/feed",body:e})}const{PPC_SELECTORS:Cc}=sl;var Ic=class{#e;#se={subscriptionsParent:null,LocaleDropdown:null,ConfirmationDialog:null,LoadingOverlay:null};#gs;#ys;#V={RegisteredCountryCode:"",RegisteredLanuageCode:"",SelectedLanguageCode:"",savedAccountInfo:null};haveAccountInfo(e){this.#V.savedAccountInfo=e,this.#V.RegisteredCountryCode=fl.CountryCode,this.#V.RegisteredLanuageCode=fl.LanguageCode,this.#V.SelectedLanguageCode||(this.#V.SelectedLanguageCode=fl.LanguageCode,this.#se.LocaleDropdown.value=this.#V.SelectedLanguageCode)}#b=!1;get IsChanged(){return this.#b}constructor(e={}){if(this.#e=`PPC: ${this.constructor.name}`,!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);if(!e.rootElement)throw new Error(`${this.#e}: parentElement could not be found in config object`);this.#gs=e.rootElement,this.#se.ConfirmationDialog=e.confirmationDialog,this.#se.LoadingOverlay=e.loadingOverlay,this.init()}init(){this.getUI(),this.#ys=new vc({parentElement:this.#se.subscriptionsParent}),this.#Es()}getUI(){this.#se.subscriptionsParent=this.#gs.querySelector(`[data-${Cc.subscriptions.parent}]`),this.#se.subscriptionsParent&&(this.#se.LocaleDropdown=this.#se.subscriptionsParent.querySelector("#mf-select"),this.#se.LocaleDropdown&&(this.#V.SelectedLanguageCode=this.#se.LocaleDropdown.value,this.#se.LocaleDropdown.addEventListener("change",(e=>this._onSelectionChagne(e))),this.#se.ConfirmationDialog?.on("modal-closed",((...e)=>this._onConfirmedChange(...e))),this.#se.ConfirmationDialog.on("modal-opened",(()=>this.#se.ConfirmationDialog.ui.closeBtn?.focus()))))}_onSelectionChagne(){this.IsChanged?this.#se.ConfirmationDialog.showModal(this.#se.LocaleDropdown):(this.dispatch("locale-selection-change",this.#se.LocaleDropdown.value),this.#V.SelectedLanguageCode=this.#se.LocaleDropdown.value,this.#se.LoadingOverlay.show(),this.datalayerDropdownSelectionChanged(this.#V.SelectedLanguageCode),this.FetchAndDisplaySubscriptions().finally((()=>{this.datalyerSubscriptionShown(this.#V.SelectedLanguageCode),this.#se.LoadingOverlay.hide()})))}_onConfirmedChange({detail:e}){"continue"==e?(this.#V.SelectedLanguageCode=this.#se.LocaleDropdown.value,this.dispatch("locale-selection-change",this.#se.LocaleDropdown.value),this.datalayerDropdownSelectionChanged(this.#V.SelectedLanguageCode),this.#se.LoadingOverlay.show(),this.FetchAndDisplaySubscriptions().finally((()=>{this.datalyerSubscriptionShown(this.#V.SelectedLanguageCode),this.#se.LoadingOverlay.hide()}))):this.#se.LocaleDropdown.value=this.#V.SelectedLanguageCode}datalayerDropdownSelectionChanged(e){let t=e;const i=this.#se.LocaleDropdown.options[this.#se.LocaleDropdown.selectedIndex];i&&i.value==e&&(t=i.textContent),Ct({event:"cmp:click",eventInfo:{path:"component.dropdown-"},component:{"dropdown-":{"dc:title":t,...this.#vs()}}})}datalyerSubscriptionShown(e){let t=e;const i=this.#se.LocaleDropdown.options[this.#se.LocaleDropdown.selectedIndex];i&&i.value==e&&(t=i.textContent);const s=document.body.id;if(!s)return;const n=adobeDataLayer?.getState?.().page?.[document.body.id]?.pageName||"";vt("cmp:show",`page.${s}`,null,null,{[s]:{pageName:`${n}-MF preferences:${t}`}})}async FetchAndDisplaySubscriptions(){let e;this.#ys.clearItems();try{e=await async function(e,t){return bc({url:"/ecsearch/subscriptions",body:JSON.stringify({id:"subscriptions_template",params:{locale:`${e}_${t}`}})})}(this.#V.RegisteredCountryCode,this.#V.SelectedLanguageCode)}catch(e){return void console.error(e)}return this.getSubItemsToDisplay(e,this.#V.savedAccountInfo).forEach((e=>this.#ys.createNewItem(e))),this.loadSavedData(this.#V.savedAccountInfo),e}#Es(){this.#ys.on(vc.EVENT_NAMES.ACCORDION_SHOW,((...e)=>this.#bs(...e))).on(vc.EVENT_NAMES.ACCORDION_HIDE,((...e)=>this.#Ss(...e))).on(vc.EVENT_NAMES.ITEMSELECTION_CHANGE,(e=>this.#Cs(e)))}setSelectedItems(e){return this.#ys.setSelectedItems(e)}clearSelectedItems(){this.#b=!1,this.#ys.clearSelectedItems(),this.dispatch("items-selection-reset")}loadSavedData(e){this.#V.savedAccountInfo=e;const t=this.#V.RegisteredCountryCode,i=this.#V.SelectedLanguageCode,s=e?.subscriptions;if(!s)return;const n=new Dl(s),o=[],r=n.getCountry(t)?.getLocale(i);r&&r.Items.forEach(((e,s)=>{!0===e.email&&o.push(`${t}.${i}.${s}`)})),this.clearSelectedItems(),this.setSelectedItems(o)}buildDataToSave(){const e=this.#ys.getModifiedItems(),t=new Dl;return e.forEach((({selected:e,data:i})=>{const[s,n]=i._source.locale.split("_");t.addCountry(s).addLocale(n).addItem(i._source.gigyaMapping,e,[i._source.externalid+"|"+i._source.title+"|"+i._source.frequency+"|"+s+"-"+n])})),t.updateFlags(),t.getJSON()}builDataForEmailAPI(){const e=[],t=[];return this.#ys.newSelectedItems.forEach((({_itemData:t})=>e.push(t._source.title))),this.#ys.unSelectedItems.forEach((({_itemData:e})=>t.push(e._source.title))),{addedSubscriptions:e,removedSubscriptions:t}}#vs(){return{"@type":this.#gs.dataset.componentPath,"repo:modifyDate":this.#gs.dataset.componentModifieddate,parentId:this.#gs.id}}#bs(e){const t=this.#se.subscriptionsParent.querySelector(`[data-${Cc.subscriptions.accordion}]`),i=`component.${t.id}`,s=e.currentTarget.dataset.cmpPpcSubscriptionsTitle;Ct({event:"cmp:show",eventInfo:{path:i},component:{[t.id]:{"dc:title":s,...this.#vs()}}})}#Ss(e){const t=this.#se.subscriptionsParent.querySelector(`[data-${Cc.subscriptions.accordion}]`),i=`component.${t.id}`,s=e.currentTarget.dataset.cmpPpcSubscriptionsTitle;Ct({event:"cmp:hide",eventInfo:{path:i},component:{[t.id]:{"dc:title":s,...this.#vs()}}})}#Cs(e){this.#b=this.#ys.modifiedItems.size>0,this.dispatch("items-selection-change",this.#b,e)}getDataLayerSelected(){const e=[];return this.#se.subscriptionsParent.querySelectorAll(`[data-${Cc.subscriptions.accordion}] details`).forEach((({dataset:{cmpPpcSubscriptionsValue:t}})=>{const i=[];this.#ys.newSelectedItems.forEach((({_itemData:e})=>{e._source.category==t&&i.push(e)})),e.push(i)})),e}getDataLayerUnSelected(){const e=[];return this.#se.subscriptionsParent.querySelectorAll(`[data-${Cc.subscriptions.accordion}] details`).forEach((({dataset:{cmpPpcSubscriptionsValue:t}})=>{const i=[];this.#ys.unSelectedItems.forEach((({_itemData:e})=>{e._source.category==t&&i.push(e)})),e.push(i)})),e}getSubItemsToDisplay(e,t){return e.hits.hits?.filter((e=>{const[i,s]=e._source.locale.split("_");return!!this.findSubItemInSavedData(t,i,s,e._source.gigyaMapping)||e._source.active&&!e._source.privateFlag}))}findSubItemInSavedData(e,t,i,s){const n=e.subscriptions&&e.subscriptions[t]&&e.subscriptions[t][i]&&e.subscriptions[t][i][s];return n&&!0===n.email.isSubscribed}#Is=new ri;on(e,t){return this.#Is.on(e,t)}off(e,t){return this.#Is.off(e,t)}dispatch(e,...t){try{this.#Is.dispatch(e,...t)}catch(e){console.error("error on custom event listener",e)}}};const{PPC_SELECTORS:_c}=sl,{DOMUtils:Lc,StringUtils:Tc}=yn;class Ac extends fc{static EVENT_NAMES={TABPANEL_SHOW:"tabpanel_show",ITEMSELECTION_CHANGE:"item_selection_change"};#e;#_s="#tab-link-template";#Ls="#tab-content-item-template";#Ts=[];#us;#As;#se;#Os;#rt=new fn;constructor(e={}){if(super(),this.#e=`PPC: ${this.constructor.name}`,!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);if(!e.parentElement)throw new Error(`${this.#e}: parentElement could not be found in config object`);if(this.#us=e.parentElement,!e.exclusiveContentData)throw new Error(`${this.#e}: exclusiveContentData could not be found in config object`);this.#As=e.exclusiveContentData,this.#se={},this.#Os={tabLink:`${_c.exclusiveContent.parent}__tab-link`,tabLinkActive:`${_c.exclusiveContent.parent}__tab-link--active`,tabLinkFocus:`${_c.exclusiveContent.parent}__tab-link--focus`,tabContentPanel:`${_c.exclusiveContent.parent}__tab-content-panel`,tabContentPanelActive:`${_c.exclusiveContent.parent}__tab-content-panel--active`},this.init()}init(){this.getUI(),this.buildTabsAndPanels()}getUI(){const{mainContainer:e,tabLinksContainer:t,tabContentContainer:i}=_c.exclusiveContent,s=this.#us.querySelector(`[data-${e}]`),n=s.querySelector(`[data-${t}]`),o=s.querySelector(`[data-${i}]`),r={mainContainer:s,tabLinksContainer:n,tabContentContainer:o,tabLinkTemplate:this.#us.querySelector(this.#_s),tabContentTemplate:this.#us.querySelector(this.#Ls)};for(const[e,t]of Object.entries(r))if(!t)throw new Error(`${this.#e}: ${e} element not found`);this.#se={elements:r,tabs:[]}}async buildTabsAndPanels(){this.createTabsArray().forEach(((e,t)=>{this.buildTabLink({tab:e,index:t})}));"DEFAULT"===this.#rt.getCurrentBreakPoint()&&new Oc(this.#se),this.attachKeyListeners()}buildTabLink(e={}){if(!(e instanceof Object))throw new Error(`${this.#e}: params must be an object`);const{tab:t,index:i}=e,{categoryId:s,categoryName:n,items:o}=t,{tabLinksContainer:r,tabLinkTemplate:a}=this.#se.elements;r.appendChild(a.content.cloneNode(!0));const l=r.lastElementChild;0==i&&(l.setAttribute("tabindex","0"),Lc.addClass({element:l,className:`${this.#Os.tabLinkActive}`}));const{tabLink:c}=_c.exclusiveContent,d=`data-${c}`;l.setAttribute(`${d}`,s),l.setAttribute("aria-controls",s),l.textContent=n,l.addEventListener("click",(e=>this.handleTabClick(e))),l.addEventListener("focus",(e=>this.handleTabFocus(e))),l.addEventListener("blur",(e=>this.handleTabBlur(e))),this.buildTabContentPanel({categoryId:s,categoryName:n,tabLink:l,items:o,index:i})}buildTabContentPanel(e={}){const{categoryId:t,tabLink:i,items:s,index:n}=e,{tabContentContainer:o}=this.#se.elements,r=`${this.#Os.tabContentPanel}`,a=0===n?`${r} ${this.#Os.tabContentPanelActive}`:`${r}`,l=Tc.convertToCamel(`${_c.exclusiveContent.tabContentPanel}`),c=Lc.createElement("div",{class:a,dataset:{[l]:t},role:"tabpanel",tabindex:0,"aria-labelledby":`tab-${t}`,"aria-controls":t});o.appendChild(c),this.#se.tabs.push({categoryId:t,tabLink:i,contentPanel:c}),this.populateTabContentPanel({panel:c,items:s})}populateTabContentPanel(e={}){const{panel:t,items:i}=e,{tabContentTemplate:s}=this.#se.elements;i.forEach((e=>{const{group_name:i}=e._source,n=Tc.convertToKebab(i);t.appendChild(s.content.cloneNode(!0));const o=t.lastElementChild;o.querySelector("span").textContent=i;const r=o.querySelector("input");r.value=e._id,r._itemData=e,r.addEventListener("change",(e=>this.#ws(e))),r.name=n}))}#ws(e){this.onSelectionChange(e),this.dispatch(Ac.EVENT_NAMES.ITEMSELECTION_CHANGE,e)}handleTabClick(e){e.preventDefault();const t=`${this.#Os.tabLinkActive}`;this.clearActive();const i=e.target;Lc.addClass({element:i,className:t}),i.setAttribute("aria-selected",!0);const s=i.dataset.cmpPpcExclusiveContentTabLink,n=this.#se.tabs.find((e=>e.categoryId===s)).contentPanel;Lc.addClass({element:n,className:`${this.#Os.tabContentPanelActive}`}),this.dispatch(Ac.EVENT_NAMES.TABPANEL_SHOW,e,i,n)}handleTabFocus(e){const{target:t}=e;Lc.addClass({element:t,className:`${this.#Os.tabLinkFocus}`})}handleTabBlur(e){const{target:t}=e;Lc.removeClass({element:t,className:`${this.#Os.tabLinkFocus}`})}attachKeyListeners(){const e=this.#us.querySelectorAll('[role="tab"]'),t=this.#us.querySelector('[role="tab-list"]');e.forEach((e=>{e.addEventListener("click",(e=>this.changeTabs(e))),e.addEventListener("focus",(e=>{e.target.classList.add("focus")})),e.addEventListener("blur",(e=>{e.target.classList.remove("focus")}))}));let i=0;t.addEventListener("keydown",(t=>{"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(e[i].setAttribute("tabindex",-1),"ArrowRight"===t.key?(i++,i>=e.length&&(i=0)):"ArrowLeft"===t.key&&(i--,i<0&&(i=e.length-1)),e[i].setAttribute("tabindex",0),e[i].focus(),e[i].click())}))}changeTabs(e){const t=e.target,i=t.parentNode,s=i.parentNode;i.querySelectorAll('[aria-selected="true"]').forEach((e=>e.setAttribute("aria-selected",!1))),t.setAttribute("aria-selected",!0),s.querySelectorAll('[role="tabpanel"]').forEach((e=>e.setAttribute("hidden",!0))),t.removeAttribute("hidden")}clearActive(){this.#se.tabs.forEach((e=>{Lc.removeClass({element:e.tabLink,className:`${this.#Os.tabLinkActive}`}),Lc.removeClass({element:e.contentPanel,className:`${this.#Os.tabContentPanelActive}`}),e.tabLink.setAttribute("aria-selected",!1)}))}createTabsArray(){const e=[],t=this.#As,{industrylabel:i,insightslabel:s,serviceslabel:n}=(new Set(t.map((e=>e._source.category))),this.#us.dataset),o={Industries:i,Insights:s,Services:n};return sl.EXCLUSIVE_COTNTENT_CATEGORIES.forEach((i=>{const s=t.filter((e=>e._source.category===i));if(!s.length)return;const n={categoryId:Tc.convertToKebab(i.toLowerCase()),categoryName:o[i],items:s};e.push(n)})),e}setSelectedItems(e){e.forEach((e=>{const t=this.#se.elements.mainContainer.querySelector(`input[value="${e}"]`);t&&(this.allSelectedItems.set(e,t),t.dataset[this.savedItemAttrName]=!0,t.checked=!0)}))}getSelectedItems(){return Array.from(this.#se.elements.mainContainer.querySelectorAll("input:checked")).map((e=>e._itemData))}clearSelectedItems(){this.clearSelectionState(),this.#se.elements.mainContainer.querySelectorAll('input[value="checkbox"]').forEach((e=>{e.checked=!1,delete e.dataset[this.savedItemAttrName]}))}}class Oc{constructor(e){this.slider=e.elements.tabLinksContainer,this.leftArrow=e.elements.mainContainer.querySelector("#leftArrow"),this.rightArrow=e.elements.mainContainer.querySelector("#rightArrow"),this.scrollStep=e.elements.mainContainer.querySelector(".cmp-ppc-exclusive-content__tab-link").clientWidth+40,this.initialize()}initialize(){this.leftArrow.classList.add("display-arrows"),this.rightArrow.classList.add("display-arrows"),this.updateArrows(),this.attachEventListeners()}attachEventListeners(){this.rightArrow.addEventListener("click",(()=>this.scrollSlider(this.scrollStep))),this.leftArrow.addEventListener("click",(()=>this.scrollSlider(-this.scrollStep))),this.slider.addEventListener("scroll",(()=>this.updateArrows()))}scrollSlider(e){this.slider.scrollBy({left:e,behavior:"smooth"})}updateArrows(){this.slider.scrollLeft>0?(this.slider.classList.add("gradient-left"),this.slider.classList.remove("gradient-right"),this.leftArrow.style.display="block"):(this.slider.classList.remove("gradient-left"),this.leftArrow.style.display="none"),this.slider.scrollLeft<this.slider.scrollWidth-this.slider.clientWidth-40?(this.slider.classList.add("gradient-right"),this.slider.classList.remove("gradient-left"),this.rightArrow.style.display="block"):(this.slider.classList.remove("gradient-right"),this.rightArrow.style.display="none")}}var wc=Ac;const{StringUtils:Pc}=yn;var Nc=class{#e;#gs;#se;#Ps;#b=!1;get IsChanged(){return this.#b}constructor(e={}){if(this.#e="PPC: ExclusiveContent",!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);this.#gs=e.rootElement,this.#se={},this.init()}init(){this.getUI(),this.initEventListeners()}initEventListeners(){}async getExclusiveContentData(e,t){return async function(e,t,i=["Industries","Insights","Services"]){return bc({url:"/ecsearch/exclusive_content_topics",body:JSON.stringify({id:"listing_exclusive_content_topics",params:{categories:i,locales:[`${e}_${t}`]}})})}(e,t)}async getUI(){const e=this.#gs.querySelector(`[data-${sl.PPC_SELECTORS.exclusiveContent.parent}]`);this.#se={exclusiveContentParent:e}}buildCategoriesAndGroups(e,t){this.EXCLUSIVE_CONTENT_DATA=e,this.#b=!1,this.#Ps=new wc({parentElement:this.#se.exclusiveContentParent,accountData:t,exclusiveContentData:e}),this.#Ns()}getSelectedItems(){return this.#Ps.getSelectedItems()}setSelectedItem(e){return this.#Ps.setSelectedItems(e)}buildDataToSave(){const e=this.getSelectedItems(),t={},i=[];return e.forEach((e=>{i.push(e._id);const{category:s,interests:n,locale:o}=e._source,r=o.replace("_","/"),a=sl.PPC_PREFERENCES_CATEGORY_TO_ES_CATEGORY_MAP[s];t[a]||(t[a]={[r]:{}}),n.forEach((({zthesId:e})=>{t[a][r][e]={}}))})),{preferences:JSON.stringify(t),exclusivecontent:JSON.stringify(i)}}#Ns(){this.#b=!1,this.#Ps.on(wc.EVENT_NAMES.TABPANEL_SHOW,((...e)=>this.#Rs(...e))).on(wc.EVENT_NAMES.ITEMSELECTION_CHANGE,(e=>this.#Us(e)))}#Us(e){const t=this.#Ps.modifiedItems.size>0;this.#b=t,this.dispatch("items-selection-change",t,e)}#Rs(e,t){const i=this.#se.exclusiveContentParent.querySelector(`[data-${sl.PPC_SELECTORS.exclusiveContent.tabLinksContainer}]`),s=this.#gs.id,n=`component.${i.id}`,o=this.#gs.dataset.componentModifieddate,r=this.#gs.dataset.componentPath;Ct({event:"cmp:show",eventInfo:{path:n},component:{[i.id]:{"dc:title":t.textContent,"@type":r,"repo:modifyDate":o,parentId:s}}})}getDataLayerSelected(){const e=[];return sl.EXCLUSIVE_COTNTENT_CATEGORIES.forEach((t=>{const i=Pc.convertToKebab(t.toLowerCase());if(!this.#se.exclusiveContentParent.querySelector(`[data-${sl.PPC_SELECTORS.exclusiveContent.tabLinksContainer}] [data-${sl.PPC_SELECTORS.exclusiveContent.tabLink}="${i}"]`))return;const s=[];this.#Ps.newSelectedItems.forEach((({_itemData:e})=>{e._source.category==t&&s.push(e)})),e.push(s)})),e}getDataLayerUnSelected(){const e=[];return sl.EXCLUSIVE_COTNTENT_CATEGORIES.forEach((t=>{const i=Pc.convertToKebab(t.toLowerCase());if(!this.#se.exclusiveContentParent.querySelector(`[data-${sl.PPC_SELECTORS.exclusiveContent.tabLinksContainer}] [data-${sl.PPC_SELECTORS.exclusiveContent.tabLink}="${i}"]`))return;const s=[];this.#Ps.unSelectedItems.forEach((({_itemData:e})=>{e._source.category==t&&s.push(e)})),e.push(s)})),e}loadSavedData(e){if(!this.#Ps)return;this.#Ps.clearSelectedItems();const t=e?.data?.exclusivecontent;let i;t&&(i=JSON.parse(t),this.setSelectedItem(i))}#Is=new ri;on(e,t){return this.#Is.on(e,t)}off(e,t){return this.#Is.off(e,t)}dispatch(e,...t){try{this.#Is.dispatch(e,...t)}catch(e){console.error("error on custom event listener",e)}}};const{PPC_SELECTORS:Rc,SESSION_VALID_EVENT_NAME:Uc}=sl,{instance:kc}=pn.getInstance();class Dc{#e;#Zt;#ks;#Ds;#se;#Ms;#gs;#Fs;#qs;#xs;get StoredSubscriptions(){return this.#xs}#Vs=!1;#$s=!1;get isAnyFieldChanged(){return this.#Vs||this.#$s}set isSubscriptionChanged(e){this.#Vs=e,this.isAnyFieldChanged?window.addEventListener("beforeunload",this.onBeforeUnload):window.removeEventListener("beforeunload",this.onBeforeUnload)}set isInterestsChanged(e){this.#$s=e,this.isAnyFieldChanged?window.addEventListener("beforeunload",this.onBeforeUnload):window.removeEventListener("beforeunload",this.onBeforeUnload)}#Bs;loadingOverlay=new El;constructor(e={}){if(this.#e=`PPC: ${this.constructor.name}`,this.#gs=e.element,!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);this.#se={},this.init()}async init(){this.loadingOverlay.Init(this.#gs);const e=await this.#gs.querySelector(`[data-${Rc.preferenceManagement.submitButton}]`);this.#se.submitButton=e,this.initConfirmationOverlay();const t="true"===this.#gs.dataset.enableSubscriptions,i="true"===this.#gs.dataset.enableInterests;t&&(this.#Ms=new Ic({rootElement:this.#gs,confirmationDialog:this.#Bs,loadingOverlay:this.loadingOverlay})),i&&(this.#Fs=new Nc({rootElement:this.#gs})),this.initEventListeners(),fl.on(Uc,(e=>{fl.redirectOnCrossSite(sl.PPC_PAGE_NAMES.PREFERENCEMANAGEMENT),this.#qs=new Dl(e.subscriptions),this.#Ms?.haveAccountInfo(e),this.onValidSession(e)})),"local"!==kc&&fl.redirectOnUnAuthorisedAccess(sl.PPC_PAGE_NAMES.LOGIN)}initConfirmationOverlay(){let e=this.#gs.querySelector(`[data-${Rc.preferenceManagement.confirmDialogTemplate}]`).content.cloneNode(!0).querySelector(".text-msg"),t=this.#Bs=new vo;t.ui.root.classList.add(Rc.preferenceManagement.confirmDialogTemplate),t.AddContent(e);let i=e.querySelector("h1,h2,h3,h4,h5,h6,p");i&&(i.id||(i.id="msg-overlay-desc-id-ppc-preference"),t.setLabelledby(`${i.id}`)),t.setButtonText(e.dataset.buttonTextCancel,e.dataset.buttonTextContinue);let s=!1;const n=e=>{!s&&this.isAnyFieldChanged&&(e.preventDefault(),e.stopPropagation(),s=!1,t.showModal(e.currentTarget),t._buttons.cancel.focus())};t._buttons.continue.addEventListener("click",(()=>{t.hideModal("continue"),s=!0,window.removeEventListener("beforeunload",this.onBeforeUnload);let e=t.currentActivator;e&&e.click&&setTimeout((()=>e.click()))})),document.querySelectorAll('a[href]:not([href^="#"]):not([href=""]):not([href^="mailto:"]):not([href^="tel:"]):not([href^="javascript:"]):not([target="_blank"])').forEach((e=>e.addEventListener("click",n)))}onValidSession=e=>{this.#Zt=e,this.#ks=fl.CountryCode,this.#Ds=fl.LanguageCode,this.#se.submitButton.removeAttribute("disabled"),this.#se.submitButton.style.cursor="pointer",ml.log(`${this.#e}: onValidSession: `,e);try{this.InitSubscription()}catch(e){console.error(e)}try{this.InitExclusiveContent()}catch(e){console.error(e)}};InitSubscription(){return this.#Ms?.FetchAndDisplaySubscriptions()}async InitExclusiveContent(){if(!this.#Fs)return;const e=await this.#Fs.getExclusiveContentData(this.#ks,this.#Ds),t=this.getPreferenceItemsToDisplay(e);this.#Fs.buildCategoriesAndGroups(t,this.#Zt),this.#Fs.loadSavedData(this.#Zt)}getPreferenceItemsToDisplay(e){return e.hits.hits.filter((e=>e._source.active_flag))}onInvalidSession=()=>{};showLoadingModal(){this.loadingOverlay.show()}hideLoadingModel(){this.loadingOverlay.hide()}initEventListeners(){this.#gs.querySelectorAll("form").forEach((e=>e.addEventListener("submit",(e=>e.preventDefault()))));const{submitButton:e}=this.#se;e.disabled=!0,e.addEventListener("click",(e=>this.onSubmit(e))),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.#Ms?.on("items-selection-change",(e=>{this.isSubscriptionChanged=e})),this.#Ms?.on("items-selection-reset",(()=>{this.isSubscriptionChanged=!1})),this.#Ms?.on("locale-selection-change",(()=>{setTimeout((()=>xl.hideAll()))})),this.#Fs?.on("items-selection-change",(e=>{this.isInterestsChanged=e}))}onBeforeUnload(e){if(this.isAnyFieldChanged)return e.preventDefault(),e.returnValue=!0,"any-non-blank-value"}async onSubmit(e){if(e.preventDefault(),xl.hideAll(),!this.isAnyFieldChanged)return!0;this.showLoadingModal();const t=this.#Ms?.buildDataToSave(this.#ks,this.#Ds),i=this.#Fs?.buildDataToSave();let s;try{s=await fl.setAccountInfo({data:i,subscriptions:t})}catch(e){return console.error(e),xl.show({errorcode:"GENERIC"}),void this.hideLoadingModel()}this.doDataLayerOnSave(),this.isInterestsChanged=this.isSubscriptionChanged=!1;if(0!=(s&&s.errorCode))return xl.show({errorcode:"GENERIC"}),void this.hideLoadingModel();xl.show({errorcode:0}),this.#Zt=fl.getStoredInfoIfActive();try{await this.emailSubscription()}catch(e){console.error(e)}this.RefreshItems(this.#Zt),this.hideLoadingModel(),window.scrollTo({top:0,behavior:"smooth"})}emailSubscription(){if(!this.#Ms)return;const{addedSubscriptions:e,removedSubscriptions:t}=this.#Ms.builDataForEmailAPI(),i=JSON.stringify({uid:this.#Zt.UID,uidSignature:encodeURIComponent(this.#Zt.UIDSignature),signatureTimestamp:this.#Zt.signatureTimestamp,addedSubscriptions:e,removedSubscriptions:t,locale:this.#ks+"/"+this.#Ds});return fetch("/bin/kpmg/accounts/emailsubscriptions",{body:i,method:"POST",headers:{"content-type":"application/json"}})}async RefreshItems(e){this.#Ms?.loadSavedData(e),this.#Fs?.loadSavedData(e)}async doDataLayerOnSave(){const e=(e,t)=>e.map((e=>e.map((({_source:e})=>e[t])).join(","))).join("|");let t,i;this.#Fs&&(t={selected:this.#Fs.getDataLayerSelected(),unselected:this.#Fs.getDataLayerUnSelected()}),this.#Ms&&(i={selected:this.#Ms?.getDataLayerSelected(),unselected:this.#Ms?.getDataLayerUnSelected()}),Ct({event:"cmp:preferenceselection",eventInfo:{path:"component.preferencesave-"},component:{"preferencesave-":{"dc:title":"Save",contentSelected:this.#Fs?e(t.selected,"group_name"):"",contentUnselected:this.#Fs?e(t.unselected,"group_name"):"",subscriptionSelected:this.#Ms?e(i.selected,"title"):"",subscriptionUnselected:this.#Ms?e(i.unselected,"title"):"","@type":this.#gs.dataset.componentPath}}})}}("local"===kc||wn())&&yt(Dc,{selectors:{self:`[data-${Rc.preferenceManagement.parent}]`}});class Mc{#e;#gs;#ks;#Ds;#Gs=[];#Hs;#js;#Ks;#zs;#Ws;#ti=new El(document.body);#Ys;#Js="";constructor(e={}){if(this.#e=`PPC: ${this.constructor.name}`,this.#gs=e.element,!(e instanceof Object))throw new Error(`${this.#e}: config must be an object`);this.init()}init(){const e=window.location.href;if(this.#Gs=(/subscriptionId=([^&]+)/.exec(e)||[])[1],this.#Hs=(/uid=([^&]+)/.exec(e)||[])[1],this.#Ws=(/token=([^&]+)/.exec(e)||[])[1],this.#Gs||this.#Ws)this.fetchSubscription();else{let e=document.getElementsByClassName("checkbox-cell")[0];e.parentNode.removeChild(e)}this.#Hs||this.#Ws||(this.#gs.querySelector(".submit-check").disabled=!0,this.#gs.querySelector(".submit-check").classList.add("disabled")),this.attachEvents(),this.#Ys=fl.isLoggedIn();const t=document.querySelector(".cmp-ppc-navigation .ppc-loading-spinner-container");if(t){const e=t.cloneNode(!0),i=this.#gs.querySelector(".ppc-loading-spinner-container");i&&(i.innerHTML=e.innerHTML)}}async fetchSubscription(){let e,t,i;if(this.#Gs){const s=`${Pn()}.${Nn()}`;e="/ecsearch/subscriptions",i=JSON.stringify({id:"single_subscription_template",params:{id:s+"."+this.#Gs}}),t="POST"}else e=`/bin/kpmg/accounts/getsubsciptionname?token=${this.#Ws}&locale=${Pn()}/${Nn()}`,t="GET";try{const s=await fetch(e,{body:"POST"===t?i:void 0,method:t,headers:{"content-type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.json();if(n?.hits?.hits?.length)this.replaceSubscriptionTopic(n.hits.hits);else{const e=document.querySelector(".checkbox-cell");e&&e.parentNode.removeChild(e)}}catch(e){console.error("Error during subscription fetch:",e)}}replaceSubscriptionTopic(e){let t;if(t=this.#Gs?e.filter((e=>e._source?.gigyaMapping===this.#Gs)):e.filter((e=>e._source?.title.length>0)),t.length){const e=this.#gs.querySelector(".subscriptionlabel");let i=e.textContent;this.#Js=t[0]._source.title,i=i.replace("$subscriptionTopic",'<span class="subscriptionvalue">'+this.#Js+"</span>"),e.innerHTML=i}}attachEvents(){const e=this.#gs.querySelector(".submit-check"),t=this.#gs.querySelector(".cancel-check");e.addEventListener("click",(()=>this.validationsCheck())),t.addEventListener("click",(()=>this.cancelCheck())),this.#Ks=this.#gs.querySelector("#unsubscribeRadio"),this.#zs=this.#gs.querySelector("#optOutRadio")}validationsCheck(){!0===this.#Ks?.checked||!0===this.#zs?.checked?(this.#gs.querySelector(".error-message").classList.add("hide-errormsg"),this.optoutSubscriptions()):this.#gs.querySelector(".error-message").classList.remove("hide-errormsg")}cancelCheck(){pn.navigateToURL(fl.HomePageURL)}optoutSubscriptions(){const e=Pn()+"/"+Nn();this.#ti.Init(this.#gs),this.#ti.show(),this.#js=new To("unsubscribe-overlay-root");const t=this.#js.ui.root,i=document.createElement("div");(this.#Hs||this.#Ws)&&async function({url:e="/bin/kpmg/accounts/unsubscribe",uid:t,locale:i,optout:s,subscriptionId:n="",subscriptionName:o="",token:r=""}){const a=new URL(e,window.location),l=a.searchParams;r?l.append("token",r):l.append("uid",t),l.append("locale",(Array.isArray(i)?i:[i]).join(",")),l.append("unsubscription",(!s).toString()),l.append("optout",s.toString()),s||(r||l.append("subscriptionId",n),l.append("subscriptionName",o));try{return await bc({url:a.toString()})}catch(e){throw e}}({uid:this.#Hs,locale:e,optout:this.#zs.checked,subscriptionId:this.#Gs,subscriptionName:this.#Js,token:this.#Ws}).then((e=>{if(this.#ti.hide(),200===e.responseCode){if(this.#js.ui?.root?.classList?.contains("unsubscribe-overlay-root")){const e=this.#gs.dataset.successmessage?.length?this.#gs.dataset.successmessage:"Successfully optout from the request!!";i.innerHTML=`<p>${e}</p>`,t.querySelector(".people-contact-modal__content").prepend(i);const s=this.#gs.dataset.closemessage?.length?this.#gs.dataset.closemessage:"Close";t.querySelector(".btn-close").innerHTML=s,t.querySelector(".btn-close").addEventListener("click",(()=>{pn.navigateToURL(fl.HomePageURL)})),this.#js.showModal(),this.#Ys&&fl.getAccountInfo(),t.querySelector(".btn-close").focus()}}else{const e=this.#gs.dataset.errormessage?.length?this.#gs.dataset.errormessage:"Server Error!! Please try again later";i.innerHTML=`<p>${e}</p>`,t.querySelector(".people-contact-modal__content").prepend(i),this.#js.showModal(),t.querySelector(".btn-close").focus()}})).catch((()=>{this.#ti.hide();const e=this.#gs.dataset.errormessage?.length?this.#gs.dataset.errormessage:"Server Error!! Please try again later";i.innerHTML=`<p>${e}</p>`,t.querySelector(".people-contact-modal__content").prepend(i),this.#js.showModal()}))}}yt(Mc,{selectors:{self:".cmp-ppc-unsubscribe"}});class Fc extends ho{constructor(e){super("cmn-msg-overlay-"+ ++Fc.InstanceId),this.ui.root.classList.add("cmn-msg-overlay"),this._attachAdditionalEvents(),this.elementId=e}_newModalUI(e){const t=document.createElement("div"),i=document.createElement("div");return t.className="people-contact-modal profile-modal",t.setAttribute("aria-hidden","true"),t.setAttribute("aria-modal","true"),t.setAttribute("role","dialog"),t.setAttribute("id",e),i.className="people-contact-modal__content",this.ui.closeBtn=this._newCloseButtonUI(i),this.contentBlock=document.createElement("div"),i.appendChild(this.contentBlock),t.appendChild(i),t}_cloneContentFromElement(){const e=document.querySelector(`#${this.elementId}`),t=document.createElement("div");t.className="profile-modal section text";const i=e.querySelector(".warning-overlay-msg .cmp-text");if(i){const e=i.cloneNode(!0);t.appendChild(e)}const s=e.querySelector(".warning-overlay-msg .text");if(s){const e=s.dataset.buttonTextContinue,i=s.dataset.buttonTextCancel;this.ui.cancelBtn=this._newCancelButtonUI(e),this.ui.continueBtn=this._newContinuteButtonUI(i);const n=document.createElement("div");n.className="section",n.appendChild(this.ui.cancelBtn),n.appendChild(this.ui.continueBtn),t.appendChild(n)}return t}showModal(e){this.contentBlock.innerHTML="";const t=this._cloneContentFromElement();this.contentBlock.appendChild(t),super.showModal(e),this.addDiscardHandlers()}_newCloseButtonUI(e){const t=document.createElement("div");t.className="section btn-right";const i=document.createElement("span");return i.className="profile-modal__close-btn material-icons-outlined",i.textContent="close",t.appendChild(i),e.appendChild(t),t}_newContentBlockUI(e){const t=document.createElement("div");t.className="profile-modal section text";const i=e.querySelector(".warning-overlay-msg .cmp-text").cloneNode(!0);return t.appendChild(i),t}_newCancelButtonUI(e){const t=document.createElement("button");return t.className="btn btn-continue",t.append(e),t}_newContinuteButtonUI(e){const t=document.createElement("button");return t.className="btn btn-cancel",t.append(e),t}_attachAdditionalEvents(){this._continueBtnClick=this._continueBtnClick.bind(this),this._cancelBtnClick=this._cancelBtnClick.bind(this)}_continueBtnClick(){this.hideModal("cancel"),this.ui.root.dispatchEvent(new CustomEvent("custom-event-cancel-redirect"))}_cancelBtnClick(){this.hideModal("continue"),this.ui.root.dispatchEvent(new CustomEvent("custom-event-continue-redirect"))}addDiscardHandlers(){this.ui.continueBtn.addEventListener("click",this._continueBtnClick),this.ui.cancelBtn.addEventListener("click",this._cancelBtnClick)}showWarningModal(){this.showModal(),this.addDiscardHandlers()}}const{DOMUtils:qc,FormUtils:xc}=yn;class Vc{#Xs;#Qs="basic-information";#se={};#Os={active:"cmp-digital-form__ppcProfile--active"};#V={};#Zs={};#en;constructor(e){if(this.#Xs=`PPC Profile: ${this.constructor.name}`,!e.parent)throw new Error(`${this.#Xs} requires a parent element`);if(!e.xf)throw new Error(`${this.#Xs} requires an XF element`);if(!e.state)throw new Error(`${this.#Xs} requires a state object`);if(!e.loading)throw new Error(`${this.#Xs} requires a loading object`);if(!e.ppcForms)throw new Error(`${this.#Xs} requires a ppcForms object`);this.#tn(e)}async#tn(e={}){this.#se.parent=e.parent,this.#se.form=await e.xf.querySelector(`#${this.#Qs}`),this.#V=Object.assign({},e.state),this.#Zs=e.ppcForms[this.#Qs],this.#en=e.gigya,this.#se.form?this.populateContent(this.#V.savedData):console.error(`${this.#Xs} could not find the form element in the XF for: ${this.#Qs}`),this.show()}show=()=>{null!==this.#se.form&&qc.addClass({element:this.#se.form,className:this.#Os.active})};hide=()=>{null!==this.#se.form&&qc.removeClass({element:this.#se.form,className:this.#Os.active})};populateContent(e){xc.fillFormFields(e,this.#se.form)}}const{DOMUtils:$c,FormUtils:Bc}=yn;class Gc{#Xs;#Qs="professional-information";#se={};#Os={active:"cmp-digital-form__ppcProfile--active"};#V={};constructor(e={}){if(this.#Xs=`PPC Profile: ${this.constructor.name}`,!e.parent)throw new Error(`${this.#Xs} requires a parent element`);if(!e.xf)throw new Error(`${this.#Xs} requires an XF element`);if(!e.state)throw new Error(`${this.#Xs} requires a state object`);if(!e.loading)throw new Error(`${this.#Xs} requires a loading object`);this.#tn(e)}async#tn(e={}){this.#se.parent=e.parent,this.#se.form=await e.xf.querySelector(`#${this.#Qs}`),this.#V=Object.assign({},e.state),this.#se.form&&this.populateContent(this.#V.savedData)}show=()=>{null!==this.#se.form&&$c.addClass({element:this.#se.form,className:this.#Os.active})};hide=()=>{null!==this.#se.form&&$c.removeClass({element:this.#se.form,className:this.#Os.active})};populateContent(e){if(Bc.fillFormFields(e,this.#se.form),e.data.organizations?.length>0){let t=this.#se.form.querySelector(".multi-input");if(t.querySelectorAll("input").length<e.data.organizations.length-1){let i=e.data.organizations.length-1;for(let e=0;e<i;e++)document.dispatchEvent(new CustomEvent("custom-field-add"));t.querySelectorAll("input").forEach(((t,i)=>{void 0!==e.data.organizations[i]&&(t.value=e.data.organizations[i])}))}else t.querySelectorAll("input").forEach(((t,i)=>{void 0!==e.data.organizations[i]&&(t.value=e.data.organizations[i])}))}}}const{DOMUtils:Hc,EventUtils:jc}=yn;class Kc{#Qs="change-password";#se={};#ki;#V={};#Os={active:"cmp-digital-form__ppcProfile--active"};get alertDialog(){return this.#se.dialog?._Handler}controller;constructor(e={}){this.#in(e),this.#tn(e)}#in(e){const t=["parent","xf","state","loading"];for(const i of t)if(!e[i])throw new Error(`${this.#Qs} requires a ${i} object`)}async#tn(e){this.#se.parent=e.parent,this.#se.form=await e.xf.querySelector(`#${this.#Qs}`),this.#V={...e.state},this.#ki=e.ppcForms[this.#Qs],this.controller=e.controller,this.#sn()}async#sn(){this.#se.dialog=this.#se.parent.querySelector("#pwdresetprompt1");const e=this.alertDialog;if(!e)return;const t=e.firstElement=e.lastElement=e.UI.CLOSE_BUTTON;e.on("dialog-opened",(()=>e.UI.CLOSE_BUTTON.focus()));const i=await this.#nn();i&&(t.href=i,t.rel="follow")}async#nn(){let e=jc.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS);if(!e)try{await fl.fetchPPCPageUrls(),e=jc.getLocalStorageValue(sl.PPC_USER_NAVIGATION_URLS)}catch{return null}try{const t=JSON.parse(e);return t?.[sl.PPC_PAGE_NAMES.LOGIN]||null}catch{return null}}show=()=>{this.#se.form&&Hc.addClass({element:this.#se.form,className:this.#Os.active})};hide=()=>{this.#se.form&&Hc.removeClass({element:this.#se.form,className:this.#Os.active})};populateContent(e=!1){const{savedData:t}=this.#V;this.#se.form.reset();const i=this.#se.form.querySelector('[type="email"]');i&&(i.setAttribute("disabled",!0),i.value=t.profile.email),e&&this.#on()}#on(){const e=this.#se.form.querySelector(".cmp-form-password__input--primary");setTimeout((()=>Zs.focusInput(e)))}async submit({password:e}){const{form:t}=this.#se,{savedData:i,formStatus:s}=this.#V,n=this.#Qs;if(!s[n].isUpdated||!t)return void this.#ki.SetSubmitButtonState(!0);xl.hideAll();const{data:o,signatureTimestamp:r,UID:a,UIDSignature:l}=i,[c,d]=o.kpmg.registeredLocale.split("/");if(!r||!a||!l)return xl.show({errorcode:"GENERIC",root:t}),void this.#ki.OnSubmitError();this.#ki.showLoadingOverlay(),console.log("resetpassword");try{const t=await al({url:"/bin/kpmg/accounts/resetpassword",body:{signatureTimestamp:r,UID:a,UIDSignature:encodeURIComponent(l),country:c,locale:d,sendEmail:"false",newPassword:e}});0===t.errorCode?(document.dispatchEvent(new CustomEvent("initiate-success-message")),requestAnimationFrame((()=>fl.onLogout(t))),this.alertDialog.open(),this.controller.pushDataLayer("Changepasswordcomplete",0),this.#ki.OnSubmitSuccess(t),this.#ki.hideLoadingOverlay()):this.#rn(t.errorCode||"GENERIC",t)}catch(e){console.error(e),this.#rn("GENERIC",e)}finally{this.#on(),this.#V.formStatus[n].isUpdated=!1}}#rn(e,t){if(this.#an(t))return;const i=this.#se.form;xl.show({errorcode:e,response:t,root:i,form:i}),this.#ki.OnSubmitError(t),this.#ki.hideLoadingOverlay()}#an({errorCode:e}){return e==sl.SAP_ERROR_SESSION_EXPIRED&&(window.gigya?.accounts.logout({callback:()=>{fl.fetchPPCPageUrls().finally((()=>{this.#ki.hideLoadingOverlay(),fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.LOGIN)}))}}),!0)}}const{DOMUtils:zc}=yn;class Wc{#Xs;#Qs="communication-preferences";#se={localeTemplate:null,templateClone:null,localeRoot:null,noItemsContainer:null,localeItemsContainer:null,dialog:null,datalayerRoot:null};get confirmDialog(){return this.#se.dialog._Handler}#Os={active:"cmp-digital-form__ppcProfile--active"};#V={selectedItemCount:0,savedData:null};#ln=null;constructor(e={}){if(this.#Xs=`PPC Profile: ${this.constructor.name}`,!e.parent)throw new Error(`${this.#Xs} requires a parent element`);if(!e.xf)throw new Error(`${this.#Xs} requires an XF element`);if(!e.state)throw new Error(`${this.#Xs} requires a state object`);if(!e.loading)throw new Error(`${this.#Xs} requires a loading object`);this.#tn(e)}async#tn(e={}){this.#se.parent=e.parent,this.#ln=e.ppcForms["communication-preferences"],this.#ln&&(this.#se.form=await(e.xf?.querySelector(`#${this.#Qs}`)),this.#se.localeTemplate=await(e.xf?.querySelector("#cmp-form-ppc-locale-template")),this.#se.templateClone=this.#se.localeTemplate.content.cloneNode(!0),this.#se.localeRoot=await(e.xf?.querySelector(".ppc-locale")),this.#se.noItemsContainer=await(e.xf?.querySelector("#no-communication-items")),this.#se.localeItemsContainer=await(e.xf?.querySelector("#ppc-locale-container")),this.#se.dialog=e.parent.querySelector("#cmp-msg-overlay-communication-preferences"),this.confirmDialog.firstElement=this.confirmDialog.UI.CLOSE_BUTTON[0],this.confirmDialog.lastElement=this.confirmDialog.UI.CLOSE_BUTTON[2],this.confirmDialog.on("dialog-opened",(()=>this.confirmDialog.UI.CLOSE_BUTTON[1]?.focus?.())),this.confirmDialog.on("dialog-closed",(e=>{const t=e.detail?.target?.closest("button")?.value;"yes"===t?this.#cn(e.detail):this.#dn(e.detail)})),this.#se.datalayerRoot=this.#se.parent.querySelector("[data-cmp-ppc-profile-datalayer-comm-pref]"),this.#V=Object.assign({},e.state),this.#se.form&&this.#un())}show=()=>{this.prepareUI(this.#V.savedData),null!==this.#se.form&&zc.addClass({element:this.#se.form,className:this.#Os.active})};hide=()=>{this.#ln&&null!==this.#se.form&&zc.removeClass({element:this.#se.form,className:this.#Os.active})};#un=()=>{this.toggleSubmitButtonState(!1);const e=this.#se.localeTemplate.content.cloneNode(!0);e.querySelectorAll(".cmp-form-ppc-locale__label").forEach((e=>e.remove())),this.#se.localeRoot.appendChild(e)};prepareUI(e){if(!e?.subscriptions)return void this.ToggleView("no-items");this.#se.localeRoot.querySelectorAll(".cmp-form-ppc-locale__label").forEach((e=>e.remove()));let t=0;new Dl(e.subscriptions).Countries.forEach((e=>{e.Locales.forEach((e=>{let i=!1;e.Items.forEach((e=>{"terms"!=e.name&&e.email&&(i=!0)})),i&&this._addNewOption(e.Country,e.LangCode)&&t++}))})),t?this.ToggleView("has-items"):this.ToggleView("no-items")}_addNewOption(e,t){const i=this.#se.templateClone.querySelector(`input[name="${e}_${t}"]`);if(!i)return;const s=i.parentElement.cloneNode(!0);return s.querySelector("input").addEventListener("change",(e=>this._onChange(e))),this.#se.localeRoot?.querySelector("fieldset")?.appendChild(s),!0}ToggleView(e){switch(e){case"no-items":this.#se.noItemsContainer?.removeAttribute("hidden"),this.#se.localeItemsContainer?.setAttribute("hidden",!0);break;case"has-items":this.#se.noItemsContainer?.setAttribute("hidden",!0),this.#se.localeItemsContainer?.removeAttribute("hidden")}}getSelectedItems(){return Array.from(this.#se.localeRoot.querySelectorAll('input[type="checkbox"]:checked')).map((e=>{const[t,i]=e.name.split("_"),s=e.parentElement.querySelector(".cmp-form-options__field-description span")?.textContent;return{country:t,language:i,text:s}}))}clearSelectedItem(){this.#se.localeRoot.querySelectorAll('input[type="checkbox"]:checked').forEach((e=>e.checked=!1)),this.#V.selectedItemCount=0,this.toggleSubmitButtonState(!1)}_onChange(){this.#V.selectedItemCount=this.getSelectedItems().length,this.toggleSubmitButtonState(this.#V.selectedItemCount>0)}toggleSubmitButtonState(e){const t=this.#se.form.querySelector('[type="SUBMIT"]');t&&(t.disabled=!e)}submit(){const e=this.getSelectedItems();e.length&&(this.#hn(e),this.confirmDialog.open())}#hn(e){const t=this.#se.dialog;if(!t||!e.length)return;const i=t.querySelector("ul");if(i){for(;i.firstChild;)i.removeChild(i.lastChild);e.forEach((e=>{const t=document.createElement("li");t.textContent=e.text,i.appendChild(t)}))}}#cn(){try{Ct(this.getDatalayerInfo("Unsubscribe"))}catch(e){console.warn(e)}this.#mn()}#dn(e){try{const t=e?.target?.closest("button")?.value;Ct("no"==t?this.getDatalayerInfo("Cancel"):this.getDatalayerInfo("Close"))}catch(e){console.warn(e)}this.clearSelectedItem()}async#mn(){const e=this.#ln;e.showLoadingOverlay();const t=new Dl(this.#V.savedData.subscriptions).getLocaleJSON(this.getSelectedItems().map((e=>[e.country,e.language])));let i;this.clearSelectedItem();try{i=await async function(e){return bc({url:"/bin/kpmg/accounts/unsubscribeall",body:e})}(JSON.stringify({UID:this.#V.savedData.UID,country:fl.SiteCountryCode,locale:fl.SiteLanguageCode,subscriptions:t}))}catch(t){return e.hideLoadingOverlay(),xl.show({root:this.#se.form,errorcode:getInfoErrorCode??"GENERIC"}),void console.error(`Error code: ${s}`)}const s=i?.errorCode;0==s?fl.getAccountInfo({extraProfileFields:"work, phones",callback:t=>{const i=t?.errorCode;0==i?(this.#V.savedData=t,this.prepareUI(t),xl.ShowInfo({root:this.#se.form,errorcode:i,variant:"success"}),window.scrollTo({top:0,behavior:"smooth"})):(xl.show({root:this.#se.form,errorcode:i??"GENERIC"}),console.error(`Error code: ${i}`)),e.hideLoadingOverlay()}}):(e.hideLoadingOverlay(),xl.show({root:this.#se.form,errorcode:getInfoErrorCode??"GENERIC"}),console.error(`Error code: ${s}`))}getDatalayerInfo(e,t){switch(e){case"Unsubscribe":case"Cancel":case"Close":t={subscriptionUnselected:this.getSelectedItems().map((e=>e.text)).join(",")};default:const i=this.#se.datalayerRoot?.dataset[`datalayer${e}`];if(i)try{const e=JSON.parse(i),s=e.eventInfo?.path?.split(".")[1];if(t&&s&&e.component){const i=e.component[s];e.component[s]={...i,...t}}return e}catch(e){console.warn(e)}return{}}}}const{DOMUtils:Yc}=yn;class Jc{#Xs;#Qs="privacy-preferences";#se={};#Os={active:"cmp-digital-form__ppcProfile--active"};#V={};constructor(e={}){if(this.#Xs=`PPC Profile: ${this.constructor.name}`,!e.parent)throw new Error(`${this.#Xs} requires a parent element`);if(!e.xf)throw new Error(`${this.#Xs} requires an XF element`);if(!e.state)throw new Error(`${this.#Xs} requires a state object`);if(!e.loading)throw new Error(`${this.#Xs} requires a loading object`);this.#tn(e)}async#tn(e={}){this.#se.parent=e.parent;const t=await e.parent.querySelector(`#${this.#Qs}`);this.#se.form=await(e.xf?.querySelector(`#${this.#Qs}`)),this.#se.requestContainer=await t.querySelector("#request-container"),this.#se.requestedContainer=await t.querySelector("#requested-container"),this.#se.downloadContainer=await t.querySelector("#download-container"),this.#se.downloadBtn=await t.querySelector("#download-btn"),this.#V=Object.assign({},e.state),this.#se.form&&this.#un()}show=()=>{null!==this.#se.form&&Yc.addClass({element:this.#se.form,className:this.#Os.active})};hide=()=>{null!==this.#se.form&&Yc.removeClass({element:this.#se.form,className:this.#Os.active})};#un(){const{requestContainer:e,requestedContainer:t,downloadContainer:i,downloadBtn:s}=this.#se,{savedData:n}=this.#V,o=n?.data?.downloadData;if(e.classList.add("hidden"),t.classList.add("hidden"),i.classList.add("hidden"),"REQUESTED"===o?.status)t.classList.remove("hidden");else if("COMPLETED"===o?.status){i.classList.remove("hidden");const e=this.#pn();s.setAttribute("download",o.filename),s.setAttribute("href",e)}o?.status||e.classList.remove("hidden")}#pn(){const{savedData:e}=this.#V,{UID:t,UIDSignature:i,signatureTimestamp:s,data:n}=e,{downloadData:o}=n;return`/userdata/userdataService/download?uid=${t}&uidSignature=${encodeURIComponent(i)}&signatureTimestamp=${s}&locale=${n.kpmg.registeredLocale}&fileName=${o.filename}`}}const{URLUtils:Xc,DOMUtils:Qc}=yn,{instance:Zc}=Xc.getInstance();class ed{#se={};#V={savedData:{},profileData:{},initialLoad:!0,currentFormId:"basic-information",modals:{"basic-information":{isPresent:!1},"professional-information":{isPresent:!1},"change-password":{isPresent:!1},"privacy-preferences":{isPresent:!1},"communication-preferences":{isPresent:!1}},formStatus:{"basic-information":{isUpdated:!1},"professional-information":{isUpdated:!1},"change-password":{isUpdated:!1},"privacy-preferences":{isUpdated:!1},"communication-preferences":{isUpdated:!1}}};#en;#Xs;#fn={basicInformation:null,professionalInformation:null,changePassword:null,communicationPreferences:null,privacyPreferences:null};#j={xf:".cmp-ppc-profile__xf-container",loadingSpinner:".cmp-ppc-profile__loading",navigation:".cmp-ppc-profile__nav",deleteAccountOverlay:".delete-account-overlay",deleteAccountStatus:".account-delete-status"};#gn={};#Os={btnActive:"cmp-ppc-profile__nav-list-item-btn--active"};get#yn(){return this.#se.deleteAccountOverlay._Handler}get#En(){return this.#se.deleteAccountStatus._Handler}constructor({element:e}){this.#Xs=`${this.constructor.name}`,this.#se={parent:e},this.#en=window?.gigya,this.init()}async init(){const{parent:e}=this.#se,t=await e.querySelector(this.#j.xf),i=await e.querySelector(this.#j.loadingSpinner),s=await e.querySelector(this.#j.navigation),n=await e.querySelector(this.#j.deleteAccountOverlay),o=await e.querySelector(this.#j.deleteAccountStatus);this.#se={...this.#se,xf:t,loadingSpinner:i,navigation:s,deleteAccountOverlay:n,deleteAccountStatus:o},this.#vn()||"local"===Zc||await fl.redirectOnUnAuthorisedAccess(sl.PPC_PAGE_NAMES.LOGIN),fl.redirectOnCrossSite(sl.PPC_PAGE_NAMES.PROFILE);const r=await this.#bn();this.#V.savedData=Object.assign({},r),this.#V.profileData=Object.assign({},r.profile),this.#Sn(),this.#Cn(),await this.#In(),this.#_n(),this.#Ae(),this.#Ln("basic-information"),this.#V.initialLoad=!1,setTimeout((()=>{this.deleteAccountContent();const[e,t]=Array.from(this.#se.deleteAccountStatus.querySelectorAll("[data-cmp-dialog-close-button]"));this.#En.firstElement=e,this.#En.lastElement=t,this.#En.on("dialog-opened",(()=>t?.focus())),this.#En.on("dialog-closed",(()=>this.#Tn()))}),20)}deleteAccountContent(){const e=this.#se.parent.querySelector("#privacy-preferences").querySelector(".warning-overlay-msg .text");this.#yn.UI.CLOSE_BUTTON[1].querySelector("span").innerText=e.dataset.buttonTextContinue,this.#yn.UI.CLOSE_BUTTON[2].querySelector("span").innerText=e.dataset.buttonTextCancel,this.#yn.UI.CONTENT_ROOT.querySelector(".cmp-text").innerHTML=e.querySelector(".cmp-text").innerHTML,this.#yn.firstElement=this.#yn.UI.CLOSE_BUTTON[0],this.#yn.lastElement=this.#yn.UI.CLOSE_BUTTON[2],this.#yn.on("dialog-opened",(()=>this.#yn.UI.CLOSE_BUTTON[1]?.focus?.())),this.#yn.on("dialog-closed",(e=>{const t=e.detail?.target?.closest("button")?.value;"yes"===t?(this.deleteAccountStatus(),this.pushDataLayer("Deletemyaccount",{"dc:title":"Delete my account"})):"no"===t?this.pushDataLayer("Deletemyaccount",{"dc:title":"Cancel"}):this.pushDataLayer("Deletemyaccount",{"dc:title":"Close of x button"})}))}async deleteAccountStatus(){const{UID:e,UIDSignature:t,signatureTimestamp:i,data:s}=this.#V.savedData;let n=encodeURIComponent(t);const o=await fetch(`/${s.kpmg.registeredLocale}/home.deleteaccount.json?uid=${e}&UIDSignature=${n}&signatureTimestamp=${i}&locale=${s.kpmg.registeredLocale}`,{method:"POST"});0===(await o.json()).errorCode&&this.#En.open()}#Sn(){const{loadingSpinner:e}=this.#se;e&&this.hideLoading()}showLoading=()=>{this.#se.loadingSpinner.style.display="block"};hideLoading=()=>{this.#se.loadingSpinner.style.display="none"};#Cn(){const e=Array.from(this.#se.navigation.querySelectorAll("button")),t=t=>{const{target:i}=t;e.forEach((e=>{Qc.removeClass({element:e,className:this.#Os.btnActive})}));let s=null;if("SPAN"===i.tagName?s=i.parentElement:"BUTTON"===i.tagName&&(s=i),this.#An(),this.#On(),s){Qc.addClass({element:s,className:this.#Os.btnActive});const{listItemId:e}=s?.dataset??null;switch(this.#V.currentFormId=e,e){case"basic-information":this.#fn.basicInformation.show(),this.pushDataLayer("Profilebasicstart");break;case"professional-information":this.#fn.professionalInformation.show(),this.#Ln("professional-information"),this.pushDataLayer("Professionalinfostart");break;case"change-password":this.#fn.changePassword.populateContent(),this.#fn.changePassword.show(),this.#Ln("change-password"),this.pushDataLayer("Changepasswordstart");break;case"communication-preferences":this.#fn.communicationPreferences.show(),this.#Ln("communication-preferences");break;case"privacy-preferences":this.#fn.privacyPreferences.show(),this.#Ln("privacy-preferences");break;default:console.error(`${this.#Xs}: #initNavigation: Invalid listItemId: ${e}`)}}};e.forEach((e=>{e.addEventListener("click",(async i=>{const{listItemId:s}=e?.dataset??null;if(this.#V.formStatus[this.#V.currentFormId].isUpdated&&s!==this.#V.currentFormId){!0===await this.#wn(this.#V.currentFormId)&&("basic-information"===this.#V.currentFormId&&this.#fn.basicInformation.populateContent(this.#V.savedData),"professional-information"===this.#V.currentFormId&&this.#fn.professionalInformation.populateContent(this.#V.savedData),"change-password"===this.#V.currentFormId&&this.#fn.changePassword.populateContent(),this.#V.formStatus[this.#V.currentFormId].isUpdated=!1,t(i))}else t(i)}))}))}#On(){const{navigation:e}=this.#se;e.querySelectorAll("li").forEach((e=>{e.classList.remove("active")}))}#_n(){const{parent:e,xf:t}=this.#se,i={parent:e,xf:t,state:this.#V,loading:{show:this.showLoading,hide:this.hideLoading},ppcForms:this.#gn,gigya:this.#en,controller:this},s=new Vc(i);setTimeout((()=>this.pushDataLayer("Profilebasicstart")),16);const n=new Gc(i),o=new Kc(i),r=new Wc(i),a=new Jc(i);this.#fn={basicInformation:s,professionalInformation:n,changePassword:o,communicationPreferences:r,privacyPreferences:a}}#An(){Object.keys(this.#fn).forEach((e=>{this.#fn[e]?this.#fn[e].hide():console.error(`${this.#Xs}: #hideAllSections: Section not found: `,e)}))}#Ae(){document.addEventListener("initiate-success-message",(()=>{this.#Pn()})),document.addEventListener("initiate-error-message",(()=>{this.#Nn()}));for(const e in this.#V.formStatus)Object.hasOwnProperty.call(this.#V.formStatus,e)&&this.#Rn(e);this.#Un()}async#In(){const e=await this.#se.parent.querySelectorAll(".cmp-digital-form");Array.from(e).forEach((e=>{this.#gn[e.id]=new $l(e,{CaptchaEnabled:!1,InitConfirmationOverlay:!1,CheckEmail:!1,autoCountrySelection:!1,onSubmit:e=>{this.#kn(e)}})}))}#bn(){return this.#en&&"local"!=Xc.getInstance().instance?new Promise(((e,t)=>{fl.getAccountInfo({extraProfileFields:"work, phones",callback:i=>{i?e(i):t("No response")}})})):new Promise((e=>{e(il)}))}async#Dn(e){const t=this.#gn[this.#V.currentFormId];return t.showLoadingOverlay(),new Promise(((t,i)=>{this.#en.accounts.setAccountInfo({...e,callback:e=>{0===e.errorCode?(document.dispatchEvent(new CustomEvent("initiate-success-message")),this.#en.accounts.getAccountInfo({include:sl.USER_ACCOUNT_INCLUDES.join(","),extraProfileFields:"work, phones",callback:e=>{0==e.errorCode&&(this.#V.savedData=Object.assign({},e),"basic-information"===this.#V.currentFormId&&this.#fn.basicInformation.populateContent(this.#V.savedData),"professional-information"===this.#V.currentFormId&&this.#fn.professionalInformation.populateContent(this.#V.savedData),fl.haveAccountInfo(e),this.#V.formStatus[this.#V.currentFormId].isUpdated=!1),t(e)}})):i(e)}})})).then((e=>(t.OnSubmitSuccess(e),e))).catch((e=>(t.OnSubmitError(e),e))).finally((()=>t.hideLoadingOverlay()))}async#kn(e){const{currentFormId:t}=this.#V;switch(t){case"basic-information":this.#Mn();break;case"professional-information":this.#Fn();break;case"change-password":this.#fn.changePassword.submit(e);break;case"communication-preferences":return this.#fn.communicationPreferences.submit(e);default:console.error(`${this.#Xs}: #handleFormSubmission: Invalid currentFormId: `,t)}}#qn(){const{savedData:e,currentFormId:t}=this.#V,{UID:i,UIDSignature:s,signatureTimestamp:n,data:o}=e,r=this.#se.parent.querySelector(`#${t}`),a=r?.querySelector("#request-container"),l=r?.querySelector("#requested-container"),c=r?.querySelector("#download-container");let d,u=encodeURIComponent(s);const h={data:{downloadData:{status:"REQUESTED",requestTime:(new Date).toISOString()}},callback:e=>{0===e.errorCode?d=!0:console.error(e.error)}};this.#en.accounts.setAccountInfo(h);const m=`/userdata/userdataService/request?uid=${i}&uidSignature=${u}&signatureTimestamp=${n}&locale=${o.kpmg.registeredLocale}`;fetch(m).then((e=>e.json())).then((e=>{200===e.statusCode&&d&&(document.dispatchEvent(new CustomEvent("initiate-success-message")),a.classList.add("hidden"),c.classList.add("hidden"),l.classList.remove("hidden"))})).catch((e=>{console.error(`Data Request service ${e}`)}))}async#xn(){this.#yn.open({})}#wn(e,t,i){return new Promise((s=>{const n=this.#V.modals[e].instance;n.showWarningModal(),n.on("continue-redirect",(()=>{s(!t||t(i))})),n.on("cancel-redirect",(()=>{s(!1),n.hideModal()}))}))}#vn(){return fl.isLoggedIn()}#Tn(){this.#en.accounts.logout({callback:()=>{fl.redirectToPPCPage(sl.PPC_PAGE_NAMES.HOME)}})}#Mn(){const{currentFormId:e,formStatus:t}=this.#V,i=this.#se.parent.querySelector(`#${e}`);if(t[e].isUpdated){i.checkValidity(),i.reportValidity();const e=yn.FormUtils.buildFormDataForGIGYA(i);this.#Dn(e).then((e=>{0==e.errorCode&&this.pushDataLayer("Profilebasiccomplete",0)}))}}#Fn(){const{currentFormId:e,formStatus:t}=this.#V,i=this.#se.parent.querySelector(`#${e}`);if(t[e].isUpdated){i.checkValidity(),i.reportValidity();const e=yn.FormUtils.buildFormDataForGIGYA(i);i.querySelector(".multi-input").querySelectorAll("input").forEach((t=>{e.data.organizations&&Array.isArray(e.data.organizations)||(e.data.organizations=[]),e.data.organizations.push(t.value)})),this.#Dn(e).then((e=>{0==e.errorCode&&this.pushDataLayer("Professionalinfocomplete",0)}))}}#Ln(e){const{modals:t}=this.#V;t[e].instance||(t[e].instance=new Fc(e))}#Rn(e){const t=this.#se.parent.querySelector(`#${e}`);if(t){if(Qc.addEventForChild(t,"click",".cmp-form-text__button-remove",(()=>this.#V.formStatus[e].isUpdated=!0)),t.addEventListener("change",(t=>{const i=t.target?.form;i&&i.id==e&&(this.#V.formStatus[e].isUpdated=!0)})),"privacy-preferences"===e){const e=t.querySelector("#request-btn"),i=t.querySelector("#delete-btn");e.addEventListener("click",(()=>{this.#qn()})),i.addEventListener("click",(()=>{this.#xn()}))}}else console.warn("form not found:",e)}#Un(){document.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const{currentFormId:i}=this.#V;this.#V.formStatus[i].isUpdated?this.#wn(i,zn,e.href):zn(e.href)}))}))}#Pn(){const e=this.#se.parent.querySelector(`#${this.#V.currentFormId}`);let t;!!e.parentNode.querySelector(".form-result-container .cmp-title__paragraph")&&(t=e.parentNode.querySelector(".form-result-container .cmp-title__paragraph").textContent.trim(),document.querySelector(".success-message-container").classList.add("active"),document.querySelector(".success-message-text").textContent=t,document.querySelector(".close-success-container").addEventListener("click",(()=>{document.querySelector(".success-message-container").classList.remove("active")})))}#Nn(){const e=this.#se.parent.querySelector(`#${this.#V.currentFormId}`);let t;!!e.querySelector(".submit-error-message .text-msg .cmp-text")&&(t=e.querySelector(".submit-error-message .text-msg .cmp-text").textContent.trim(),document.querySelector(".error-message-container").classList.add("active"),document.querySelector(".error-message-text").textContent=t,document.querySelector(".close-error-container").addEventListener("click",(()=>{document.querySelector(".error-message-container").classList.remove("active")})))}pushDataLayer(e,t={formInfo:{formReferrer:document.referrer,formStep:1}}){return Ct(this.getDatalayerInfo(e,t))}getDatalayerInfo(e,t){const i=this.#se.parent?.dataset[`datalayer${e}`];if(!i)return{};try{const e=JSON.parse(i);return this.#Vn(e,t),e}catch(e){return console.warn("Error parsing JSON data: ",e),{}}}#Vn(e,t){const i=e.eventInfo?.path?.split(".")[1];if(t&&i&&e.component){const s=e.component[i];e.component[i]={...s,...t}}}}("local"===Zc||wn())&&yt(ed,{selectors:{self:".cmp-ppc-profile"}});const{DeviceUtils:td,DebugUtils:id,URLUtils:sd}=yn;!function(){const e=new td,t=new id({flag:"platform"}),i="aemshell"===sd.getURL().searchParams.appId;t.log("PlatformDetector",{device:e,isAEMShell:i})}();const{FormUtils:nd}=yn;class od{static SELECTORS={ROOT:'form.cmp-digital-form[data-form-type="fgeForm"]',SUBMIT_BTN:'[type="submit"]'};UI={};Form;PPCForm;constructor(e){this.Form=e.element,this.cacheUIElements(e),this.PPCForm=new $l(e.element,{onSubmit:(...e)=>this.#$n(...e),InitConfirmationOverlay:!1,CaptchaEnabled:!1}),this.Form._Handler=this}#$n(...e){this.onSubmitSuccess(...e)}get customFields(){return sl.CUSTOM_FORM_FIELD_NAMES.map((e=>this.Form.querySelector(`[name="${e}"]`))).filter((e=>null!=e))}get hasCustomFields(){return this.customFields.length>0}cacheUIElements({element:e}){const t=od.SELECTORS;this.UI.ROOT=e;for(const e in t)if("ROOT"!=e&&Object.hasOwnProperty.call(t,e)){const i=this.UI.ROOT.querySelectorAll(t[e]);i.length?this.UI[e]=1==i.length?i[0]:i:this.UI[e]=null}}fillValues(e,t=!0){const i=nd.fillFormFields(e,this.Form);if(e.data.organizations?.length>0){let t=this.Form.querySelector(".multi-input"),i=t?.querySelectorAll("input").length;if(i&&"data.organizations"==t.querySelectorAll("input")[0].name)if(i<e.data.organizations.length){let i=e.data.organizations.length-1;for(let e=0;e<i;e++)document.dispatchEvent(new CustomEvent("custom-field-add"));t.querySelectorAll("input").forEach(((t,i)=>{void 0!==e.data.organizations[i]&&(t.value=e.data.organizations[i],t.disabled=!0)}))}else t.querySelectorAll("input").forEach(((t,i)=>{void 0!==e.data.organizations[i]&&(t.value=e.data.organizations[i],t.disabled=!0)}))}return t&&i.filter((e=>""!=e.value)).forEach((e=>e.disabled=!0)),i}reset(){xl.hideAll(),this.Form.reset()}getRequiredFieldNames(){return Array.from(this.Form.querySelectorAll("[required]")).map((e=>e.name))}getFieldNames(){const e=this.PPCForm.formFields.map((e=>e.name));return[...new Set(e)]}prepare(e,t=!0){return this.reset(),this.fillValues(e,t),setTimeout((()=>this.focusFirstElement()),100),!0}onSubmitError(e){xl.show({errorcode:e?.errorCode??"GENERIC",form:this.Form}),this.PPCForm.OnSubmitError(e)}focusFirstElement(){let e=nd.getFirstEmptyField(this.Form);e&&nd.focusInput(e)}onSubmitSuccess(e){xl.hideAll(this.Form),this.PPCForm.OnSubmitSuccess(e)}}yt(od,{selectors:{self:od.SELECTORS.ROOT}});const rd=(()=>{const e=new Map,t=new Map,i=new Map;let s=!1,n=null,o=!0,r=[],a=new Map;async function l(n,l,c,d){if(s)c();else if(r.push({resolve:c,reject:d}),o){o=!1;try{const o=await al({url:"/bin/kpmg/accounts/promo/subscriptionlist",body:{...l,uniqueIdentifier:n}});if(s=!0,0!==o.errorCode)throw new Error("Invalid response data");o.contentList.forEach((s=>{const{formCategory:n,uniqueIdentifier:o,gatedContentAssetType:r,gatedContentAsset:l,isSubscribed:c,fgeGroupId:d,videos:u}=s;e.set(o,s),c&&(d&&a.set(d,s),"GC"===n&&(["VIDEO","VIDEO_GALLERY"].includes(r)?u?.forEach((e=>t.set(e.id,e))):"PDF"===r&&i.set(o,s)))})),r.forEach((({resolve:e})=>e(o)))}catch(e){r.forEach((({reject:t})=>t(e)))}finally{r=[]}}}return{fetchSubscriptionList:async function(){const t=Array.from(document.querySelectorAll("[data-cmp-fgepromo] .cmp-fgepromo")).map((e=>e.dataset.uniqueIdentifier)).filter((t=>!!t&&!e.has(t)));return 0===t.length?Promise.resolve():new Promise(((e,i)=>{l(t.join(","),n,e,i)}))},getVideoDetails:(i,s)=>!0===e.get(i)?.isSubscribed&&t.get(s),getPDFDetails:e=>i.get(e),isSubscribed:t=>!0===e.get(t)?.isSubscribed,getUIDDetails:t=>e.get(t),isGroupSubscribed:e=>a.has(e),sendFeedGetAssetInfo:async function(s){let o;const{uniqueIdentifier:r="",gatedContentAssetType:l,formCategory:c,fgeGroupId:d}=s.customPreferencesData;try{o=await Sc(JSON.stringify({...n,uniqueIdentifier:r,...s}));const{errorCode:u,auditToken:h,videos:m}=o;0==u&&(d&&a.set(d,o),"GC"===c&&(["VIDEO","VIDEO_GALLERY"].includes(l)?(e.set(r,{isSubscribed:!0,videos:m}),m.forEach((e=>t.set(e.id,e)))):"PDF"===l&&(e.set(r,{isSubscribed:!0,auditToken:h}),i.set(r,{auditToken:h}))),"ER"===c&&e.set(r,{isSubscribed:!0}))}catch(e){throw e}return o},onLogin:(e,t,i)=>{const{UID:s,signatureTimestamp:o,UIDSignature:r}=e;n={UID:s,signatureTimestamp:o,UIDSignature:encodeURIComponent(r),locale:i,country:t}},get isFetched(){return s}}})();var ad=rd;const{DebugUtils:ld}=yn,cd={ROOT:".cmp-fgepromo",OTP_FORM:`.cmp-fgepromo__xf ${Zl.SELECTORS.ROOT}`,FGE_FORM:`.cmp-fgepromo__xf ${od.SELECTORS.ROOT}`,OVERLAY_DIALOG_ROOT:"#cmp-custom-dialog--otp-login",CONFIRM_DIALOG_ROOT:"#cmp-custom-dialog--confirm",FGE_CONTAINER:".fgecontainer"},dd=new ld({constructorName:"fgepromo-auth",origin:"fgepromo-auth"});class ud{#Bn=new ri;#Gn;#Hn;get Events(){return this.#Bn}UI={};static AUTH_EVENTS={ONLOAD_LOGIN:"already-logged-in",LOGGED_IN:"otp-login-success",LOGIN_WITH_REGISTER:"new-user-logged-in",LOGIN_WITH_UPDATEDINFO:"new-login-updated-info",FGE_FORM_SHOW:"fge-form-show",ACCOUNT_INFO_UPDATING:"before-setAccountInfo"};get fgeContainerId(){return this.UI.FGE_CONTAINER?.querySelector("[data-fgegroupid]").dataset.fgegroupid}#jn=!1;get IsLoggedIn(){return fl.isLoggedIn()}get FGE_FORM(){return this.UI.FGE_FORM._Handler}#Kn=new El;get OTP_FORM(){return this.UI.OTP_FORM._Handler}#is;get Overaly(){return this.#is}get Loading(){return this.#Kn}#zn=null;#Wn=!1;get wasAlreadyLoggedIn(){return this.#Wn}#xi=!0;#Yn=!1;#Jn=!1;#V={Country:"",Locale:"",fgeType:"FS",assetType:"",initHeaderOnLogin:!0,RESPONSE:{GEN_OTP:null,SUBMIT_OTP:null,SET_ACCOUNTINFO:null},fgeId:"",WasOTPLoginSuccess:!1,CurrentShownForm:"otp"};get OTPLoginResponse(){return{...this.#V.RESPONSE.SUBMIT_OTP}}get GenOTPResponse(){return{...this.#V.RESPONSE.GEN_OTP}}constructor({rootElement:e,siteCountry:t,siteLocale:i,InitHeaderOnLogin:s=!0,FormTypeValue:n="FS",assetType:o="",FGEId:r,handlerInstance:a,datalayerInstance:l}={}){this.#V.Country=t,this.#V.Locale=i,this.#V.ROOT_ELEMENT=e,this.#V.initHeaderOnLogin=!!s,this.#V.fgeType=n,this.#V.assetType=o,this.#V.fgeId=r,this.#Gn=a,this.#Hn=l,this.#tn(e),this.#V.fgeId=r}async#tn(e){if(this.#Xn(e),this.#Kn.Init(e),this.#Qn(),this.UI.OTP_FORM?.addEventListener("form-submit-success",(({detail:{success:e}})=>this.haveLoginResponse(e))),this.UI.OTP_FORM?.addEventListener("form-submit-error",(({detail:{error:e}})=>this.haveLoginResponse(e))),this.UI.FGE_FORM?.addEventListener("form-submit-success",(({detail:{success:e}})=>this.#Zn(e))),this.UI.FGE_FORM?.addEventListener("focus-invalid-elements",(e=>this.#eo(e))),fl.on(sl.SESSION_VALID_EVENT_NAME,((...e)=>this.#to(...e))),this.OTP_FORM.Events.onAsync("regen-otp-success",(e=>this.#io(e))),this.OTP_FORM.Events.onAsync("regen-otp-error",(e=>this.#so(e))),"GC"==this.#V.fgeType&&"videoGallery"==this.#V.assetType){const e=this.#Hn.getDatalayerInfo,t=()=>this.#Gn.assetTitle;this.#Hn.getDatalayerInfo=function(i,s,...n){const o=s?{...s}:{};return o.assetTitle=t(),e.call(this,i,o??s,...n)}}}#Qn(){document.body.appendChild(this.UI.OVERLAY_DIALOG_ROOT),document.body.appendChild(this.UI.CONFIRM_DIALOG_ROOT),this.#is=new er(this.UI.OVERLAY_DIALOG_ROOT,this.UI.CONFIRM_DIALOG_ROOT,"sp-overlay-dailog");const e=this.#is.confirm.UI.ROOT.querySelector(".confirm-dialog-content"),t=this.#is.dialog.UI.ROOT.querySelector("form .warning-overlay-msg .text");if(t){e.appendChild(t.querySelector(".cmp-text").cloneNode(!0));const[i,s]=Array.from(this.#is.confirm.UI.ROOT.querySelectorAll("button[value]"));i&&(i.textContent=t.dataset.buttonTextContinue),s&&(s.textContent=t.dataset.buttonTextCancel)}this.#is.dialog.on("dialog-opening",(()=>this.#no())),this.#is.dialog.on("dialog-closing",(e=>this.#oo(e))),this.#is.dialog.on("dialog-closed",(e=>this.#ro(e)))}#Xn(e){this.UI.ROOT=e;for(const e in cd)Object.hasOwnProperty.call(cd,e)&&"ROOT"!=e&&(this.UI[e]=this.UI.ROOT.querySelector(cd[e]));this.UI.FGE_CONTAINER=e.parentElement.closest(cd.FGE_CONTAINER)}#ao(e){this.showForm("otp");const t=e?.errorCode??"GENERIC";xl.show({errorcode:t,response:e,root:this.OTP_FORM.PPCForm.form})}#lo(e){this.showForm("fge");const t=e?.errorCode??"GENERIC";xl.show({errorcode:t,response:e,root:this.FGE_FORM.Form})}#to(e){ad.onLogin(e,this.#V.Country,this.#V.Locale),this.#Yn||this.#Jn||(this.#Wn=!0,this.#Yn=!0,this.#V.RESPONSE.SUBMIT_OTP=e,this.#co(ud.AUTH_EVENTS.ONLOAD_LOGIN,e,!1,this.FGE_FORM?.hasCustomFields))}async haveLoginResponse(e){"object"!=typeof e&&this.#Hn.push(this.#Hn.getDatalayerInfo("otpError",{formInfo:{formError:"network error"}}));const t=e?.errorCode;if(!rl(e)||0!=t&&t!=sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION)return void this.#Hn.push(this.#Hn.getDatalayerInfo("otpError",{formInfo:{formError:e?.errorDetails||e?.errorMessage}}));ad.isFetched||0!=t||(ad.onLogin(e,this.#V.Country,this.#V.Locale),await ad.fetchSubscriptionList()),0==t&&(this.#V.WasOTPLoginSuccess=!0);const i=t==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION;this.#V.RESPONSE.SUBMIT_OTP=e;const s=ad.isSubscribed(this.#V.fgeId),n=ad.isGroupSubscribed(this.fgeContainerId),o=this.isInfoNeeded(e)&&!n,{UID:r}=this.#V.RESPONSE.SUBMIT_OTP;if(i?this.#Hn.push(this.#Hn.getDatalayerInfo("submitOtp",{registrationStatus:"OTP is validated",gigyaId:r})):this.#V.WasOTPLoginSuccess&&this.#Hn.push(this.#Hn.getDatalayerInfo("submitOtp",{registrationStatus:s?"account exists validated":"account exists not registered",gigyaId:r})),o&&!s)return this.FGE_FORM.prepare(e),this.wasAlreadyLoggedIn&&this.#is.dialog.open({data:e}),this.showForm("fge"),void this.#co(ud.AUTH_EVENTS.FGE_FORM_SHOW,e,i,this.FGE_FORM.hasCustomFields);0==t&&(this.#Jn=!1,this.#is.CloseConfirmed=!0,this.#is.dialog.close("success"),this.#co(ud.AUTH_EVENTS.LOGGED_IN,e,i,this.FGE_FORM.hasCustomFields))}#do(e){let t,i=e.closest("fieldset");if(i){let e=i.querySelector("legend");e&&(t=e)}else{let i=e.previousElementSibling;i&&(t=i)}if(t){let e=t.cloneNode(!0);e.querySelectorAll("sup,.cmp-digital-form__mandatory--icon").forEach((e=>e.remove())),t=e.innerText.trim()}return t}async#Zn(e){this.FGE_FORM.PPCForm.showLoadingOverlay();const t=this.#V.RESPONSE.SUBMIT_OTP?.errorCode;let i=t==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION,s=[],n=[];const o=this.FGE_FORM.Form;let r={};for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];if(void 0===(a=i)||null==a||""==a)continue;if(sl.CUSTOM_FORM_FIELD_NAMES.indexOf(t)>-1){const e=this.#do(this.UI.FGE_FORM.querySelector(`[name="${t}"]`));n.push({name:t,value:e+":"+i})}else s.push({name:t,value:i})}var a;if(s.length){const t=new Nl(fl.CountryCode,fl.LanguageCode);r={...r,...t.build(e,o)}}const l={formData:s,customFieldData:n,accountInfo:r};this.#co(ud.AUTH_EVENTS.ACCOUNT_INFO_UPDATING,l,i,this.FGE_FORM?.hasCustomFields);const c=!this.#Wn&&i;let d,u;if(this.#Yn=c,i||s.length>0){i&&(l.accountInfo.data||(l.accountInfo.data={}),l.accountInfo.data.enableOtpLogin=!0);try{const{regToken:e,UID:t}=this.#V.RESPONSE.SUBMIT_OTP;d=c?await fl.doSocialRegistration({...l.accountInfo,regToken:e,UID:t,isRegistered:!0},this.#xi):await fl.setAccountInfo(l.accountInfo)}catch(e){u=e,this.#lo(e)}if(0!=d.errorCode){if(this.FGE_FORM.PPCForm.hideLoadingOverlay(),!u&&this.#lo(d),u)throw u;return}}if(!ad.isSubscribed(this.#V.fgeId))try{await ad.sendFeedGetAssetInfo(this.#Gn.getAuditEntry())}catch{}this.#Hn.push(this.#Hn.getDatalayerInfo("fgeNewSubscription",{registrationStatus:i?"New User registered":"account exists registered"})),this.#Jn=!1;const h=c?ud.AUTH_EVENTS.LOGIN_WITH_REGISTER:ud.AUTH_EVENTS.LOGIN_WITH_UPDATEDINFO;this.#co(h,d,i,this.FGE_FORM?.hasCustomFields),this.#is.CloseConfirmed=!0,this.#is.dialog.close("success"),this.FGE_FORM.PPCForm.hideLoadingOverlay()}isInfoNeeded(e){const t=e?.errorCode==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION,i=this.FGE_FORM.getRequiredFieldNames();return ud.isMissingFieldValue(e,i)||t||this.FGE_FORM?.hasCustomFields}#co(e,...t){try{this.#Bn.dispatch(e,...t)}catch{}}showForm(e){let t,i=this.#is.dialog.UI.CLOSE_BUTTON;this.UI.OVERLAY_DIALOG_ROOT.querySelector(".cmp-custom-dialog__content-container")?.classList.remove("otp-overlay-view"),"otp"==e?(this.#V.CurrentShownForm=e,this.UI.OVERLAY_DIALOG_ROOT.querySelector(".cmp-custom-dialog__content-container")?.classList.add("otp-overlay-view"),this.UI.OTP_FORM.classList.remove("hide"),this.UI.FGE_FORM.classList.add("hide"),t=this.UI.OTP_FORM._Handler.UI.RESEND_CODE_BTN):"fge"==e&&(this.#V.CurrentShownForm=e,this.UI.FGE_FORM.classList.remove("hide"),this.UI.OTP_FORM.classList.add("hide"),t=this.UI.FGE_FORM._Handler.UI.SUBMIT_BTN),this.#is.dialog.firstElement=i,this.#is.dialog.lastElement=t}onGenOTPError(){}#io(e){rl(e)&&0==e.errorCode?this.#Hn.push(this.#Hn.getDatalayerInfo("resendOtp")):this.#so(e)}#so(e){this.#Hn.push(this.#Hn.getDatalayerInfo("otpError",{formInfo:{formError:e?.errorDetails||e?.errorMessage||"network error"}}))}static isMissingFieldValue(e,t=[]){for(let i=0;i<t.length;i++){const s=t[i];if(null==Ms(e,s)||""==Ms(e,s))return!0}return!1}Log(...e){dd.log(...e)}async onCTAClick(e,t){let i,s;this.#Hn.push(this.#Hn.getDatalayerInfo("start")),this.#Jn=!0,this.#V.WasOTPLoginSuccess=!1,this.#Kn.show();try{i=await this.OTP_FORM.GenerateOTP(e,this.#V.Country,this.#V.Locale);const s=this.#Gn.UI.EMAIL_FIELD;switch(i.errorCode){case 0:this.onGenerateOTPSuccess(i,t);break;case 603041:ud.reportErrorOnEmail(s,"cmpDisabledAccountMessage");break;case 600003:ud.reportErrorOnEmail(s,"cmpConstraintMessage");break;default:this.onGenerateOTPError(i,t)}}catch(e){s=e,this.onGenerateOTPError(e,t)}finally{this.#Kn.hide()}if((s||rl(i)&&0!=i.errorCode)&&this.#Hn.push(this.#Hn.getDatalayerInfo("otpError",{formInfo:{formError:i?.errorDetails||i?.errorMessage||"network error"}})),s)throw s;return i}static reportErrorOnEmail(e,t){let i=this.getErrorMessage(e,t);eo.Show(e,i||"",e.parentElement),e.reportValidity()}static getErrorMessage(e,t){let i=e?.parentElement?.dataset?.[t];return i||""}onGenerateOTPSuccess(e,t){this.#V.RESPONSE.GEN_OTP=e,this.#is.dialog.open({data:e,focusBackToElement:t}),this.OTP_FORM.otpField.focusFirstElement()}onGenerateOTPError(e,t){this.#V.RESPONSE.GEN_OTP=e,this.#is.dialog.open({data:e,focusBackToElement:t}),this.OTP_FORM.otpField.focusFirstElement(),this.OTP_FORM._otpResponseError(e)}#no(){this.Log(`_onDialogBeforeOpen|GEN_OTP=${!!this.#V.RESPONSE.GEN_OTP}`),this.UI.OTP_FORM?.reset(),this.#V.RESPONSE.GEN_OTP?this.showForm("otp"):this.showForm("fge")}#oo(e){"fge"==this.#V.CurrentShownForm&&this.#V.WasOTPLoginSuccess&&this.#Jn&&this.#co(ud.AUTH_EVENTS.ONLOAD_LOGIN,fl.getStoredInfoIfActive(),!1,this.FGE_FORM?.hasCustomFields)}#ro(e){"success"!=e?.detail&&("otp"==this.#V.CurrentShownForm?this.#Hn.push(this.#Hn.getDatalayerInfo("closeOverlayOtp")):this.#Hn.push(this.#Hn.getDatalayerInfo("closeOverlayFge")))}#eo(){const e=this.#Hn,{empty:t,error:i}=e.getFormErrorFields(this.UI.FGE_FORM);(t.length||i.length)&&e.push(e.getDatalayerInfo("fgeError",{formInfo:{formError:`${t.join(",")}|${i.join(",")}`}}))}}var hd=ud;const md={ROOT:"[data-cmp-fgepromo]",COMPONENT:".cmp-fgepromo-FS",EMAIL_FORM:"form",EMAIL_FIELD:"input[type=email]",SUBSCRIBE_CTA:"[type=submit]",SUCCES_DIV:".cmp-fgepromo__success-wrapper",XF:".cmp-fgepromo__xf",OTP_FORM:`.cmp-fgepromo__xf ${Zl.SELECTORS.ROOT}`,FGE_FORM:`.cmp-fgepromo__xf ${od.SELECTORS.ROOT}`,OVERLAY_DIALOG_ROOT:"#cmp-custom-dialog--otp-login",CONFIRM_DIALOG_ROOT:"#cmp-custom-dialog--confirm",FGE_CONTAINER:".fgecontainer"},pd="cmp-fgepromo__loggedin",fd="cmp-fgepromo__subscribed",gd="cmp-fgepromo__already-subscribed",yd="cmp-fgepromo__not-allowed",Ed="default",vd="loggedin",bd="susbcribed",Sd="already-subscribed",Cd="not-allowed",{DOMUtils:Id,DebugUtils:_d,URLUtils:Ld}=yn,Td=new _d({constructorName:"fgepromo-FS",origin:"fgepromo-FS"});class Ad{UI={};get FGE_FORM(){return this.UI.FGE_FORM._Handler}get OTP_FORM(){return this.UI.OTP_FORM._Handler}get fgeContainerId(){return this.UI.FGE_CONTAINER?.querySelector("[data-fgegroupid]").dataset.fgegroupid}EMAIL_FORM=null;#Kn=new El;#is;get IsLoggedIn(){return fl.isLoggedIn()}#uo=!1;UserSubscriptions;CurrentSubsriptionItem={locale:"",gigyaMapping:"",tag:""};#xi=!0;#Yn=!1;constructor(e){this.init(e),this.ToggleView(Ed),this.UI.OTP_FORM.dataset.datalayerformType="Fast Subscription"}Log(...e){Td.log(this.UI.COMPONENT.id,...e)}init(e){if(this.#ss(e),this.UI.COMPONENT.classList.contains("unavailable"))return;const{subscriptionId:t,subscriptionLocale:i,tag:s}=this.UI.COMPONENT.dataset;this.CurrentSubsriptionItem.gigyaMapping=t,this.CurrentSubsriptionItem.locale=i,this.CurrentSubsriptionItem.tag=s,this.EMAIL_FORM=new $l(this.UI.EMAIL_FORM,{onSubmit:(...e)=>this.onSubscribeClick(...e)}),this.initDialog(),this.UI.OTP_FORM.addEventListener("form-submit-success",(({detail:{success:e}})=>this.haveLoginResponse(e))),this.UI.OTP_FORM.addEventListener("form-submit-error",(({detail:{error:e}})=>this.haveLoginResponse(e))),this.UI.FGE_FORM.addEventListener("form-submit-success",(({detail:{success:e}})=>this.haveFGEFormInfo(e))),this.initListeners(),this.#Kn.Init(this.UI.ROOT)}initDialog(){document.body.appendChild(this.UI.OVERLAY_DIALOG_ROOT),document.body.appendChild(this.UI.CONFIRM_DIALOG_ROOT),this.#is=new er(this.UI.OVERLAY_DIALOG_ROOT,this.UI.CONFIRM_DIALOG_ROOT,"sp-overlay-dailog");const e=this.#is.confirm.UI.ROOT.querySelector(".confirm-dialog-content"),t=this.#is.dialog.UI.ROOT.querySelector("form .warning-overlay-msg .text");e.appendChild(t.querySelector(".cmp-text").cloneNode(!0));const[i,s]=Array.from(this.#is.confirm.UI.ROOT.querySelectorAll("button[value]"));i&&(i.textContent=t.dataset.buttonTextContinue),s&&(s.textContent=t.dataset.buttonTextCancel),this.UI.XF.removeAttribute("hidden"),this.#is.dialog.on("dialog-opening",(()=>this._onDialogBeforeOpen())),this.#is.dialog.on("dialog-closed",(e=>{if("success"!=e?.detail){const e=this.getDatalayerInfo("otpFormClosed");if(this.UI.OTP_FORM.classList.contains("hide")&&e){const t=It(e);e&&t?.["xdm:linkURL"]&&(t["xdm:linkURL"]=t["xdm:linkURL"].replace(/2/g,"3"))}e.component["otpform-"].formType="Fast Subscription",Ct(e)}}))}initListeners(){fl.on(sl.SESSION_VALID_EVENT_NAME,((...e)=>this.onloadLogin(...e)))}#ss({element:e}){this.UI.ROOT=e.parentElement.closest(md.ROOT);for(const e in md)Object.hasOwnProperty.call(md,e)&&"ROOT"!=e&&(this.UI[e]=this.UI.ROOT.querySelector(md[e]));this.UI.FGE_CONTAINER=e.parentElement.closest(md.FGE_CONTAINER)}onloadLogin(e){this.Log("onloadLogin","IgnoreOnloadLoginCB",this.#Yn,"response",e),this.#Yn||(this.#uo=!0,this.UserSubscriptions=new Dl(e?.subscriptions),this.IsCrossCountry()?this.ToggleView(Cd):this.isAlreadySubscribed()?this.ToggleView(Sd):(this.UI.EMAIL_FIELD.value=e.profile.email,this.ToggleView(vd)))}IsCrossCountry(){if(fl.CountryCode){const[e]=this.CurrentSubsriptionItem.locale.split("_");if(e!==fl.CountryCode)return!0}return!1}onSubscribeClick(){let e;this.Log("onSubscribeClick","logged-in",this.IsLoggedIn);const t=this.getDatalayerInfo("fastSubscriptionStart");this.IsLoggedIn&&t?.component?.["fastsubscription-"]&&(e=fl.getStoredInfoIfActive(),t.component["fastsubscription-"].gigyaId=e.UID),Ct(t);const i=ad.isGroupSubscribed(this.fgeContainerId);!i||this.isAlreadySubscribed()?this.IsLoggedIn&&!i?this.haveLoginResponse(e):(this.#Kn.show(),this.#Yn=!0,this.OTP_FORM.GenerateOTP(this.UI.EMAIL_FIELD.value,fl.CountryCode,fl.LanguageCode).then((e=>this.onGenerateOTPSuccess(e))).catch(((...e)=>{this.onGenerateOTPError(...e)})).finally((()=>this.#Kn.hide()))):this.doSubscribe(null,e)}onGenerateOTPSuccess(e){const t=this.UI.EMAIL_FIELD,i=this.UI.SUBSCRIBE_CTA;switch(e.errorCode){case 603041:hd.reportErrorOnEmail(t,"cmpDisabledAccountMessage"),i.disabled=!1;break;case 600003:hd.reportErrorOnEmail(t,"cmpConstraintMessage"),i.disabled=!1;break;default:this.EMAIL_FORM.OnSubmitSuccess(e),this.#is.dialog.open({data:e,focusBackToElement:i}),this.OTP_FORM.otpField.focusFirstElement()}}onGenerateOTPError(e){this.EMAIL_FORM.OnSubmitError(e),this.#is.dialog.open({data:e,focusBackToElement:this.UI.SUBSCRIBE_CTA}),this.OTP_FORM.otpField.focusFirstElement(),this.OTP_FORM._otpResponseError(e)}ToggleView(e=Ed){switch(this.Log("ToggleView",e),e){case Ed:this.showDefaultView();break;case vd:this.showLoggedInView();break;case bd:this.showSubscribedView();break;case Sd:this.showAlreadySubscribedView();break;case Cd:this.showNotAllowedView();break;default:console.assert(!1,"//FIXME")}}showNotAllowedView(){this.Log("showNotAllowedView"),Id.addClass({element:this.UI.COMPONENT,className:yd})}showAlreadySubscribedView(){this.Log("showAlreadySubscribedView"),Id.removeClass({element:this.UI.COMPONENT,className:pd}),Id.addClass({element:this.UI.COMPONENT,className:gd})}showSubscribedView(){this.Log("showSubscribedView"),Id.removeClass({element:this.UI.COMPONENT,className:pd}),Id.addClass({element:this.UI.COMPONENT,className:fd})}showLoggedInView(){this.Log("showLoggedInView"),Id.addClass({element:this.UI.COMPONENT,className:pd})}showDefaultView(){this.Log("showDefaultView"),this.UI.COMPONENT.classList.remove(fd,gd,yd,pd)}isAlreadySubscribed(){let e=!1;const[t,i]=this.CurrentSubsriptionItem.locale.split("_");if(this.UserSubscriptions){const s=this.UserSubscriptions.findSubscriptionItem(t,i,this.CurrentSubsriptionItem.gigyaMapping);e=s&&s.email}return this.Log("isAlreadySubscribed",!!e),!!e}doSubscribe(e,t){let i=0,s=!1,n=!1,o=!1,r=this.IsLoggedIn;if("object"!=typeof t)return s=!0,void this.onSusbcribeError(t);if(i=t.errorCode,n=i==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION,s=0!=i,t.subscriptions&&(this.UserSubscriptions=new Dl(t.subscriptions),o=this.isAlreadySubscribed()),!s&&!n&&o)return this.#Yn=!0,void this._onAlreadySubscribed(t);this.FGE_FORM.PPCForm.showLoadingOverlay();const a=this.buildSubscribeRequestData(e,o);let l;if(this.Log("doSubscribe",e,a),n){this.#Yn=!0,a.data||(a.data={}),a.data.enableOtpLogin=!0;const{regToken:e,UID:i}=t;l=fl.doSocialRegistration({...a,regToken:e,UID:i,isRegistered:!0},this.#xi)}else l=fl.setAccountInfo(a);l.then((e=>{try{const e=fl.getStoredInfoIfActive();try{this.emailSubscription(e)}catch(e){console.error(e)}Sc(this._getAuditEntryData(e));const t=e?.UID;let i;i=n?this.getDatalayerInfo("newSubscriptionVerified",{gigyaId:t}):r?this.getDatalayerInfo("loggedinSubscribed",{gigyaId:t}):this.getDatalayerInfo("accountExistsSubscriptionValidated",{gigyaId:t}),Ct(i)}catch(e){console.warn(e)}this.onSubscribeSuccess(e)})).catch((e=>this.onSusbcribeError(e))).finally((()=>{this.FGE_FORM.PPCForm.hideLoadingOverlay()}))}emailSubscription(e){let{UID:t,UIDSignature:i,signatureTimestamp:s}=e;const n=this.getDatalayerInfo("otpValidated",{gigyaId:t}),o=n?.component["otpform-"]["dc:title"],r=fl.SiteLanguageCode,a=fl.SiteCountryCode;i=encodeURIComponent(i);const l=JSON.stringify({uid:t,uidSignature:i,signatureTimestamp:s,addedSubscriptions:[o],locale:`${a}/${r}`});return fetch("/bin/kpmg/accounts/emailsubscriptions",{body:l,method:"POST",headers:{"content-type":"application/json"}})}_getAuditEntryData(e){const t=fl.SiteLanguageCode,i=fl.SiteCountryCode;let{UID:s,UIDSignature:n,signatureTimestamp:o}=e;n=encodeURIComponent(n);const{contentPath:r="",formType:a,subscriptionTitle:l,campaignName:c="",uniqueIdentifier:d="",formTypeValue:u}=this.UI.COMPONENT.dataset;return JSON.stringify({locale:t,country:i,UID:s,UIDSignature:n,signatureTimestamp:o,uniqueIdentifier:d,customPreferencesData:{fgeGroupId:this.fgeContainerId,contentPath:r,formCategory:u,formCategoryType:a,contentTitle:l,campaignName:c,uniqueIdentifier:d,subscriptionMappingId:this.CurrentSubsriptionItem.gigyaMapping,requestedLocale:`/${i}/${t}`}})}onSusbcribeError(e){const t=e&&e.errorCode;this.Log("onSusbcribeError",e),xl.show({errorcode:t||"GENERIC",form:this.UI.OTP_FORM,root:this.UI.ROOT})}onSubscribeSuccess(e,t=bd){setTimeout((()=>this.UI.SUCCES_DIV.querySelector("a")?.focus()),100),this.Log("onSubscribeSuccess",e),this.ToggleView(t),this.#is.CloseConfirmed=!0,this.#is.dialog.close("success")}buildSubscribeRequestData(e,t){const[i,s]=this.CurrentSubsriptionItem.locale.split("_"),n=this.UI.FGE_FORM;let o={};if(e){const t=new Nl(fl.CountryCode,fl.LanguageCode);o={...o,...t.build(e,n)}}if(!t){const e=new Dl;e.addCountry(i).addLocale(s).addItem(this.CurrentSubsriptionItem.gigyaMapping,!0,[this.CurrentSubsriptionItem.tag]),e.addCountry(fl.CountryCode).addLocale(fl.LanguageCode).addItem("subscription_opt_in",!0),this.#ho(o.subscriptions,e),e.updateFlags(),o.subscriptions=e.getJSON()}return o}#ho(e,t){if(e)for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];for(const e in s)if(Object.hasOwnProperty.call(s,e)){const n=s[e];for(const s in n)if(Object.hasOwnProperty.call(n,s)){const o=n[s];t.addCountry(i).addLocale(e).addItem(s,o?.email?.isSubscribed)}}}}showForm(e){let t,i=this.#is.dialog.UI.CLOSE_BUTTON;this.UI.OVERLAY_DIALOG_ROOT.querySelector(".cmp-custom-dialog__content-container")?.classList.remove("otp-overlay-view"),"otp"==e?(this.UI.OVERLAY_DIALOG_ROOT.querySelector(".cmp-custom-dialog__content-container")?.classList.add("otp-overlay-view"),this.UI.OTP_FORM.classList.remove("hide"),this.UI.FGE_FORM.classList.add("hide"),t=this.UI.OTP_FORM._Handler.UI.RESEND_CODE_BTN):"fge"==e&&(this.UI.FGE_FORM.classList.remove("hide"),this.UI.OTP_FORM.classList.add("hide"),t=this.UI.FGE_FORM._Handler.UI.SUBMIT_BTN),this.#is.dialog.firstElement=i,this.#is.dialog.lastElement=t}haveLoginResponse(e){const t=e?.errorCode,i=this.FGE_FORM.getFieldNames(),s=hd.isMissingFieldValue(e,i);if(0==t){if(this.IsCrossCountry())return void this.onSubscribeSuccess(e,Cd);this.UserSubscriptions=new Dl(e?.subscriptions)}if(0!=t&&t!=sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION)return;if(!ad.isGroupSubscribed(this.fgeContainerId)&&0==t&&s&&!this.isAlreadySubscribed()||t==sl.SAP_ERROR_ACCOUNT_PENDING_REGISTRATION){if(!this.#uo){Ct(this.getDatalayerInfo("otpValidated",{gigyaId:e.UID}))}this.FGE_FORM.prepare(e),this.#uo?this.#is.dialog.open({data:e,focusBackToElement:this.UI.SUBSCRIBE_CTA}):this.showForm("fge")}else 0==t?this.doSubscribe(null,e):xl.show({errorcode:t??"GENERIC",root:this.UI.OTP_FORM})}haveFGEFormInfo(e){this.doSubscribe(e,this.#uo?fl.getStoredInfoIfActive():this.OTP_FORM.OTPInfo.OTPLoginResponse)}_onAlreadySubscribed(e){Ct(this.getDatalayerInfo("accountExistsAlreadySubscribed",{gigyaId:e.UID})),this.onSubscribeSuccess(e,Sd)}_onDialogBeforeOpen(){this.UI.OTP_FORM?.reset(),this.OTP_FORM.OTPInfo.GenOTPResponse?this.showForm("otp"):this.showForm("fge")}getDatalayerInfo(e,t){switch(e){case"otpFormClosed":return JSON.parse(this.#is.dialog.UI.CLOSE_BUTTON[0]?.getAttribute("data-otp-form-closed"));case"newSubscriptionVerified":case"loggedinSubscribed":case"fastSubscriptionStart":case"accountExistsSubscriptionValidated":case"accountExistsAlreadySubscribed":case"otpValidated":const i=this.UI.COMPONENT.dataset[e];if(i)try{const e=JSON.parse(i),s=e.eventInfo?.path?.split(".")[1];if(t&&s&&e.component){const i=e.component[s];e.component[s]={...i,...t}}return e}catch(e){console.warn(e)}return{}}return{}}}const Od="local"==Ld.getInstance().instance;(wn()||Od)&&yt(Ad,{selectors:{self:md.COMPONENT}});const wd="cmp-fgepromo-video",Pd={ROOT:"",PLAYLIST:`[data-${wd}-playlist]`,PLAYLIST_ITEM:`[data-${wd}-playlist--item]`,BTN_PLAYLIST_LEFT:`[data-${wd}-playlist--btn-left]`,BTN_PLAYLIST_RIGHT:`[data-${wd}-playlist--btn-right]`},Nd=`${wd}-playlist`,Rd=`${Nd}__item--playing`,Ud=`${Nd}__item--paused`,kd=`.${Nd}__item--title`;class Dd{#e="VideoPlaylist";#mo;#po="";UI={};#fo={classes:{hide:"hidden",inView:"in-view"}};#rt=new fn;get#go(){return this.UI.ROOT.className.includes("--loggedin")&&"vertical"==this.#po&&"DEFAULT"!==this.#rt.getData().currentBreakPoint}constructor({element:e,onClick:t}){e&&(Et(e,this.UI,Pd),this.UI.PLAYLIST_ITEMS=Array.from(this.UI.PLAYLIST.querySelectorAll(Pd.PLAYLIST_ITEM)),t&&(this.#mo=t),this.#tn(e))}#tn(e){this.#po=this.UI.PLAYLIST.dataset.placement,this.UI.PLAYLIST_ITEMS.forEach((e=>e.addEventListener("click",(e=>{this.#mo&&this.#mo(e,e.currentTarget.dataset.mediaId)})))),this.#yo(e,this.UI.PLAYLIST),this.initScrollControls({parent:e,selectors:{root:Pd.PLAYLIST,item:Pd.PLAYLIST_ITEM,prevButton:Pd.BTN_PLAYLIST_LEFT,nextButton:Pd.BTN_PLAYLIST_RIGHT},classes:this.#fo.classes,threshold:.9})}#Eo(e=[],t){return e.forEach((e=>e.disabled=!t))}#F(e=[],t){e.forEach((e=>e.classList.toggle(this.#fo.classes.hide,!t)))}#yo(e){if("vertical"!=this.#po)return;const t=e.querySelector("[data-cmp-fgepromo-video-element]"),i=e.querySelector(Pd.PLAYLIST);new ResizeObserver((e=>{if(!this.#go)return void(i.style.height="");const[t]=e;t.contentBoxSize&&requestAnimationFrame((()=>{const e=t.contentBoxSize[0];i.style.height=`${e.blockSize.toFixed(0)}px`,this.UI.PLAYLIST.style.display="flex"}))})).observe(t)}initScrollControls({parent:e,selectors:t,threshold:i=1}){const s=Array.from(e.querySelectorAll(t.item)),n=e.querySelector(t.root),o=s[0],r=s[s.length-1],a=e.querySelector(t.prevButton),l=e.querySelector(t.nextButton),c=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.isIntersecting;e.target.classList.toggle(this.#fo.classes.inView,t),e.target!==o&&e.target!=r||requestAnimationFrame((()=>this.#vo()))}))}),{root:n,threshold:i});s.forEach((e=>c.observe(e))),a.addEventListener("click",(()=>this.#bo(-1))),l.addEventListener("click",(()=>this.#bo(1))),setTimeout((()=>this.#vo()),16),window.addEventListener("resize",(()=>requestAnimationFrame((()=>this.#vo()))))}#bo(e){const t=this.UI.PLAYLIST,i=this.UI.PLAYLIST_ITEMS[0];this.#go?t.scrollTop+=e*i.clientHeight:t.scrollLeft+=e*i.clientWidth}#vo(){const e=this.UI.PLAYLIST_ITEMS[0],t=this.UI.PLAYLIST_ITEMS[this.UI.PLAYLIST_ITEMS.length-1],i=e.classList.contains(this.#fo.classes.inView),s=t.classList.contains(this.#fo.classes.inView),n=!e.classList.contains(this.#fo.classes.inView)||!t.classList.contains(this.#fo.classes.inView);this.adjustAlignement(n),this.#F([this.UI.BTN_PLAYLIST_LEFT,this.UI.BTN_PLAYLIST_RIGHT],n),this.#Eo([this.UI.BTN_PLAYLIST_LEFT],!i),this.#Eo([this.UI.BTN_PLAYLIST_RIGHT],!s)}adjustAlignement(e,t){this.UI.PLAYLIST.style.justifyContent=e?"flex-start":"center"}setPlaylistItemState(e,t){let i;if(this.UI.PLAYLIST_ITEMS.forEach((t=>{t.dataset.mediaId==e&&(i=t),t.classList.remove(Ud),t.classList.remove(Rd)})),!i)return!1;i.classList.add(t?Rd:Ud)}setItemTitle(e=[]){e.map((({id:e,title:t})=>({id:e,title:t,element:this.UI.PLAYLIST_ITEMS.find((t=>t.dataset.mediaId==e))}))).forEach((({title:e,element:t})=>{if(!t)return;const i=t.querySelector(kd);if(i){for(;i.firstChild;)i.removeChild(i.lastChild);i.appendChild(document.createTextNode(e)),i.classList.remove("hidden")}}))}}var Md=class{#e="PromoVideoPlayer";#So;get playlist(){return this.#So}#Co=!1;#Io=!1;#_o=!1;#mo=null;#Lo=null;#To={start:!1,"25%":!1,"50%":!1,"75%":!1,"95%":!1,complete:!1,reset:function(){this.start=this["25%"]=this["50%"]=this["75%"]=this["95%"]=this.complete=!1}};#se={videoPlayer:null};constructor(e){const{parent:t,videoElement:i,onClick:s,onPlaylistItemClick:n}=e;t&&(this.#se.parent=t,i&&(s&&(this.#mo=s),n&&(this.#Lo=n),this.#tn(i)))}get isPlaying(){return this.#Co}#tn(e){const t=this.#se.parent.querySelector(`[${e}]`);this.#se.videoPlayer=t,this.#Ae()}initPlaylist(){this.#So=new Dd({element:this.#se.parent,onClick:(...e)=>this.onPlaylistItemClick(...e)})}async onPlaylistItemClick(e,t){this.#Lo&&this.#Lo(e,t)}get canPlay(){return this.#_o}Play(){this.#_o&&(this.#Co?this.#Ao():this.#Oo()),this.#se.videoPlayer.focus()}setSource=({src:e,play:t=!1,poster:i})=>{const{videoPlayer:s}=this.#se;s.src&&s.load(),this.#wo(e),i&&(s.poster=i),t&&this.#Oo()};isSourceSet=()=>this.#_o;#wo(e){this.#se.videoPlayer.src=e,this.#_o=!0}#Oo(){this.#se.videoPlayer.play(),this.#Po()}#Ao(){this.#se.videoPlayer.pause()}#Po(){this.#se.videoPlayer.controls=!0}#Ae(){const e=this.#se.videoPlayer,t=e.parentElement.querySelector(".cmp-fgepromo-video__play-button");e.addEventListener("click",this.#No.bind(this)),t?.addEventListener("click",this.#No.bind(this)),e.addEventListener("play",this.#Ro.bind(this)),e.addEventListener("keypress",this.#Ro.bind(this)),e.addEventListener("pause",this.#Uo.bind(this)),e.addEventListener("timeupdate",this.#ko.bind(this)),e.addEventListener("ended",this.#Do.bind(this)),e.addEventListener("contextmenu",(e=>{e.preventDefault()}))}#Uo(e){this.#Ro(e),this.#se.videoPlayer.removeAttribute("controls")}async#No(e){e.preventDefault(),this.#mo&&this.#mo(e),this.#_o&&(this.#Co?this.#Ao():this.#Oo(),this.#se.videoPlayer.focus())}#Ro(e){const{type:t}=e;"play"===t?(this.#Co=!0,this.#se.videoPlayer.classList.toggle("has-source",!0)):"pause"===t&&(this.#se.videoPlayer.classList.toggle("has-source",!0),this.#Co=!1),this.#se.videoPlayer.classList.toggle("playing",this.#Co),"keypress"==e.type&&(13==e.keyCode&&this.#No(e),e.keyCode)}#ko(){const e=this.#se.videoPlayer,t=e.currentTime/e.duration;this.#Mo(t,0,"start"),this.#Mo(t,.25,"25%"),this.#Mo(t,.5,"50%"),this.#Mo(t,.75,"75%"),this.#Mo(t,.95,"95%")}#Mo(e,t,i){!this.#To[i]&&e>t&&(this.#Fo(i),this.#To[i]=!0)}#Do(){this.#Fo("complete"),this.#qo()}#Fo(e){const t=new CustomEvent("videoProgress",{detail:{milestone:e}});this.#se.videoPlayer.dispatchEvent(t)}#qo(){this.#To.reset()}};var Fd=class{#xo;constructor(e){const t=e.querySelector("[data-cmp-fgepromo-datalayer]");if(!t)return console.error("Datalayer root element not found."),void(this.#xo={});this.#xo={...t.dataset}}getDatalayerInfo(e,t){const i=this.#xo[e];if(!i)return{};try{const e=JSON.parse(i);return this.#Vn(e,t),e}catch{return{}}}#Vn(e,t){const i=e.eventInfo?.path?.split(".")[1];if(t&&i&&e.component){const s=e.component[i];e.component[i]={...s,...t}}}getDataLayerComponentValue(...e){return It(...e)}push(...e){try{return Ct(...e)}catch{}}getFormErrorFields(e){return wt(e)}};const{FormUtils:qd,URLUtils:xd}=yn,Vd="cmp-fgepromo-video",$d={ROOT:"",COMPONENT:`.${Vd}`,VIDEO:"[data-cmp-fgepromo-video-element]",VIDEO_BUTTON:`.${Vd}__play-button`,EMAIL_FORM:`.${Vd}__form`,EMAIL_FIELD:`.${Vd}__form input[type=email]`,SUBSCRIBE_CTA:`.${Vd}__form [type=submit]`,TITLE:`.${Vd}__title`,DESCRIPTION:`.${Vd}__description`,XF:".cmp-fgepromo__xf"},Bd={LOGGEDIN:`${Vd}--loggedin`};class Gd{UI={};#Vo;FGEAuth;#$o;#en=ad;#Bo=!1;#Go=!1;#Ho=!1;#V={hasCustomFields:!1,customFields:[],uniqueIdentifierFromURL:xd.getURL()?.searchParams?.uniqueIdentifier,subscriptionType:"Repeat",mediaIdToPlay:"",mediaTitle:"",currentMediaId:"",currentPlaylistItem:null};#Hn;#jo;constructor({element:e}){const t=e.parentElement.closest("[data-cmp-fgepromo]");t&&Et(t,this.UI,$d),this.UI.COMPONENT.classList.contains("unavailable")||(this.#Hn=new Fd(this.UI.ROOT),this.FGEAuth=new hd({rootElement:t,siteCountry:fl.SiteCountryCode,siteLocale:fl.SiteLanguageCode,assetType:this.UI.COMPONENT.dataset.assetType,FormTypeValue:this.UI.COMPONENT.dataset.formTypeValue,FGEId:this.fgeUid,handlerInstance:this,datalayerInstance:this.#Hn}),this.#$o=new Md({parent:this.UI.COMPONENT,videoElement:"data-cmp-fgepromo-video-element",onClick:e=>this.#Ro(e),onPlaylistItemClick:(...e)=>this.#Lo(...e)}),"VIDEO_GALLERY"==this.assetType&&(this.#V.mediaTitle=this.UI.VIDEO.dataset.mediaTitle),this.isGallery&&this.#$o.initPlaylist(),this.#jo=this.UI.COMPONENT.dataset.assetType,this.#V.mediaIdToPlay=this.mediaId.split(",")[0],this.#Vo=new $l(this.UI.EMAIL_FORM,{onSubmit:(...e)=>this.onEmailSubmit(...e),CaptchaEnabled:!1,CheckEmail:!1,InitConfirmationOverlay:!1}),this.UI.XF.removeAttribute("hidden"),this.initEvents())}initEvents(){this.FGEAuth.Events.on(hd.AUTH_EVENTS.ONLOAD_LOGIN,((e,t,i)=>{this.#V.hasCustomFields=i,this.onLoadLogin(e)})).on(hd.AUTH_EVENTS.LOGGED_IN,((e,t,i)=>{this.#V.hasCustomFields=i,this.onNewLogin(e,t,i)})).on(hd.AUTH_EVENTS.LOGIN_WITH_REGISTER,((e,t,i)=>{this.#V.hasCustomFields=i,this.onRegister(e,t,i)})).on(hd.AUTH_EVENTS.LOGIN_WITH_UPDATEDINFO,((e,t,i)=>{this.#V.hasCustomFields=i,this.OnLoginAfterSetInfo(e,t,i)})).on(hd.AUTH_EVENTS.ACCOUNT_INFO_UPDATING,((e,t,i)=>{this.onBeforeSetAccounInfo(e,t,i)})),this.UI.VIDEO?.addEventListener("play",(e=>this.#Ro(e))),this.UI.VIDEO?.addEventListener("pause",(e=>this.#Ro(e))),this.UI.VIDEO?.addEventListener("videoProgress",(e=>this.#Ro(e))),this.#V.uniqueIdentifierFromURL===this.fgeUid&&(this.UI.VIDEO.scrollIntoView({behavior:"smooth",block:"start"}),this.UI.VIDEO.focus({preventScroll:!0}))}#Ko({detail:{milestone:e}}){let t="";switch(e){case"start":t="cmp:videostart";break;case"25%":t="cmp:videotwentyfive";break;case"50%":t="cmp:videofifty";break;case"75%":t="cmp:videoseventyfive";break;case"95%":t="cmp:videocomplete"}const{subscriptionType:i}=this.#V,s=this.#Hn.getDatalayerInfo("videoProgress",{subscriptionType:i});"VIDEO_GALLERY"==this.assetType&&(s.assetTitle=this.#V.mediaTitle),s.event=t,this.#Hn.push(s)}onEmailSubmit(){this.FGEAuth.onCTAClick(this.UI.EMAIL_FIELD.value,this.UI.SUBSCRIBE_CTA),this.#Vo.OnSubmitSuccess({})}async#zo(){this.isGallery&&setTimeout((()=>this.#$o.playlist.setPlaylistItemState(this.#V.currentMediaId,this.#Bo)),16)}#Ro(e){"play"==e.type?(this.UI.VIDEO_BUTTON.hidden=!0,this.#Bo=!0,this.#zo()):"pause"==e.type?(this.UI.VIDEO_BUTTON.hidden=!0,this.#Bo=!1,this.#zo()):"click"==e.type||"keypress"==e.type?this.#No(e):"videoProgress"==e.type&&this.#Ko(e)}#Wo(e){if(!this.isGallery||!e)return;const{name:t="",description:i=""}=e;this.UI.TITLE.innerHTML=this.UI.DESCRIPTION.innerHTML="",this.UI.TITLE.appendChild(document.createTextNode(t)),this.UI.DESCRIPTION.appendChild(document.createTextNode(i))}#Yo(e){const t=this.#en.getVideoDetails(this.fgeUid,this.mediaIdToPlay);if(!t?.source?.src)return;const i=t.source.src;return this.#$o.setSource({src:i,poster:t.poster,play:e}),this.#V.currentMediaId=this.mediaIdToPlay,this.#Wo(t),i}#Lo(e,t){this.#V.mediaIdToPlay=t,this.#V.mediaTitle=e.currentTarget?.dataset.mediaTitle;const i=this.#en.isSubscribed(this.fgeUid);if(!this.FGEAuth.IsLoggedIn||!i)return this.#No();this.#V.currentMediaId==t?this.#$o.Play():this.#Yo(i)}async#No(){if(!this.FGEAuth.IsLoggedIn)return void qd.focusInput(this.UI.EMAIL_FIELD);if(this.canPlayVideo)return;let e=fl.getStoredInfoIfActive();const t=this.FGEAuth.isInfoNeeded(e),i=this.#en.isSubscribed(this.fgeUid),s=this.#en.isGroupSubscribed(this.FGEAuth.fgeContainerId);if(!t){const e={subscriptionType:i?"Subscribed":"Not Subscribed"};this.FGEAuth.wasAlreadyLoggedIn&&(e.loginStatus="Logged-in fgevideo-verified"),"VIDEO_GALLERY"==this.assetType&&(e.assetTitle=this.#V.mediaTitle),this.#Hn.push(this.#Hn.getDatalayerInfo("unlockedClick",e))}return i?this.#Yo():(this.#Go=!0,!s&&t?(this.FGEAuth.FGE_FORM.prepare(e),this.FGEAuth.Overaly.dialog.open({data:e,focusBackToElement:this.UI.VIDEO}),void setTimeout((()=>{this.FGEAuth.showForm("fge"),this.FGEAuth.FGE_FORM.focusFirstElement()}),16)):void(i?this.fetchUrls(e,!0):this.makeFeedAPICall().then((()=>{this.#Yo(!0),this.#Jo()}))))}async makeFeedAPICall(){try{await this.#en.sendFeedGetAssetInfo(this.getAuditEntry()),this.#V.subscriptionType="New",this.#V.customFields=[]}catch{}}getAuditEntry(){let e;this.#V.customFields.length&&(e={},this.#V.customFields.forEach((t=>e[t.name]=t.value)));const{contentPath:t="",formTypeValue:i,formType:s,contentTitle:n="",contentDescription:o=""}=this.UI.COMPONENT.dataset;return{customPreferencesData:{fgeGroupId:this.FGEAuth.fgeContainerId,contentDescription:o,contentPath:t,formCategory:i,formCategoryType:s,gcExpiryToken:"//FIXME",gatedContentAsset:this.mediaId,gatedContentAssetType:this.assetType,customFields:e,contentTitle:n,campaignName:this.campaignName,uniqueIdentifier:this.fgeUid,requestedLocale:`/${fl.SiteCountryCode}/${fl.SiteLanguageCode}`}}}onLoadLogin(e){this.fetchUrls({resp:e}),this.toggleView("loggedin")}onBeforeSetAccounInfo(e,t,i){i&&(this.#Ho=!0);const{customFieldData:s}=e;s?.length&&(this.#V.customFields=s)}OnLoginAfterSetInfo(e){this.#Go=!1,this.UI.VIDEO.focus(),this.FGEAuth.wasAlreadyLoggedIn?this.fetchUrls({resp:e,play:!0}):(this.fetchUrls({resp:e}),this.toggleView("loggedin"))}onRegister(e){this.UI.VIDEO.focus(),this.fetchUrls({resp:e}),this.toggleView("loggedin")}onNewLogin(e){this.#Go=!1,this.UI.VIDEO.focus(),this.fetchUrls(e),this.toggleView("loggedin")}toggleView(e){"loggedin"==e?this.UI.COMPONENT.classList.add(Bd.LOGGEDIN):"default"==e&&this.UI.COMPONENT.classList.remove(Bd.LOGGEDIN)}async fetchUrls({resp:e,play:t=!1,force:i=!1}){if(!this.#en.isFetched||1==i){this.#en.onLogin(e,fl.SiteCountryCode,fl.SiteLanguageCode);try{await this.#en.fetchSubscriptionList()}catch{return}}this.#Yo(t),this.#Jo()}#Jo(){if(!this.isGallery)return;if(!this.#en.isSubscribed(this.fgeUid))return;const e=this.#en.getUIDDetails(this.fgeUid),t=e?.videos.map((({id:e,name:t})=>({id:e,title:t})));this.#$o.playlist.setItemTitle(t)}get canPlayVideo(){return this.FGEAuth.IsLoggedIn&&this.#$o.canPlay}get fgeUid(){return this.UI.COMPONENT?.dataset.uniqueIdentifier}get campaignName(){return this.UI.COMPONENT?.dataset.campaignName}get assetType(){const e=this.UI.COMPONENT.dataset.assetType;return"videoGallery"==e?"VIDEO_GALLERY":e.toUpperCase()}get assetTitle(){return this.#V.mediaTitle}get mediaId(){return this.UI.VIDEO?.dataset.mediaid}get videoSource(){return this.UI.VIDEO?.src||""}get isGallery(){return"VIDEO_GALLERY"==this.assetType}get mediaIdToPlay(){return this.isGallery?this.#V.mediaIdToPlay:this.mediaId}}const Hd="local"==xd.getInstance().instance;(wn()||Hd)&&yt(Gd,{selectors:{self:"[data-cmp-fgepromo-video]"}});const{URLUtils:jd}=yn,Kd="cmp-fgepromo-pdf",zd={ROOT:"",COMPONENT:`.${Kd}`,EMAIL_FORM:`.${Kd}__form`,EMAIL_FIELD:`.${Kd}__form input[type=email]`,SUBSCRIBE_CTA:`.${Kd}__form [type=submit]`,DOWNLOAD_CTA:`.${Kd} .cmp-download__action a`,XF:".cmp-fgepromo__xf",TOKEN_ERROR_OVERLAY:`.${Kd} .cmp-custom-dialog.token-expired`},Wd={LOGGEDIN:`${Kd}--loggedin`};class Yd{UI={};#Vo;FGEAuth;#en=ad;#Xo=!1;#Ho=!1;#rt=new fn;#V={hasCustomFields:!1,customFields:[],auditTokenFromFeedAPI:"",gcTokenFromURl:"",uniqueIdentifierFromURL:"",isDownloadingFromEMailLink:!1,pdfUrl:""};#Hn;get#Qo(){return this.UI.TOKEN_ERROR_OVERLAY._Handler}constructor({element:e}){const t=e.parentElement.closest("[data-cmp-fgepromo]");if(t&&Et(t,this.UI,zd),this.UI.COMPONENT.classList.contains("unavailable"))return;const i=jd.getURL(),{gcToken:s="",uniqueIdentifier:n=""}=i.searchParams;this.#V.gcTokenFromURl=s,this.#V.uniqueIdentifierFromURL=n,this.#Hn=new Fd(this.UI.ROOT),this.FGEAuth=new hd({rootElement:t,siteCountry:fl.SiteCountryCode,siteLocale:fl.SiteLanguageCode,assetType:this.UI.COMPONENT.dataset.assetType,FormTypeValue:this.UI.COMPONENT.dataset.formTypeValue,FGEId:this.fgeUid,handlerInstance:this,datalayerInstance:this.#Hn}),this.#Vo=new $l(this.UI.EMAIL_FORM,{onSubmit:(...e)=>this.#Zo(...e),CaptchaEnabled:!1,CheckEmail:!1,InitConfirmationOverlay:!1}),this.UI.XF.removeAttribute("hidden"),this.#er()}#er(){this.FGEAuth.Events.on(hd.AUTH_EVENTS.ONLOAD_LOGIN,((e,t,i)=>{this.#V.hasCustomFields=i,this.#to(e)})).on(hd.AUTH_EVENTS.LOGGED_IN,((e,t,i,s)=>{this.#V.hasCustomFields=i,this.#tr(e,t,i,s)})).on(hd.AUTH_EVENTS.LOGIN_WITH_REGISTER,((e,t,i)=>{this.#V.hasCustomFields=i,this.#ir(e,t,i)})).on(hd.AUTH_EVENTS.LOGIN_WITH_UPDATEDINFO,((e,t,i)=>{this.#V.hasCustomFields=i,this.#sr(e,t,i)})).on(hd.AUTH_EVENTS.ACCOUNT_INFO_UPDATING,((e,t,i)=>{this.#nr(e,t,i)})),this.#or(),this.UI.DOWNLOAD_CTA?.addEventListener("click",(e=>this.#rr(e))),this.UI.DOWNLOAD_CTA?.addEventListener("keypress",(e=>(" "==e.key||"Enter"==e.key)&&this.#rr(e))),setTimeout((()=>{const[e,t]=Array.from(this.UI.TOKEN_ERROR_OVERLAY.querySelectorAll("[data-cmp-dialog-close-button]"));this.#Qo.firstElement=e,this.#Qo.lastElement=t,this.#Qo.on("dialog-opened",(()=>t?.focus())),this.#Qo.on("dialog-closed",(()=>this.#ar()))}),16)}#ar(){(fl.isLoggedIn()?this.UI.DOWNLOAD_CTA:this.UI.SUBSCRIBE_CTA).focus()}async#or(){this.#V.uniqueIdentifierFromURL===this.fgeUid&&this.#V.gcTokenFromURl&&(this.FGEAuth.Loading.show(),this.#V.isDownloadingFromEMailLink=!0,this.#lr("",this.#V.gcTokenFromURl,!0))}async fetchUrls({response:e,download:t=!1,force:i=!1}){if(!this.#en.isFetched||1==i){this.#en.onLogin(e,fl.SiteCountryCode,fl.SiteLanguageCode);try{await this.#en.fetchSubscriptionList()}catch{return}}this.#cr(t)}#to(e){this.fetchUrls({response:e}),this.toggleView("loggedin")}#nr(e,t,i){i&&(this.#Ho=!0);const{customFieldData:s}=e;s?.length&&(this.#V.customFields=s)}#ir(e){this.UI.DOWNLOAD_CTA.focus(),this.toggleView("loggedin"),this.fetchUrls({response:e})}#tr(e,t,i){this.#Xo;this.#Xo=!1,this.UI.DOWNLOAD_CTA.focus(),this.fetchUrls({response:e}),this.toggleView("loggedin")}#sr(e){this.#Xo;this.#Xo=!1,this.FGEAuth.wasAlreadyLoggedIn?this.fetchUrls({response:e,download:!0}):(this.fetchUrls({response:e}),this.toggleView("loggedin")),this.toggleView("loggedin"),this.UI.DOWNLOAD_CTA.focus()}get fgeUid(){return this.UI.COMPONENT?.dataset.uniqueIdentifier}get assetType(){return"PDF"}get campaignName(){return this.UI.COMPONENT?.dataset.campaignName}get gcToken(){return this.UI.COMPONENT.dataset.gcToken}toggleView(e){"loggedin"==e?this.UI.COMPONENT.classList.add(Wd.LOGGEDIN):"default"==e&&this.UI.COMPONENT.classList.remove(Wd.LOGGEDIN)}async makeFeedAPICall(e){try{const{errorCode:t,auditToken:i}=await this.#en.sendFeedGetAssetInfo(this.getAuditEntry());0==t&&(this.#V.auditTokenFromFeedAPI=i,this.#V.customFields=[],this.#lr(i,this.gcToken,e))}catch(e){throw this.FGEAuth.Loading.hide(),e}}getAuditEntry(){let e;this.#V.customFields.length&&(e={},this.#V.customFields.forEach((t=>e[t.name]=t.value)));const{contentPath:t="",formTypeValue:i,formType:s,contentTitle:n="",contentDescription:o=""}=this.UI.COMPONENT.dataset;return{customPreferencesData:{fgeGroupId:this.FGEAuth.fgeContainerId,contentDescription:o,contentPath:t,formCategory:i,formCategoryType:s,gcExpiryToken:this.gcToken,gatedContentAssetType:this.assetType,customFields:e,contentTitle:n,campaignName:this.campaignName,uniqueIdentifier:this.fgeUid,requestedLocale:`/${fl.SiteCountryCode}/${fl.SiteLanguageCode}`}}}async#lr(e,t,i){if(i){const s=this.#dr(),n=this.#ur(e,t);await this.#hr(n,s,i)}}#dr(){return this.UI.DOWNLOAD_CTA}#ur(e="",t=""){const i=new URL("/bin/kpmg/accounts/promo/assetstream",window.location);return t&&i.searchParams.set("gcToken",t),e&&i.searchParams.set("auditToken",e),i}async#hr(e,t){try{const i=await fetch(e.toString());if("application/pdf"!==i.headers.get("content-type"))return void this.#mr();if(!i.ok)return;const s=await i.blob();if(!s)return;if(this.#V.pdfUrl=URL.createObjectURL(s),this.#pr(this.#V.pdfUrl,t),window.addEventListener("beforeunload",(()=>URL.revokeObjectURL(this.#V.pdfUrl))),this.FGEAuth.Loading.hide(),window.Cypress)alert("pdf-download-success");else{const e=this.#rt.getCurrentBreakPoint();"DEFAULT"==e||"TABLET"==e?(t.removeAttribute("target"),t.click()):open(this.#V.pdfUrl,"_blank")}}catch(e){return void this.#mr()}}#mr(){this.FGEAuth.Loading.hide(),this.#Qo.open({}),this.#V.isDownloadingFromEMailLink&&(this.UI.COMPONENT.scrollIntoView({block:"center"}),this.#ar())}#pr(e,t){t.href=e,t.target="_blank",t.dataset.isReady=!0}#Zo(){this.#V.isDownloadingFromEMailLink=!1,this.FGEAuth.onCTAClick(this.UI.EMAIL_FIELD.value,this.UI.SUBSCRIBE_CTA),this.#Vo.OnSubmitSuccess({})}#rr(e){if(this.#V.isDownloadingFromEMailLink=!1,e.target.dataset.isReady)return!0;if(!this.FGEAuth.IsLoggedIn)return;const t=this.#en.isSubscribed(this.fgeUid),i=this.#en.isGroupSubscribed(this.FGEAuth.fgeContainerId);this.FGEAuth.Loading.show();let s=fl.getStoredInfoIfActive();if(t)this.#cr(!0);else{if(this.FGEAuth.isInfoNeeded(s)&&!i)return this.#Xo=!0,this.FGEAuth.FGE_FORM.prepare(s),this.FGEAuth.Overaly.dialog.open({data:s,focusBackToElement:this.UI.DOWNLOAD_CTA}),this.FGEAuth.Loading.hide(),void setTimeout((()=>{this.FGEAuth.showForm("fge"),this.FGEAuth.FGE_FORM.focusFirstElement()}),16);this.makeFeedAPICall(!0)}const n={subscriptionType:t?"Subscribed":"Not Subscribed"};this.FGEAuth.wasAlreadyLoggedIn&&(n.loginStatus="Logged-in fgepdf-verified"),this.#Hn.push(this.#Hn.getDatalayerInfo("unlockedClick",n))}#cr(e){if(!this.#en.isSubscribed(this.UI.COMPONENT.dataset.uniqueIdentifier))return!1;const{auditToken:t}=this.#en.getPDFDetails(this.fgeUid);return t&&this.#lr(t,this.gcToken,e),!!t}}const Jd="local"==jd.getInstance().instance;(wn()||Jd)&&yt(Yd,{selectors:{self:"[data-cmp-fgepromo-pdf]"}});const{URLUtils:Xd,DOMUtils:Qd}=yn,Zd="cmp-fgepromo-er",eu={ROOT:"",COMPONENT:`.${Zd}`,EMAIL_FORM:`.${Zd}__form`,EMAIL_FIELD:`.${Zd}__form input[type=email]`,SUBSCRIBE_CTA:`.${Zd}__form [type=submit]`,XF:".cmp-fgepromo__xf"},tu={LOGGEDIN:"cmp-fgepromo__loggedin",SUBSCRIBED:"cmp-fgepromo__subscribed",ALREADY_SUBSCRIBED:"cmp-fgepromo__already-subscribed",NOTALLOWED:"cmp-fgepromo__not-allowed"};class iu{UI={};#Vo;FGEAuth;#en=ad;#Hn;#V={hasCustomFields:!1,customFields:[]};constructor({element:e}){const t=e.parentElement.closest("[data-cmp-fgepromo]");if(t&&Et(t,this.UI,eu),this.UI.COMPONENT.classList.contains("unavailable"))return;const{eventEndDate:i}=this.UI.COMPONENT.dataset;this.#fr(i)?this.#gr():(this.#Hn=new Fd(this.UI.ROOT),this.FGEAuth=new hd({rootElement:t,siteCountry:fl.SiteCountryCode,siteLocale:fl.SiteLanguageCode,assetType:this.UI.COMPONENT.dataset.assetType,FormTypeValue:this.UI.COMPONENT.dataset.formTypeValue,FGEId:this.fgeUid,handlerInstance:this,datalayerInstance:this.#Hn}),this.#Vo=new $l(this.UI.EMAIL_FORM,{onSubmit:(...e)=>this.#Zo(...e)}),this.UI.XF.removeAttribute("hidden"),this.#er())}#fr(e){return new Date(e)<new Date}#er(){this.FGEAuth.Events.on(hd.AUTH_EVENTS.ONLOAD_LOGIN,((e,t,i)=>{this.#V.hasCustomFields=i,this.#to(e)})).on(hd.AUTH_EVENTS.LOGGED_IN,((e,t,i,s)=>{this.#V.hasCustomFields=i,this.#tr(e,t,i,s)})).on(hd.AUTH_EVENTS.LOGIN_WITH_REGISTER,((e,t,i)=>{this.#V.hasCustomFields=i,this.#ir(e,t,i)})).on(hd.AUTH_EVENTS.LOGIN_WITH_UPDATEDINFO,((e,t,i)=>{this.#V.hasCustomFields=i,this.#sr(e,t,i)})).on(hd.AUTH_EVENTS.ACCOUNT_INFO_UPDATING,((e,t,i)=>{this.#nr(e,t,i)}))}async fetchUrls({response:e,subscribing:t=!1}){if(!this.#en.isFetched){this.#en.onLogin(e,fl.SiteCountryCode,fl.SiteLanguageCode);try{await this.#en.fetchSubscriptionList()}catch{return}}t&&this.#en.isSubscribed(this.fgeUid)?this.#yr():this.#en.isSubscribed(this.fgeUid)?this.#Er():(this.toggleView("loggedin"),this.UI.EMAIL_FIELD.value=e.profile.email)}#to(e){this.fetchUrls({response:e})}#nr(e,t,i){const{customFieldData:s}=e;s?.length&&(this.#V.customFields=s)}#ir(e){this.toggleView("loggedin"),this.fetchUrls({response:e,subscribing:!0})}#tr(e){this.fetchUrls({response:e}),this.toggleView("loggedin")}#sr(e){this.FGEAuth.wasAlreadyLoggedIn?this.fetchUrls({response:e,subscribing:!0}):(this.fetchUrls({response:e,subscribing:!0}),this.toggleView("loggedin"))}get fgeUid(){return this.UI.COMPONENT?.dataset.uniqueIdentifier}get campaignName(){return this.UI.COMPONENT?.dataset.campaignName}toggleView(e){"loggedin"==e?this.UI.COMPONENT.classList.add(tu.LOGGEDIN):"default"==e&&this.UI.COMPONENT.classList.remove(tu.LOGGEDIN)}async makeFeedAPICall(){try{const{errorCode:e}=await this.#en.sendFeedGetAssetInfo(this.getAuditEntry());0==e&&(this.FGEAuth.Loading.hide(),Qd.removeClass({element:this.UI.COMPONENT,className:tu.LOGGEDIN}),Qd.addClass({element:this.UI.COMPONENT,className:tu.SUBSCRIBED}))}catch(e){throw this.FGEAuth.Loading.hide(),e}}getAuditEntry(){let e;this.#V.customFields.length&&(e={},this.#V.customFields.forEach((t=>e[t.name]=t.value)));const{contentPath:t="",formTypeValue:i,formType:s,contentTitle:n="",contentDescription:o="",eventType:r="",eventTimezone:a,eventLocation:l="",eventEndDate:c="",eventStartDate:d=""}=this.UI.COMPONENT.dataset;return{customPreferencesData:{fgeGroupId:this.FGEAuth.fgeContainerId,eventStartDate:d,eventLocation:l,timezone:a,eventEndDate:c,eventType:r,contentDescription:o,contentPath:t,formCategory:i,formCategoryType:s,customFields:e,contentTitle:n,campaignName:this.campaignName,uniqueIdentifier:this.fgeUid,requestedLocale:`/${fl.SiteCountryCode}/${fl.SiteLanguageCode}`}}}#Zo(){this.FGEAuth.IsLoggedIn?this.#vr():this.FGEAuth.onCTAClick(this.UI.EMAIL_FIELD.value,this.UI.SUBSCRIBE_CTA),this.#Vo.OnSubmitSuccess({})}#vr(){const e=this.#en.isSubscribed(this.fgeUid),t=this.#en.isGroupSubscribed(this.FGEAuth.fgeContainerId);this.FGEAuth.Loading.show();let i=fl.getStoredInfoIfActive();if(e)this.#Er(),this.FGEAuth.Loading.hide();else{if(this.FGEAuth.isInfoNeeded(i)&&!t)return this.FGEAuth.FGE_FORM.prepare(i),this.FGEAuth.Overaly.dialog.open({data:i,focusBackToElement:this.UI.DOWNLOAD_CTA}),this.FGEAuth.Loading.hide(),void setTimeout((()=>{this.FGEAuth.showForm("fge"),this.FGEAuth.FGE_FORM.focusFirstElement()}),16);this.makeFeedAPICall()}}#yr(){Qd.removeClass({element:this.UI.COMPONENT,className:tu.LOGGEDIN}),Qd.addClass({element:this.UI.COMPONENT,className:tu.SUBSCRIBED})}#Er(){Qd.removeClass({element:this.UI.COMPONENT,className:tu.LOGGEDIN}),Qd.addClass({element:this.UI.COMPONENT,className:tu.ALREADY_SUBSCRIBED})}#gr(){Qd.removeClass({element:this.UI.COMPONENT,className:tu.LOGGEDIN}),Qd.addClass({element:this.UI.COMPONENT,className:tu.NOTALLOWED})}}const su="local"==Xd.getInstance().instance;(wn()||su)&&yt(iu,{selectors:{self:"[data-cmp-fgepromo-er]"}});yt((function(e){const t=e.element;var i,s;!function(e){const t=window.innerWidth,i=e.querySelector(".cmp-carousel__action--previous"),s=[...e.querySelectorAll(".cmp-carousel__indicator")].length,n=t<768?""+22*s:""+24*s;i.style.marginRight=`${n}px`}(t),i=t,s=function(e){const t=[...e.parentElement.children],i=t.indexOf(e);t.forEach((e=>{(function(e){return e.classList.contains("cmp-carousel__item")})(e)&&(e.style.transform=`translateX(-${100*i}%)`)}))},new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)((function(e){e.forEach((function(e){const t=e.target;t.classList.contains("cmp-carousel__item--active")&&s(t)}))})).observe(i,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}),{selectors:{self:".contact-carousel-v2"}});yt((function(e){const t=e.element;var i,s;!function(e){const t=window.innerWidth,i=e.querySelector(".cmp-carousel__action--previous"),s=[...e.querySelectorAll(".cmp-carousel__indicator")].length,n=t<768?""+22*s:""+24*s;i.style.marginRight=`${n}px`}(t),i=t,s=function(e){const t=[...e.parentElement.children],i=t.indexOf(e);t.forEach((e=>{(function(e){return e.classList.contains("cmp-carousel__item")})(e)&&(e.style.transform=`translateX(-${100*i}%)`)}))},new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)((function(e){e.forEach((function(e){const t=e.target;t.classList.contains("cmp-carousel__item--active")&&s(t)}))})).observe(i,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}),{selectors:{self:".contact-carousel"}})}()}();