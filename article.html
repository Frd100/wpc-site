<!DOCTYPE html>
<html lang="fr-FR" dir="ltr">

<head>
    <meta http-equiv="content-type" content="text/html" charset="UTF-8">
    <meta http-equiv="content-encoding" content="text/html">
    <meta charset="utf-8" class="chrome">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="fr-FR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- WPC Meta Tags -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://westparisconsulting.fr/article.html">
    <meta property="og:title" content="Article - West Paris Consulting">
    <meta property="og:description" content="Lire l'article complet de West Paris Consulting">
    <meta property="og:site_name" content="WPC">
    <meta property="og:image" content="homepage.webp">
    <meta property="og:locale" content="fr_FR">

    <meta property="twitter:url" content="https://westparisconsulting.fr/article.html">
    <meta property="twitter:title" content="Article - West Paris Consulting">
    <meta property="twitter:description" content="Lire l'article complet de West Paris Consulting">
    <meta property="twitter:creator" content="@WestParisConsulting">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="homepage.webp">

    <title>Article - West Paris Consulting</title>
    <meta name="description" content="Lire l'article complet de West Paris Consulting">

    <!-- WPC Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- WPC Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <link rel="stylesheet" href="style.css?v=2">
    <style>
        /* Hero Section Article */
        .article-hero-section {
            position: relative;
            height: 60vh;
            min-height: 400px;
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .article-hero-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .article-hero-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.50);
        }

        .article-hero-content {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            color: white;
        }

        .article-hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: white;
        }

        .article-hero-meta span {
            color: white;
            font-weight: 500;
        }

        .article-hero-title {
            font-size: 2.2rem;
            font-weight: 700;
            line-height: 1.2;
            margin: 0;
            color: white;
        }

        /* Styles spécifiques pour la page article */
        .cmp-article-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 10px;
        }

        .cmp-article-content {
            padding: 0;
        }

        .article-content {
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .article-content h2 {
            font-size: 1.8rem;
            margin-top: 40px;
            margin-bottom: 20px;
            color: #333;
        }

        .article-content h3 {
            font-size: 1.4rem;
            margin-top: 30px;
            margin-bottom: 15px;
            color: #444;
        }

        .article-content p {
            margin-bottom: 20px;
        }

        .article-content img {
            margin: 20px 0;
            border-radius: 0;
            box-shadow: none;
        }

        .article-actions {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        @media (max-width: 768px) {
            .article-hero-section {
                height: 50vh;
                min-height: 300px;
            }

            .article-hero-content {
                padding: 0 1rem;
            }

            .article-hero-title {
                font-size: 1.8rem;
            }

            .article-hero-meta {
                font-size: 0.8rem;
            }

            .cmp-article-section {
                padding: 15px;
            }
        }
    </style>
</head>

<body class="page basicpage" id="page-wpc-article" data-cmp-link-accessibility-enabled=""
    data-cmp-link-accessibility-text="s'ouvre dans un nouvel onglet" data-cmp-data-layer-enabled="">

    <div class="root container responsivegrid">

        <!-- Navigation Placeholder -->
        <div id="nav-placeholder"></div>

        <!-- Hero Section Article -->
        <div class="article-hero-section" id="article-hero">
            <div class="article-hero-image" id="article-hero-image">
                <!-- Image de l'article -->
            </div>
            <div class="article-hero-content">
                <h1 class="article-hero-title" id="article-hero-title">Chargement...</h1>
                <div class="article-hero-meta" id="article-hero-meta">
                    <!-- Métadonnées de l'article -->
                </div>
            </div>
        </div>

        <!-- Contenu principal -->
        <main class="main container responsivegrid aem-GridColumn aem-GridColumn--default--12">
            <div id="main-wpc-content" class="cmp-container">
                <div class="section container responsivegrid">

                    <!-- Article complet -->
                    <article class="cmp-article-section">
                        <div class="cmp-article-content">
                            <div class="article-content" id="article-content">
                                <!-- Contenu de l'article -->
                            </div>
                            <div class="article-actions">
                                <a href="actualites.html" class="btn-secondary">
                                    <span class="material-icons">arrow_back</span>
                                    Retour aux actualités
                                </a>
                            </div>
                        </div>
                    </article>

                </div>
            </div>
        </main>

        <!-- WPC Footer -->
        <footer class="cmp-footer">
            <div class="cmp-footer__container">
                <div class="cmp-footer__content">
                    <div class="cmp-footer__links">
                        <a href="index.html">Accueil</a>
                        <a href="domaines.html">Nos Domaines</a>
                        <a href="equipe.html">Notre Équipe</a>
                        <a href="actualites.html">Actualités</a>
                        <a href="contact.html">Contact</a>
                        <a href="mentions-legales.html">Mentions légales</a>
                        <a href="confidentialite.html">Politique de Confidentialité</a>
                    </div>

                    <div class="cmp-footer__copyright">
                        <p>© 2025 West Paris Consulting, association étudiante de l'Université Paris Nanterre. Tous
                            droits réservés.</p>
                    </div>
                </div>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script src="main.js"></script>

    <!-- Script de chargement de l'article -->
    <script>
        // Charger l'article spécifique
        async function loadArticle() {
            const urlParams = new URLSearchParams(window.location.search);
            const filename = urlParams.get('file');

            if (!filename) {
                document.getElementById('article-content').innerHTML = '<p style="text-align: center; color: #d00;">Article non trouvé.</p>';
                return;
            }

            try {
                // Charger le fichier spécifique
                const response = await fetch(`https://api.github.com/repos/Frd100/wpc-site/contents/content/actualites/${filename}`);
                const file = await response.json();

                const contentResponse = await fetch(file.download_url);
                const content = await contentResponse.text();
                const article = parseMarkdownFile(content);

                if (!article) {
                    document.getElementById('article-content').innerHTML = '<p style="text-align: center; color: #d00;">Erreur lors du chargement de l\'article.</p>';
                    return;
                }

                // Mettre à jour le titre de la page
                document.title = `${article.title} - West Paris Consulting`;
                document.getElementById('article-hero-title').textContent = article.title;

                // Mettre à jour les métadonnées dans la hero section
                const date = new Date(article.date).toLocaleDateString('fr-FR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                let metaHtml = `
                    <span class="article-date">${date}</span>
                    <span class="article-author">Par ${escapeHtml(article.author)}</span>
                `;

                if (article.type) {
                    metaHtml += `<span class="article-type">${escapeHtml(article.type)}</span>`;
                }

                document.getElementById('article-hero-meta').innerHTML = metaHtml;

                // Mettre à jour l'image de la hero section
                if (article.banner) {
                    document.getElementById('article-hero-image').style.backgroundImage = `url(${article.banner})`;
                }

                // Mettre à jour le contenu
                const htmlContent = markdownToHtml(article.body);
                document.getElementById('article-content').innerHTML = htmlContent;

            } catch (error) {
                console.error('Erreur lors du chargement de l\'article:', error);
                document.getElementById('article-content').innerHTML = '<p style="text-align: center; color: #d00;">Erreur lors du chargement de l\'article.</p>';
            }
        }

        // Parser un fichier Markdown avec front matter YAML
        function parseMarkdownFile(content) {
            const match = content.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
            if (!match) return null;

            const frontMatter = {};
            const lines = match[1].split('\n');
            lines.forEach(line => {
                const colonIndex = line.indexOf(':');
                if (colonIndex === -1) return;

                const key = line.substring(0, colonIndex).trim();
                let value = line.substring(colonIndex + 1).trim();

                // Supprimer les guillemets
                value = value.replace(/^["']|["']$/g, '');

                // Convertir les booléens
                if (value === 'true') value = true;
                if (value === 'false') value = false;

                frontMatter[key] = value;
            });

            // Si pas de champ 'body' dans le front matter, utiliser le contenu après ---
            const body = frontMatter.body || match[2].trim();

            // S'assurer que tous les champs requis existent
            return {
                title: frontMatter.title || 'Sans titre',
                date: frontMatter.date || new Date().toISOString().split('T')[0],
                author: frontMatter.author || 'Auteur inconnu',
                excerpt: frontMatter.excerpt || '',
                banner: frontMatter.banner || '',
                type: frontMatter.type || 'Article',
                body: body,
                published: frontMatter.published !== false && frontMatter.published !== 'false'
            };
        }

        // Convertir Markdown en HTML
        function markdownToHtml(markdown) {
            let html = markdown;

            // Traitement des paragraphes d'abord (avant de casser avec split)
            html = html.split('\n\n').map(para => {
                para = para.trim();
                if (!para) return '';

                // Titres
                if (para.match(/^### /)) {
                    return para.replace(/^### (.*$)/gim, '<h3>$1</h3>');
                }
                if (para.match(/^## /)) {
                    return para.replace(/^## (.*$)/gim, '<h2>$1</h2>');
                }
                if (para.match(/^# /)) {
                    return para.replace(/^# (.*$)/gim, '<h1>$1</h1>');
                }

                // Séparateurs
                if (para.match(/^---$/)) {
                    return para.replace(/^---$/gim, '<hr>');
                }

                // Listes non ordonnées
                if (para.match(/^\- /)) {
                    const listItems = para.split('\n').map(item => {
                        if (item.match(/^\- /)) {
                            return item.replace(/^\- (.+)$/gim, '<li>$1</li>');
                        }
                        return item;
                    }).join('');
                    return `<ul>${listItems}</ul>`;
                }

                // Pour les autres paragraphes, traiter le contenu inline
                let processedPara = para;

                // Images Markdown
                processedPara = processedPara.replace(/!\[(.*?)\]\((.*?)\)/g, '<img src="$2" alt="$1" style="max-width:100%;height:auto;" onerror="this.style.display=\'none\'">');

                // Liens Markdown
                processedPara = processedPara.replace(/\[([^\]]+)\]\(([^\)]+)\)/g, '<a href="$2">$1</a>');

                // Gras et italique
                processedPara = processedPara.replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>');
                processedPara = processedPara.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
                processedPara = processedPara.replace(/\*(.+?)\*/g, '<em>$1</em>');

                return `<p>${processedPara}</p>`;
            }).join('\n');

            return html;
        }

        // Échapper le HTML pour éviter les injections XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Charger au chargement de la page
        document.addEventListener('DOMContentLoaded', loadArticle);
    </script>
</body>

</html>